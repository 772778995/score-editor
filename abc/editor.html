<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <script type="text/javascript">
      // window.onerror = function(err) { console.error(err); return true; }
      Object.defineProperty(window, 'onerror', {
        get() { return console.error },
        set() { return () => {} }
      });
      window.AE = {
        // api_url: 'https://dev2.midiplusedu.com/api',
        api_url: '{{$api_url}}',
        base_url: '{{$base_url}}',
        file_url: '{{$file_url}}'
      };
      //文件服务器地址
      var file_server_url = "";
      var FILE_URL = window.AE.file_url || '';
      // API 服务器地址
      var API_SERVER_URL = window.AE.api_url || '';
      //五线谱的宽度
      var pagewidth = 20;
      //五线谱图片大小
      var scale = 1.4;
      //最后一次停的位置
      var laststop = -1;
      //是否显示谱音同步动画
      var animation = true;
      var isCtrl = false;
      var isShift = false;
      var broserOk = false;
      var errorcheck = false;
      //是否有接midi设备
      var hasmidi = false;
      if (
        window.AudioContext ||
        window.webkitAudioContext ||
        navigator.requestMIDIAccess ||
        window.msAudioContext ||
        window.mozAudioContext
      ) {
        broserOk = true;
      }
  
      //移调数(C大调转到D大调为2)
      var trans = 0;
  
      var nodedata = "";
  
      var riseOrDown = "rise";
  
      //谱子宽度（默认为手机的500，如果是电脑，改为800）
      var staffwidth = 500;
      var mobilPageWidth = 501;
      var computerPageWidth = 1500;
      //缩放比例默认为1，如果是电脑，1.5
      var staffscale = 1;
      //
      var staffData;
  
      var abcPlayWay = "1"; // 播放abc的方式 0： 钢琴播放 1：系统播放
  
      //是否在点击谱子空白处时显示光标
      var showNotePosition = true;
  
      var notes_pattern =
        /(\[[\^\_\=A-Ya-y\/1-9,']*\])|(\^){0,1}(\_){0,1}(\=){0,1}[^\[\s\]]{1}[\,\'\/|1-9]*/g;
      window.onerror = function (
        errorMessage,
        scriptURI,
        lineNumber,
        columnNumber,
        errorObj
      ) {
        console.log("全局捕获了");
      };
    </script>

    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta charset="utf-8" />
    <!-- 让部分国产浏览器默认采用高速模式渲染页面，兼容模式（即 IE 内核）和高速模式（即 webkit 内核） -->
    <meta name="renderer" content="webkit" />
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <link rel="icon" type="image/svg" href="assets/music_score_editor/images/logo.svg">

    <link rel="stylesheet" href="assets/music_score_editor/css/bootstrap.min.css" />
    <link rel="stylesheet" href="assets/music_score_editor/css/element-ui.css">
    <link rel="stylesheet" href="assets/music_score_editor/css/editor.css?v=1.0.12" />

    <link rel="stylesheet" href="assets/music_score_editor/css/global_content.css?v=1.0.12" />

    <link rel="stylesheet" type="text/css" href="assets/music_score_editor/keyboard/css/piano_keyboard.css?v=1.0.12" />

    <link href="assets/music_score_editor/css/tailwindcss.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="assets/music_score_editor/css/icons/icons.css">
    <link rel="stylesheet" href="assets/music_score_editor/css/icons/k.css">

    <link rel="stylesheet" type="text/css" href="assets/music_score_editor/sweetalert/sweetalert.css?v=1.0.12" />
    <link href="assets/music_score_editor/css/edit-1.css?v=1.0.12" rel="stylesheet" type="text/css" />

    <script src="assets/music_score_editor/js/jquery.min.js"></script>
    <link rel="stylesheet" href="assets/music_score_editor/menu/jquery.contextMenu.css" />
    <script src="assets/music_score_editor/menu/jquery.contextMenu.js"></script>
    <script src="assets/music_score_editor/menu/jquery.ui.position.js"></script>
    <script src="assets/music_score_editor/js/xml2abc.js"></script>
    <script src="assets/music_score_editor/js/drag.js?v=1.0.12"></script>
    <script src="assets/music_score_editor/js/main.js?v=1.0.12"></script>
    <script src="assets/music_score_editor/js/xml2abcutil.js?v=1.0.12"></script>
    <script src="assets/music_score_editor/js/FileSaver.min.js"></script>

    <!-- 字体css -->
    <link rel="stylesheet" href="assets/music_score_editor/css/font/font.css?v=1.0.12"/>

    <style type="text/css">
      .drag-note-img, [type="slur"][recttype="movedragger"] {
        pointer-events: none;
      }
      [_disabled]:not([_disabled="false"]) {
        pointer-events: none;
        opacity: 0.5;
      }
      .blue-title {
        position: relative;
        padding-left: 10px;
        font-weight: bold;
        font-size: 18px;
        color: #000;
      }
      .addBar-box:hover .addBar {
        pointer-events: auto;
        opacity: 1;
      }
      .addBar-box .addBar:hover, .addBar-box .addBar:focus {
        pointer-events: auto;
        opacity: 1;
      }
      .num-key {
        background: #B5C5D3;
        min-width: 36px;
        min-height: 36px;
        box-shadow: 1px 1px 2px 0px rgba(14,62,107,0.48);
        border-radius: 12px 2px 2px 2px;
      }
      .is-select-key {
        background-color: #0E518F;
        box-shadow: inset 1px 1px 4px 0px #1A232C;
      }
      ._tool-box {
        width: 50px; height: 44px;
        margin-top: 3px;
        margin-bottom: 3px;
        display: flex; justify-content: center; align-items: center;
        border-radius: 2px;
        transition: color 0.3s;
        cursor: pointer;
      }
      ._tool-box:hover, ._tool-box.active {
        background: #E7EFFF;
      }
      ._tips {
        position: relative;
        z-index: 21;
      }
      ._tips::before {
        content: '';
        position: absolute;
        z-index: 2;
        top: 100%;
        left: 30%;
        transform: translate(11px, calc(-100% + 10px));
        border-width: 5px;
        border-style: solid;
        border-color: transparent transparent #fff transparent;
        border-top-width: 7px;
        border-bottom-width: 7px;
        opacity: 0;
        pointer-events: none;
        transition: all 0.3s;
        width: 0; height: 0;
      }
      ._tips::after {
        content: var(--tips);
        position: absolute;
        z-index: 2;
        top: calc(100% + 10px);
        left: 30%;
        color: #747474;
        font-size: 14px;
        padding: 8px;
        border-radius: 4px;
        background-color: #fff;
        opacity: 0;
        pointer-events: none;
        box-shadow: 4px 4px 2px 0px rgba(0,22,41,0.25);
        white-space: nowrap;
        transition: all 0.3s;
      }
      ._tips._right::after {
        left: -100%;
        transform: translateX(-40%);
      }
      ._tips._right::before {
        left: 0;
        transform: translate(11px, calc(-100% + 10px));
      }
      ._tips:hover::after, ._tips:hover::before {
        opacity: 1;
      }
      .form-control:focus {
        border-color: #25649E !important;
      }
      .blue-title::after {
        content: '';
        position: absolute;
        left: 0; top: 50%;
        transform: translateY(-50%);
        width: 3px; height: 15px;
        border-radius: 120px;
        background: #0E518F;
      }
      ._border{
        border: 1px solid #D4D4D4;
      }
      ._border.active {
        border: 1px solid #25649E;
      }
      ._btn {
        cursor: pointer;
        padding: 5px 30px;
        border-radius: 6px;
        background-color: #25649E;
        color: #fff;
        transition: all 0.3s;
      }
      ._btn:hover {
        filter: brightness(0.85);
      }
      ._btn:active {
        filter: brightness(0.75);
      }
      ._btn._border {
        border-radius: 6px 6px 6px 6px;
        background-color: #fff;
        border: 1px solid #6C6C6C;
        color: #6C6C6C;
      }
      [_radio] {
        width: 13px; height: 13px;
        border-radius: 50%;
        border: 1px solid #A5A5A5;
        background-color: #fff;
        transition: all 0.3s;
      }
      [_radio][_checked]:not([_checked=false]) {
        border: 2px solid rgba(37, 100, 158, 1);
      }
      [_disabled] {
        filter: grayscale(1);
        pointer-events: none;
        opacity: 0.5;
      }
      ._hide {
        opacity: 0;
        pointer-events: none;
        transition: all 0.3s;
      }
      ._show {
        pointer-events: auto;
        opacity: 1;
      }

      .m-select {
        position: 'absolute';
        padding: 1px;
        background-color: #fff;
        box-shadow: 4px 4px 24px 0px rgba(0,22,41,0.14);
        color: #242424;
      }
      .m-select > div {
        padding: 9px 26px;
        text-align: center;
        transition: all 0.3s;
      }
      .m-select > div:hover {
        background-color: #B2C7D9;
      }

      .beatNote-item:hover {
        background: #B2C7D9;
      }

      * {
        user-select: none;
      }
      html,
      body {
        height: 100%;
        overflow: hidden;
      }

      .modal-dialog {
        max-width: 100%;
      }

      img {
        display: inline-block;
      }

      .modal-dialog {
        margin: 0 auto !important;
      }

      .center-modal .modal-content {
        left: 15%;
      }

      .sweet-alert {
        max-height: 80%;
        overflow: auto;
      }
      .body-left-content {
        top: 0;
      }
      .drag-note-img {
        position: fixed;
        transform: translate(-50%, -50%);
        z-index: 100;
      }
      .editor-div {
        border-style: solid;
        border-width: 1px;
        border-color: #000;
        padding-left: 5px;
        padding-right: 5px;
      }

      .pgt {
        margin-left: 2px;
        margin-right: -6px;
      }
      ul.ztree {
        width: 250px;
        overflow-y: auto;
        overflow-x: auto;
        margin-top: 5px;
        margin-left: 2px;
      }
      .text-\#333 { color: #333 }
      .bg-\#333 { background-color: #333; }
      .text-\#666 { color: #666; }
      .text-\#535353 { color: #535353; }
      .bg-\#666 { background-color: #666; }
      .text-\#999 { color: #999; }
      .bg-\#999 { background-color: #999 }
      .text-ea { color: #eaeaea }
      .bg-ea { background-color: #eaeaea }
      input[type=range] {
          -webkit-appearance: none;
          width: 68px;
          border-radius: 8px; /*这个属性设置使填充进度条时的图形为圆角*/
      }
      input[type=range]::-webkit-slider-thumb {
          -webkit-appearance: none;
      }
      input[type=range]::-webkit-slider-runnable-track {
          width: 68px;
          height: 2px;
          border-radius: 8px; /*将轨道设为圆角的*/
      }
      input[type=range]:focus {
          outline: none;
      }
      input[type=range]::-webkit-slider-thumb {
          -webkit-appearance: none;
          height: 10px;
          width: 2px;
          margin-top: -4px; /*使滑块超出轨道部分的偏移量相等*/
          background: #ffffff; 
          border-radius: 8px; /*外观设置为圆形*/
      }
      .deep-blue {
        color: #25649E;
      }
      .deep-blue-line { position: relative; }
      .deep-blue-line::after {
        content: '';
        position: absolute;
        width: 100%; height: 4px;
        bottom: 0; left: 0;
        transition: all 300ms;
      }
      .deep-blue-line.show::after {
        background-color: #25649E;
      }
      .bg-deep-blue {
        background-color: #25649E;
      }
      .sky-blue { color: #E7EFFF; }
      .hover\:sky-blue-bg:hover { background-color: #E7EFFF; }
      .bg-sky-blue { background-color: #E7EFFF; }
      .\#f5f5f6 { color: #f5f5f6; }
      .bg-\#f5f5f6 { background-color: #f5f5f6; }
      .bg-\#dededf { background-color: #dededf; }
      .key-sign-up > .bg-deep-blue { transform: translateX(-89px); }
      .key-sign-down > .bg-deep-blue { transform: translateX(38px); }
      .key-sign-up > div:nth-child(1) { color: #333 }
      .key-sign-down > div:nth-child(2) { color: #333 }
      .select-key-sign { background-color: #F4F4F4; }
      /* .select-key-sign:hover { background-color: #D9D9D9; } */
      .select-key-sign.is-select { background-color: #B5C5D3; } 
      img { -webkit-user-drag: none; }
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
        background-color: transparent;
      }
      ::-webkit-scrollbar-thumb {
        border: 1px solid #fff;
        border-radius: 120px;
        background-color: #777;
      }
      ::-webkit-scrollbar-corner {
        opacity: 0;
      }
      .dropdown-toggle::after {
        position: absolute;
        z-index: 3;
        right: 8px;
      }
      .theme-blue-bg {
        background-color: #B5C5D3;
      }

      /* loading */
      .loading_con .logo_icon{
        width: 110px;
        margin-bottom: 15px;
      }
      .loadingSeven{
        width: 180px;
        height: 40px;
        margin: 0 auto;
        margin-top: 5px;
      }
      .progress {
        width: 100%;
        height: 15px;
        position: relative;
        background-color: #ddd;
        border-radius: 5px;
        overflow: hidden;
        font-size: 10px;
        line-height: 1.2;
      }
      .progress-bar {
        background-color: #FF5E2A;
        width: 0%;
        height: 15px;
        line-height: 10px;
        position: absolute;
        text-align: center;
        color: white;
        transition: all 0.2s;
      }
      .progress-text{
        position: absolute;
        right: 5px;
      }

      .at_move_box{
        position: absolute;
      }
    </style>
    <title>乐谱创作系统</title>
  </head>
  <body>
    <div id="loadingSeven" class="w-screen h-screen fixed items-center flex flex-col justify-center duration-300 filter loading_con" style="z-index: 9999999; background: #f5f5f6;">
      <!-- <img class="logo_icon" src="assets/music_score_editor/images/logo.svg"> -->
      <div class="logo_icon">
        <svg id="e0411faf-f6a2-4e8a-a3dd-bbb3b09bbafb" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 65.99 88.6"><defs><linearGradient id="a58c49a3-4331-44f5-920d-2ccc4c1e1589" x1="37.89" y1="90.11" x2="55.39" y2="27.54" gradientTransform="matrix(1, 0, 0, -1, 0, 98)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#e7476b"/><stop offset="0.2" stop-color="#ec5a61"/><stop offset="0.51" stop-color="#f6804e"/><stop offset="1" stop-color="#faad39"/></linearGradient><linearGradient id="a152af29-b719-43bf-b6ae-5acce9f42522" x1="33.5" y1="77.04" x2="46.27" y2="31.37" gradientTransform="matrix(1, 0, 0, -1, 0, 98)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#f05e51"/><stop offset="0.4" stop-color="#ea5a3d"/><stop offset="0.51" stop-color="#e95a38"/><stop offset="1" stop-color="#d3502e"/></linearGradient><linearGradient id="b310a91d-556a-4329-87fd-1f68bb6506f8" x1="59.57" y1="68.99" x2="70.68" y2="29.26" gradientTransform="matrix(1, 0, 0, -1, 0, 98)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#f6834d"/><stop offset="0.51" stop-color="#f87646"/><stop offset="1" stop-color="#ce3c13"/></linearGradient><linearGradient id="a54c7741-9bc6-4e64-a07c-4a320c6cb7c5" x1="45.26" y1="93.96" x2="55.37" y2="57.8" gradientTransform="matrix(1, 0, 0, -1, 0, 98)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#f05e51"/><stop offset="0.4" stop-color="#ea5a3d"/><stop offset="0.51" stop-color="#e95a38"/><stop offset="1" stop-color="#f99c41"/></linearGradient><linearGradient id="a62b7e81-c2c5-4afc-a46b-f44df3aacd8e" x1="38.68" y1="42.47" x2="43.95" y2="23.61" xlink:href="#a58c49a3-4331-44f5-920d-2ccc4c1e1589"/></defs><path d="M34.94,77.44C31.62,80.76,24,90.77,24,90.77s-7.08-.91-8.68-5.25c0,0-1.6-4.79,2.51-7.3,3.39-2.07,7.54-5.07,8.91-6.06a24.12,24.12,0,0,0,8.21,5.29Z" transform="translate(-15.01 -3.7)" style="fill:#933f3f"/><path d="M45.1,81.73S45.55,89,43.27,92c0,0-4.29.68-5.91,0,0,0-3.45-.46-3.91-3.42,0,0,1.79-2,4.81-9.45a30.18,30.18,0,0,0,7.17,1.1Z" transform="translate(-15.01 -3.7)" style="fill:#933f3f"/><path d="M72.36,87.08s-5.71,1.83-6.85-1.37c0,0-1.26-4.47-3.48-5.55,0,0-1.28-1.07-2.41-2.21a58.76,58.76,0,0,0,10-3.72l6.66,7.14S77.84,85.71,72.36,87.08Z" transform="translate(-15.01 -3.7)" style="fill:#933f3f"/><path d="M37.65,3.7s4.91,10-8.73,22.58S9.26,61.92,35.34,74.79c0,0-5.82-11.38,6.22-26.56,0,0-.4,18.81,19.25,27.72,0,0,37.71-21.12,10-52.8,0,0,1.37,8.6-10.15,16.68,0,0,6-23.56-23-36.12Z" transform="translate(-15.01 -3.7)" style="fill:url(#a58c49a3-4331-44f5-920d-2ccc4c1e1589)"/><path d="M35.34,74.79s-5.21-11.88,6.22-26.56S47,14.08,47,14.08s1.6,12.54-7.62,21.45c-4.06,3.92-18.85,16.5-4,39.27Z" transform="translate(-15.01 -3.7)" style="fill:url(#a152af29-b719-43bf-b6ae-5acce9f42522)"/><path d="M70.84,23.15s1.57,9.1-10.15,16.68S57.4,73.15,60.81,76c0,0-5.82-10.39,7.42-29.86,0,0,9.63-10.56,2.61-22.93Z" transform="translate(-15.01 -3.7)" style="fill:url(#b310a91d-556a-4329-87fd-1f68bb6506f8)"/><path d="M37.65,3.7s33.56,14,17,40.73C54.59,44.43,64.83,21.37,37.65,3.7Z" transform="translate(-15.01 -3.7)" style="fill:url(#a54c7741-9bc6-4e64-a07c-4a320c6cb7c5)"/><path d="M40.25,53.8s-5.47,7.42-2.58,18.54c0,0,1,4,6.76,4,.32,0,9.34-1.85,1-9.4a17.56,17.56,0,0,1-5.22-13.12Z" transform="translate(-15.01 -3.7)" style="fill:url(#a62b7e81-c2c5-4afc-a46b-f44df3aacd8e)"/></svg>
      </div>
      <div class="loadingSeven">
        <div id="progress" class="progress">
          <div id="progress-bar" class="progress-bar" style="width: 0%;"></div>
          <div id="progress-text" class="progress-text"></div>
        </div>
      </div>
      <div class="pr-2 mt-2 text-xl">加载中…</div>
      <div class="pr-2 mt-2 text-xl" style="display: none;"><span id="loadNum">0</span>%</div>
      <script>
        (() => {
          var pageLoaded = false;
          $(function(){
            pageLoaded = true;
          });
          const loadNumEl = document.querySelector('#loadNum')
          var progress_bar = document.querySelector('#progress-bar')
          let num = 90
          const loadTimer = setInterval(() => {
            if (num < 100) {
              num += +(100 - num) / 2
              loadNumEl.innerText = num.toFixed(2)
              progress_bar.style.width = num.toFixed(2) + '%';
              if (num.toFixed(2) >= 100) {
                clearInterval(loadTimer);
                var ct = setInterval(() => {
                  if(pageLoaded){
                    clearInterval(ct);
                    $('#loadingSeven').fadeOut(200, () => {
                      // $('#loadingSeven').remove()
                    })
                  }
                },100);
              }
            }
          }, 1)
        })()
      </script>
    </div>

    <input
      type="text"
      id="tmpText"
      style="position: absolute; display: none; z-index: 2"
    />
    <input
      type="text"
      id="tmpComposerText"
      style="position: absolute; display: none; z-index: 2"
    />
    <iframe
      id="target_iframe"
      name="target_iframe"
      style="display: none; width: 0px; height: 0px"
    ></iframe>
    <iframe
      id="mic_iframe"
      style="display: none; width: 0px; height: 0px"
    ></iframe>
    <!-- <div id="content" :class="{'content-style-2': headerInBottom}" :style="!headerInBottom && keyboardShow && 'padding-bottom: 200px;'" v-cloak> -->
    <div
      id="content"
      v-cloak
      style="min-height: 100vh; width: 100vw; overflow: hidden;"
      @click="() => {
      if (!m.menuIndex) m.menuIndex = -1
      m.addBar = { show: false, before: 1, after: 1 }
      m.timbre.show = m.foldLine.toolShow = false
      m.editor.type = ''
    }"
    >
      <div
        :class="m.newScore.musicType.show ? '_show' : '_hide'"
        class="fixed top-0 left-0 duration-300 h-screen w-screen flex items-center justify-center"
        style="z-index: 9998;"
      >
        <div
          class="bg-white rounded-xl overflow-hidden at_move_box"
          style="box-shadow: 4px 4px 30px 0px rgba(3,35,63,0.28);"
        >
          <b class="flex justify-between items-center text-xl at_move_box_title" style="padding: 10px 20px; background-color: #F5F5F5;">
            <div>新建乐谱</div>
            <img src="assets/music_score_editor/img/close.png" class="cursor-pointer" @click="m.newScore.musicType.show = false"/>
          </b>
  
          <div class="" style="background: #fff; padding: 50px 80px 40px 70px;">
            <div class="mb-12" style="color: #575757;">请选择模板文件：</div>
            <div class="flex justify-between space-x-12">
              <div v-for="(item, i) in m.newScore.musicType.list" :key="i" class="flex flex-col items-center">
                <div
                  class="duration-300 cursor-pointer flex"
                  @click="m.newScore.scoreOpts.musicType = item.val"
                  :style="`width: 128px; height: 161px; border-radius: 17px 6px 6px 6px; border: 2px solid ${ item.val === m.newScore.scoreOpts.musicType ? '#25649E' : '#B6B6B6' }; background: #fff`"
                >
                  <img :src="item.img" class="m-auto" style="width: 97px; height: 143px;" />
                </div>
                <div
                  class="mt-6 rounded-md text-center py-1 text-#666 bg-ea cursor-pointer duration-300"
                  :class="{ 'bg-deep-blue text-white': m.newScore.scoreOpts.musicType === item.val }"
                  style="width: 110px;"
                  @click="m.newScore.scoreOpts.musicType = item.val"
                >
                  {{ item.title }}
                </div>
              </div>
            </div>

            <div class="flex justify-end mt-10">
              <div
                class="_btn ml-auto"
                @click="createMusicNextEvent()"
              >
                下一步
              </div>
            </div>
          </div>
        </div>
      </div>

      <div
        class="fixed flex top-0 left-0 duration-300 transform-gpu h-screen w-screen items-center justify-center"
        style="z-index: 9998;"
        :class="{ 'opacity-0 pointer-events-none' : !m.saveToScore.isShow }"
      >
        <div class="rounded-md" style="box-shadow: 4px 4px 30px 0px rgba(3,35,63,0.28);">
          <b class="flex justify-between items-center text-xl bg-#f5f5f6 rounded-t-md" style="padding: 10px 20px">
            <div><img class="mr-2" src="assets/music_score_editor/css/icons/cloud.png"/>保存到谱例库</div>
            <img src="assets/music_score_editor/img/close.png" class="cursor-pointer" @click="m.saveToScore.isShow = false"/>
          </b>

          <div class="rounded-b-md" style="width: 792px; padding: 40px 30px 15px 30px; background-color: #fff;">
            <div class="flex items-center">
              <div class="flex-shrink-0">名称</div>
              <div class="ml-3 flex-1 relative">
                <input
                  v-model.trim="m.saveToScore.title"
                  class="form-control"
                  @focus="m.saveToScore.isFoucs = true"
                  @blur="m.saveToScore.isFoucs = false"
                  @input="changeSaveToList"
                />
                <div
                  v-if="m.saveToScore.repeatList.length && m.saveToScore.isFoucs"
                  style="transform: translateY(8px); position: relative; z-index: 99; max-height: 250px; overflow-y: auto; position: absolute; top: 100%; width: 100%; left: 0; background: #fff; box-shadow: 4px 4px 30px 0px rgba(3,35,63,0.28); color:#0E518F;font-size: 12px;"
                >
                  <div v-for="item in m.saveToScore.repeatList" style="padding: 4px 8px; max-height: 400px; overflow-y: auto;">{{ item }}</div>
                </div>
              </div>
            </div>

            <div class="flex items-center" style="margin-top: 28px;">
              <div class="flex-shrink-0">查看权限</div>
              <div class="ml-3 flex-1 relative">
                <div style="margin-top: 10px;">
                  <el-radio-group v-model="m.saveToScore.is_public">
                    <el-radio-button :label="0" :value="0">私有谱例</el-radio-button>
                    <el-radio-button :label="1" :value="1">公开谱例</el-radio-button>
                  </el-radio-group>
                </div>
                
              </div>
            </div>

            <div class="mt-20 flex justify-center">
              <div class="_btn _border" @click="m.saveToScore.isShow = false">取消</div>
              <i style="width: 182px;"></i>
              <div
                class="_btn"
                :_disabled="!m.saveToScore.title || m.saveToScore.repeatList.includes(m.saveToScore.title) || m.saveToScore.isLoading"
                @click="saveScore(true)">
                  保存
                </div>
            </div>
          </div>
        </div>
      </div>
    
    <div
      class="fixed flex top-0 left-0 duration-300 transform-gpu h-screen w-screen items-center justify-center"
      style="z-index: 9998;"
      :class="{ 'opacity-0 pointer-events-none' : !m.myScore.isShow }"
    >
      <div class="rounded-md overflow-hidden" style="min-width: 820px; box-shadow: 4px 4px 30px 0px rgba(3,35,63,0.28);">
        <b class="flex justify-between items-center text-xl bg-#f5f5f6" style="padding: 10px 20px">
          <div>打开谱例</div>
          <img src="assets/music_score_editor/img/close.png" class="cursor-pointer" @click="() => {
            m.myScore.isShow = false
            m.myScore.query.fu_music_type = ''
            m.myScore.query.fu_name = ''
            m.myScore.query.page = 1
            m.myScore.query.page_size = 12
            m.myScore.index = -1
          }"/>
        </b>

        <div style="padding: 37px 0 23px 0; background: #fff;">
          <div style="margin: 0 27px 40px 27px;">
            <div class="relative">
              <input v-model="m.myScore.query.fu_name" class="form-control pr-24" @keydown.enter="updateMyScoreList"/>
              <div class="absolute right-3 h-full items-center flex top-0 cursor-pointer" @click="updateMyScoreList">
                <img src="assets/music_score_editor/img/search.png"/>
                <div class="text-sm" style="color: #0E518F;">搜索</div>
              </div>
            </div>
            <div class="flex mt-2.5">
              <div
                v-for="[txt, val] in [['全部', ''], ['简谱', 'easy'], ['高音谱表', 'treble'], ['低音谱表', 'bass'], ['大谱表', 'big'], ['合唱四声部', 'four']]"
                class="space-x-1 cursor-pointer flex items-center mr-6"
                @click="(m.myScore.query.fu_music_type = val) | updateMyScoreList()"
              >
                <img :src="val === m.myScore.query.fu_music_type ? 'assets/music_score_editor/img/checkbox2.png' : 'assets/music_score_editor/img/checkbox1.png'"/>
                <div :style="`color: ${val === m.myScore.query.fu_music_type ? '#0E518F' : '#787878'}`">{{ txt }}</div>
              </div>
            </div>
          </div>

          <div
            v-if="!!!m.myScore.list.length"
            class="flex justify-center items-center text-3xl text-gray-400"
            style="height: 390px"
          >
            {{ m.myScore.isLoading ? '加载中…' : '暂无谱例' }}
          </div>
          <div v-else class="grid grid-cols-6 gap-y-8 gap-x-8 overflow-y-auto" style="padding: 0 27px; height: 390px;">
            <div v-for="(item, i) in m.myScore.list" key="item" style="width: 102px;" @click="m.myScore.index = i">
              <div
                class="duration-300 cursor-pointer flex"
                :style="`padding: 8px 10px; width: 102px; height: 129px; border-radius: 17px 6px 6px 6px; border: 2px solid ${m.myScore.index === i ? '#25649E' : '#B6B6B6'}; background: #fff`"
              >
                <img
                  :src="`assets/music_score_editor/img/${{ easy: 'jianpu', bass: 'di_yin', big: 'da_pu_biao', four: 'he_chang', treble: 'gao_yin' }[item.music_type]}.png`"
                  class="m-auto w-full h-full object-contain"
                />
              </div>
              <div
                class="_btn mt-3 text-center w-full"
                :class="{'text-#666 bg-ea' : m.myScore.index !== i}"
                style="padding-left: 5px; padding-right: 5px;overflow: hidden;text-overflow:ellipsis;white-space: nowrap;"
                :title="item.name"
              >
                {{ item.name }}
              </div>
            </div>
          </div>

          <div class="mt-8 flex justify-end items-center space-x-3 pr-7">
            <div
              class="_btn"
              :_disabled="m.myScore.query.page <= 1 || m.myScore.isLoading"
              @click="(m.myScore.query.page -= 1) | updateMyScoreList()"
            >
              上一页
            </div>
            <div>
              {{ m.myScore.query.page }} / {{ m.myScore.totalPage }}
            </div>
            <div
              class="_btn"
              :_disabled="m.myScore.query.page >= m.myScore.totalPage || m.myScore.isLoading"
              @click="(m.myScore.query.page += 1) | updateMyScoreList()"
            >
              下一页
            </div>
            <div
              class="_btn text-center"
              style="width: 110px;"
              :_disabled="m.myScore.index === -1"
              @click="openMyNewScore"
            >
              确认
            </div>
          </div>
        </div>
      </div>
    </div>

    <div
      class="fixed flex top-0 left-0 duration-300 transform-gpu h-screen w-screen items-center justify-center"
      style="z-index: 9998; margin-top: 5px;"
      :class="{ 'opacity-0 pointer-events-none' : !m.newScore.scoreOptsShow }"
    >
      <div class="rounded-md overflow-hidden at_move_box" style="box-shadow: 4px 4px 30px 0px rgba(3,35,63,0.28);">
        <b class="flex justify-between items-center text-xl bg-#f5f5f6 at_move_box_title" style="padding: 10px 20px">
          <div>新建乐谱</div>
          <img src="assets/music_score_editor/img/close.png" class="cursor-pointer" @click="m.newScore.scoreOptsShow = m.newScore.musicType.show = false"/>
        </b>

        <div class="flex relative" style="height: 857px; background: #B5C5D3;">
          <div style="width: 712px;padding: 20px;">
            <iframe
              ref="previewIframeRef"
              :src="m.newScore.previewUrl"
              class="w-full h-full rounded-md border-none"
            ></iframe>
          </div>

          <div class="bg-white overflow-y-auto" >  <!-- overflow-y-auto -->
            <div class="rounded" style="padding: 15px 17px; border-bottom: 2px solid #F5F5F5;">
              <div class="blue-title" style="margin-bottom: 10px;">基本信息</div>
              <div class="relative" style="margin-bottom: 16px;">
                <div class="input-group">
                  <input v-model="m.newScore.scoreOpts.title" class="form-control" placeholder="标题"/>
                </div>
              </div>

              <div class="input-group" style="margin-bottom: 16px;">
                <input v-model="m.newScore.scoreOpts.subTitle" class="form-control" placeholder="副标题"/>
              </div>

              <div class="flex space-x-4">
                <input v-model="m.newScore.scoreOpts.compose" class="form-control" placeholder="曲作者"/>
                <input v-model="m.newScore.scoreOpts.lyricist" class="form-control" placeholder="词作者"/>
              </div>
            </div>

            <div class="relative rounded flex-shrink-0" style="width: 491px; padding: 10px 21px 10px 21px; border-bottom: 2px solid #F5F5F5;">
              <div class="flex items-center">
                <div class="blue-title">调号</div>
                <div v-if="m.newScore.scoreOpts.musicType !== 'easy'" class="ml-auto flex justify-center space-x-12 text-#999 relative pb-1" :class="`key-sign-${m.newScore.keySignType}`">
                  <div class="cursor-pointer" @click="m.newScore.keySignType = 'up'">升记号大调</div>
                  <div class="cursor-pointer" @click="m.newScore.keySignType = 'down'">降记号大调</div>
                  <div class="absolute bg-deep-blue w-24 h-1 rounded-full bottom-0 duration-300"></div>
                </div>
              </div>
              <div v-if="m.newScore.scoreOpts.musicType === 'easy'" class="flex items-center" style="margin-top: 16px;">
                <div>简谱：</div>
                <div style="margin: 0 13px 0 6px">1=</div>
                <select-input v-model="m.newScore.scoreOpts.keySign" :list="m.newScore.keySignEasyList" style="z-index: 51;"></select-input>
              </div>
              <div v-else class="mt-4 w-full overflow-hidden">
                <div
                  class="flex duration-300"
                  :style="{
                    width: '200%',
                    transform: `translateX(-${m.newScore.keySignType === 'up' ? 0 : 50}%)`,
                  }"
                >
                  <div class="w-1/2 grid grid-cols-4 gap-1">
                    <div
                      v-for="item in m.newScore.keySignUpList"
                      :key="item.title"
                      class="flex justify-center items-center pt-2"
                    >
                      <div
                        class="select-key-sign w-24 h-24 px-2 rounded-md overflow-hidden cursor-pointer justify-center items-center flex flex-col duration-300"
                        :class="{ 'is-select': m.newScore.scoreOpts.keySign === item.val }"
                        @click="m.newScore.scoreOpts.keySign = item.val"
                      >
                        <img :src="item.img" />
                        <div class="flex items-center">
                          <div :style="m.newScore.scoreOpts.keySign === item.val ? 'color: #001F3B' : ''">{{ item.title }}</div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="w-1/2 grid grid-cols-4 gap-1 items-center">
                    <div
                      v-for="item in m.newScore.keySignDownList"
                      :key="item.title"
                      class="flex justify-center items-center  pt-2"
                    >
                      <div
                        class="select-key-sign w-24 h-24 px-2 rounded-md overflow-hidden cursor-pointer justify-center items-center flex flex-col duration-300"
                        :class="{ 'is-select': m.newScore.scoreOpts.keySign === item.val }"
                        @click="m.newScore.scoreOpts.keySign = item.val"
                      >
                        <img :src="item.img" />
                        <div class="flex items-center">
                          <div :style="m.newScore.scoreOpts.keySign === item.val ? 'color: #001F3B' : ''">{{ item.title }}</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="relative rounded" style="padding: 10px 18px 0 18px; border-bottom: 2px solid #F5F5F5;">
              <div class="blue-title">拍号</div>
              <div class="flex items-center" style="margin: 16px 0">
                <img
                  :src="`assets/music_score_editor/img/radio${m.newScore.scoreOpts.beatType === 'custom' ? '1' : '2'}.png`"
                  class="cursor-pointer"
                  @click="m.newScore.scoreOpts.beatType = 'custom'"
                />
  
                <div class="flex h-full items-center duration-300" :class="{ 'pointer-events-none opacity-50': m.newScore.scoreOpts.beatType !== 'custom' }">
                  <select-input
                    v-model="m.newScore.scoreOpts.beatNote1"
                    :list="m.newScore.beatNoteList"
                    style="width: 64px; margin-left: 10px;"
                  ></select-input>
                  <div class="mx-1.5">/</div>
                  <select-input
                    v-model="m.newScore.scoreOpts.beatNote2"
                    :list="m.newScore.beatNoteList2"
                    style="width: 64px;"
                  ></select-input> 
                </div>
                
                <img
                  :src="`assets/music_score_editor/img/radio${m.newScore.scoreOpts.beatType === 'C' ? '1' : '2'}.png`"
                  class="cursor-pointer ml-auto"
                  @click="m.newScore.scoreOpts.beatType = 'C'"
                />
                <img style="margin-left: 13px" src="assets/music_score_editor/img/beatSign-C.png" />
                <img
                  :src="`assets/music_score_editor/img/radio${m.newScore.scoreOpts.beatType === 'C|' ? '1' : '2'}.png`"
                  class="cursor-pointer"
                  style="margin-right: 13px; margin-left: 44px;"
                  @click="m.newScore.scoreOpts.beatType = 'C|'"
                />
                <img style="margin-right: 66px" src="assets/music_score_editor/img/beatSign-CI.png" />
              </div>
            </div>

            <div class="relative rounded items-center" style="padding: 10px 18px; border-bottom: 2px solid #F5F5F5;">
              <div class="flex items-center" style="color: #8F8F8F; font-size: 12px">
                <div class="blue-title">排版</div>
                <img src="assets/music_score_editor/img/warning.png" style="margin: 0 2px 0 7px;" />
                您也可以在创建乐谱后再添加或移除小节。
              </div>
              <div class="flex items-center" style="margin-top: 20px;">
                <div>行数：</div>
                <number-input
                  v-model="m.newScore.scoreOpts.rows"
                  style="width: 64px; height: 28px;">
                </number-input>
                <div class="ml-auto">小节：</div>
                <number-input
                  v-model="m.newScore.scoreOpts.rowBars"
                  style="width: 64px; height: 28px; margin-right: 6px;">
                </number-input>
                <div style="margin-right: 75px;">/ 行</div>
              </div>
            </div>

            <div class="relative rounded" style="padding: 10px 18px; border-bottom: 2px solid #F5F5F5;">
              <div class="flex">
                <div class="flex cursor-pointer" @click="m.newScore.scoreOpts.isWeak = !m.newScore.scoreOpts.isWeak">
                  <div class="blue-title">
                    不完全小节（弱起小节）
                    <img :src="`assets/music_score_editor/img/checkbox${m.newScore.scoreOpts.isWeak ? '2' : '1'}.png`">
                  </div>
                </div>
              </div>
              <div class="items-center flex duration-300 mt-4" :class="{ 'pointer-events-none opacity-50': !m.newScore.scoreOpts.isWeak }">
                <select-input v-model="m.newScore.scoreOpts.weakBarBot" :list="m.newScore.beatNoteList3" style="width: 118px; height: 28px; z-index: 52;"></select-input>
                <div class="mx-1.5">/</div>
                <number-input v-model="m.newScore.scoreOpts.weakBarTop" :min="1" style="width: 64px; height: 28px;"></number-input>
                <div style="margin-left: 3px;">个</div>
              </div>
            </div>

            <div class="relative rounded" style="padding: 10px 18px; border-bottom: 2px solid #F5F5F5;">
              <div class="flex">
                <div class="flex cursor-pointer" @click="m.newScore.scoreOpts.isWeakEnd = !m.newScore.scoreOpts.isWeakEnd">
                  <div class="blue-title">
                    不完全结尾小节
                    <img :src="`assets/music_score_editor/img/checkbox${m.newScore.scoreOpts.isWeakEnd ? '2' : '1'}.png`">
                  </div>
                </div>
              </div>
              <div class="items-center flex duration-300 mt-4" :class="{ 'pointer-events-none opacity-50': !m.newScore.scoreOpts.isWeakEnd }">
                <select-input v-model="m.newScore.scoreOpts.weakEndBot" :list="m.newScore.beatNoteList3" style="width: 118px; height: 28px; z-index: 52;"></select-input>
                <div class="mx-1.5">/</div>
                <number-input v-model="m.newScore.scoreOpts.weakEndTop" :min="1" style="width: 64px; height: 28px;"></number-input>
                <div style="margin-left: 3px;">个</div>
              </div>
            </div>

            <div class="relative rounded" style="padding: 10px 18px;">
              <div class="blue-title" style="margin-bottom: 16px;">速度</div>
              <div class="flex items-center ">
                <div class="flex items-center h-full cursor-pointer mb-2" @click="setSpeedType('none')">
                  <img
                    :src="`assets/music_score_editor/img/radio${m.newScore.scoreOpts.speedType === 'none' ? '1' : '2'}.png`"
                    class="cursor-pointer mr-2"
                  />
                  <div>无速度</div>
                </div>
              </div>
              <div class="flex items-center ">
                <div class="flex items-center h-full cursor-pointer" @click="setSpeedType('txt')">
                  <img class="cursor-pointer mr-2" :src="`assets/music_score_editor/img/checkbox${(m.newScore.scoreOpts.speedType=='txt' || m.newScore.scoreOpts.speedType=='txt_n_sign') ? '2' : '1'}.png`">

                  <!-- <img
                    :src="`assets/music_score_editor/img/radio${m.newScore.scoreOpts.speedType === 'txt' ? '1' : '2'}.png`"
                    class="cursor-pointer mr-2"
                  /> -->
                  <div>速度文本：</div>
                </div>
                <select-input
                  v-model="m.newScore.scoreOpts.speedText"
                  :list="speedTxtOptsList"
                  style="height: 28px;"
                  :class="{ 'opacity-50 pointer-events-none': !(m.newScore.scoreOpts.speedType === 'txt' || m.newScore.scoreOpts.speedType=='txt_n_sign') }">
                </select-input>
              </div>
              <div class="flex items-center" style="margin-top: 10px;">
                <div class="flex items-center h-full cursor-pointer" @click="setSpeedType('sign')">
                  <img class="cursor-pointer mr-2" :src="`assets/music_score_editor/img/checkbox${(m.newScore.scoreOpts.speedType=='sign' || m.newScore.scoreOpts.speedType=='txt_n_sign') ? '2' : '1'}.png`">

                  <!-- <img
                    :src="`assets/music_score_editor/img/radio${m.newScore.scoreOpts.speedType === 'sign' ? '1' : '2'}.png`"
                    class="cursor-pointer mr-2"
                    :class="{ 'opacity-50 pointer-events-none': m.newScore.scoreOpts.speedType !== 'sign' }"
                  /> -->
                  <div>节拍器标记：</div>
                </div>
                <div class="flex h-full items-center" :class="{ 'opacity-50 pointer-events-none': !(m.newScore.scoreOpts.speedType === 'sign' || m.newScore.scoreOpts.speedType=='txt_n_sign') }">
                  <select-input v-model="m.newScore.scoreOpts.speedNote" :list="m.newScore.speedNoteList" style="height: 28px;"></select-input>
                  <div style="margin: 0 10px;">=</div>
                  <number-input v-model="m.newScore.scoreOpts.speedNum" :min="1" style="width: 64px; height: 28px;"></number-input>
                </div>
              </div>
            </div>

            <div class="relative rounded" style="padding: 10px 18px;">
              <div class="blue-title" style="margin-bottom: 16px;">术语</div>
              <div class="flex items-center ">
                <div class="flex items-center h-full cursor-pointer mb-2" @click="setFaceType('none')">
                  <img
                    :src="`assets/music_score_editor/img/radio${m.newScore.scoreOpts.faceType === 'none' ? '1' : '2'}.png`"
                    class="cursor-pointer mr-2"
                  />
                  <div>无术语</div>
                </div>
              </div>
              <div class="flex items-center ">
                <div class="flex items-center h-full cursor-pointer" @click="setFaceType('txt')">
                  <img
                    :src="`assets/music_score_editor/img/radio${m.newScore.scoreOpts.faceType === 'txt' ? '1' : '2'}.png`"
                    class="cursor-pointer mr-2"
                  />
                  <div>常用术语：</div>
                </div>
                <select-input
                  v-model="m.newScore.scoreOpts.faceText"
                  :list="(m.newScore.scoreOpts.musicType!=='easy'?staffEmoTxtList:easyEmoTxtList)"
                  style="height: 28px;"
                  :width="'165px'"
                  :class="{ 'opacity-50 pointer-events-none': m.newScore.scoreOpts.faceType !== 'txt' }">
                </select-input>
              </div>
              <div class="flex items-center" style="margin-top: 10px;">
                <div class="flex items-center h-full cursor-pointer" @click="setFaceType('sign')">
                  <img
                    :src="`assets/music_score_editor/img/radio${m.newScore.scoreOpts.faceType === 'sign' ? '1' : '2'}.png`"
                    class="cursor-pointer mr-2"
                    :class="{ 'opacity-50 pointer-events-none': m.newScore.scoreOpts.faceType !== 'sign' }"
                  />
                  <div>其他术语：</div>
                </div>
                <div class="flex h-full items-center" :class="{ 'opacity-50 pointer-events-none': m.newScore.scoreOpts.faceType !== 'sign' }">
                  <el-input v-if="m.newScore.scoreOpts.faceType === 'sign'" v-model="m.newScore.scoreOpts.faceText" placeholder="" size="mini"></el-input>
                  <el-input v-else placeholder="" size="mini"></el-input>
                </div>
              </div>
            </div>
          </div>

          <div class="flex absolute bottom-0 bg-white z-40" style="right: 10px; width: 481px; padding: 20px 17px 20px 17px;">
            <div class="_btn _border" @click="m.newScore.scoreOptsShow = m.newScore.musicType.show = false">取消</div>
            <div class="_btn ml-auto mr-2 " @click="m.newScore.scoreOptsShow = false">上一步</div>
            <div class="_btn" @click="createNewScore">创建</div>
          </div>
        </div>
      </div>
    </div>


      <div
        class="fixed flex top-0 left-0 duration-300 transform-gpu h-screen w-screen items-center justify-center"
        style="z-index: 9997;"
        :class="{ 'opacity-0 pointer-events-none' : !m.foldLine.show }"
      >
        <div class="rounded-md bg-white overflow-hidden" style="width: 359px; height: 209px; box-shadow: 0px 4px 30px 0px rgba(3,35,63,0.28);">
          <div class="flex justify-between font-bold items-center" style="font-size: 20px; padding: 13px 20px 11px 20px; background: #F5F5F5">
            折行自定义
            <img src="assets/music_score_editor/img/close.png" class="cursor-pointer" @click="() => {
              m.foldLine.show = false
              m.foldLine.previewV = m.foldLine.line
            }"/>
          </div>

          <div class="mt-10 flex items-center justify-center" style="color: #606060;">
            <div>每行</div>
            <number-input v-model="m.foldLine.previewV" class="mx-4" min="1" max="8" style="width: 76px; height: 24px;"></number-input>
            <div>小节</div>
          </div>

          <div class="mt-7 flex justify-center">
            <div class="_btn _border" @click="() => {
              m.foldLine.show = false
              m.foldLine.previewV = m.foldLine.line
            }">取消</div>
            <div class="w-14"></div>
            <div class="_btn" @click="() => {
              m.foldLine.show = false
              m.foldLine.line = m.foldLine.previewV
            }">确定</div>
          </div>
        </div>
      </div>

      <div
        class="fixed flex top-0 left-0 duration-300 transform-gpu h-screen w-screen items-center justify-center"
        style="z-index: 9997;"
        :class="{ 'opacity-0 pointer-events-none' : !m.key.show }"
      >
        <div class="rounded-md bg-white" style="box-shadow: 0px 4px 30px 0px rgba(3,35,63,0.28);">
          <div class="flex justify-between items-center rounded-t-md font-bold" style="font-size: 20px; padding: 13px 20px 11px 20px; background: #F5F5F5">
            按音调移调
            <img src="assets/music_score_editor/img/close.png" class="cursor-pointer" @click="() => {
              m.key.previewV = m.key.val
              m.key.show = false
            }"/>
          </div>

          <select-input v-model="m.key.previewV" size="sm" :list="m.key.list" class="mx-20 mt-10 t_key_box" style="width: 300px; height: 40px;"></select-input>

          <div class="mt-7 mb-8 flex justify-center">
            <div
              class="_btn _border"
              @click="() => {
                m.key.previewV = m.key.val
                m.key.show = false
              }"
            >
              取消
            </div>
            <div class="w-14"></div>
            <div
              class="_btn"
              @click="() => {
                m.key.val = m.key.previewV
                m.key.show = false
              }"
            >
              确定
            </div>
          </div>
        </div>
      </div>

      <div
        class="fixed flex top-0 left-0 duration-300 transform-gpu h-screen w-screen items-center justify-center"
        style="z-index: 9997;"
        :class="{ 'opacity-0 pointer-events-none' : !m.export.show }"
      >
        <div class="rounded-md bg-white" style="box-shadow: 0px 4px 30px 0px rgba(3,35,63,0.28);">
          <div class="flex justify-between items-center rounded-t-md font-bold" style="font-size: 20px; padding: 13px 20px 11px 20px; background: #F5F5F5">
            导出
            <img src="assets/music_score_editor/img/close.png" class="cursor-pointer" @click="m.export.show = false"/>
          </div>

          <div style="margin: 20px 30px 30px 35px; color: #606060">
            <div style="font-size: 18px;">请选择文件格式</div>
            <div class="pl-3 grid grid-cols-3 mt-6 gap-y-8" style="width: 340px;">
              <div
                v-for="item in m.export.list"
                :key="item.txt"
                class="flex items-center space-x-1 cursor-pointer"
                :class="{ 'opacity-50 pointer-events-none': item.disabled }"
                @click="item.checked = !item.checked"
              >
                <img :src="`assets/music_score_editor/img/checkbox${item.checked ? '2' : '1'}.png`" />
                <div>{{ item.txt }}</div>
              </div>
            </div>
          </div>


          <div class="mt-7 mb-8 flex justify-center">
            <div
              class="_btn"
              :class="{
                'opacity-50 pointer-events-none': m.export.list.every(item => !item.checked)
              }"
              @click="exportScore"
            >
              一键导出
            </div>
          </div>
        </div>
      </div>     

    <div
      :class="m.shortcutsPanel.index !== -1 ? '_show' : '_hide'"
      class="fixed top-0 left-0 duration-300 h-screen w-screen flex items-center justify-center"
      style="z-index: 9998;"
    >
      <div
        class="rounded-xl overflow-hidden"
        style="background: #F5F5F5; box-shadow: 4px 4px 30px 0px rgba(3,35,63,0.28);"
      >
        <b class="flex justify-between items-center text-xl py-3 px-5">
          <div>快捷键</div>
          <img src="assets/music_score_editor/img/close.png" class="cursor-pointer" @click="m.shortcutsPanel.index = -1"/>
        </b>

        <div class="flex bg-white" style="height: 503px; padding: 22px 30px 22px 30px; width: 876px; color: #535353;">
          <div class="h-full rounded p-0.5 mr-2 text-#535353" style="border: 2px solid #E7E7E7;">
            <div
              v-for="(item, i) in m.shortcutsPanel.typeList.map(item => item.title)"
              :key="i"
              class="cursor-pointer duration-300 px-3 py-2 mb-2"
              :class="{ 'bg-deep-blue text-white': m.shortcutsPanel.index === i }"
              style="width: 145px;"
              @click="m.shortcutsPanel.index = i"
            >
              {{ item }}
            </div>
          </div>
          <!-- <div style="padding: 20px 25px 12px 25px; border: 2px solid #E7E7E7;"></div> -->
          <div class="flex h-full flex-1 rounded" style=" border: 2px solid #E7E7E7;">

            <div class=" flex-1" style="border-right: 2px solid #E7E7E7;">

              <div style="padding: 20px 25px 12px 25px;" >
                <div
                  v-for="item in m.shortcutsPanel.typeList[m.shortcutsPanel.index]?.leftList"
                  :key="item.title"
                  class="mb-3"
                >
                  <div class="flex">
                    <div>{{ item.title }}</div>
                    <div class="flex ml-auto space-x-2 items-center">
                      <div
                        v-for="item in item.shortList"
                        class="rounded"
                        :style="item !== '/' ? 'background: #F2F2F2; color: #767676; font-size: 14px; padding: 5px 8px;' : ''"
                      >
                        {{ item }}
                      </div>
                    </div>
                  </div>
                </div>
              </div>

            </div>

            <div class="flex-1">
              <div style="padding: 20px 25px 12px 25px;">
                <div
                  v-for="item in m.shortcutsPanel.typeList[m.shortcutsPanel.index]?.rightList"
                  :key="item.title"
                  class="mb-3"
                >
                  <div class="flex">
                    <div>{{ item.title }}</div>
                    <div class="flex ml-auto space-x-2 items-center">
                      <div
                        v-for="item2 in item.shortList"
                        class="rounded"
                        :style="item2 !== '/' || item.shortList.length === 1 ? 'background: #F2F2F2; color: #767676; font-size: 14px; padding: 5px 8px;' : ''"
                      >
                        {{ item2 }}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

          </div>
          
        </div>
      </div>
    </div>

      <!-- 导出pdf -->
      <div
        class="mo l fade opacity-0 pointer-events-none"
        id="PDF_div"
        tabindex="-1"
        role="dialog"
        aria-labelledby="PDF_div"
        aria-hidden="true"
      >
        <div class="modal-dialog" role="document">
          <div class="modal-content" style="width: 95%; height: 800px">
            <div class="modal-header">
              <h5 class="modal-title" id="PDF_divLabel">导出选项</h5>
              <button
                type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close"
              >
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <div>
                上边距：<input
                  id="pdftopmargin"
                  style="width: 60px"
                  value="2.54"
                  onblur="setMargin()"
                />cm <br />下边距：<input
                  id="pdfbotmargin"
                  style="width: 60px"
                  value="2.54"
                  onblur="setMargin()"
                />cm
                <div style="position: absolute; left: 180px; top: 5px">
                  <iframe
                    id="pdfPreview"
                    src="assets/music_score_editor/pdf_preview.html?v=1.0.12"
                    style="width: 1200px; height: 600px"
                  ></iframe>
                </div>
                <br />
                左边距：<input
                  id="pdfleftmargin"
                  style="width: 60px; margin-top: 10px"
                  value="1.18"
                  onblur="setMargin()"
                />cm <br />右边距：<input
                  id="pdfrightmargin"
                  style="width: 60px"
                  value="3.18"
                  onblur="setMargin()"
                />cm<br />
                页&nbsp;&nbsp;&nbsp;&nbsp;眉：<input
                  id="pdfheader"
                  style="width: 57px; margin-top: 10px"
                  onblur="addPdfHeadFoot(this.value,'')"
                /><br />
                页&nbsp;&nbsp;&nbsp;&nbsp;脚：<input
                  id="pdffooter"
                  style="width: 57px; margin-top: 10px"
                  onblur="addPdfHeadFoot('',this.value)"
                /><br />
                行间距：<input
                  type="number"
                  step="1"
                  min="1"
                  max="200"
                  style="width: 57px; margin-top: 10px"
                  value="46"
                  onchange="changePdfStaffSep(this.value)"
                /><br />
                清析度：<select
                  id="pdfrate"
                  style="margin-top: 10px"
                  onchange="changePdfRate(this.value)"
                >
                  <option value="2.0">标清</option>
                  <option value="2.5">高清</option>
                  <option value="3.0">超清</option>
                </select>
                <br />
                缩放比：<input
                  id="pdfScale"
                  type="number"
                  step="0.1"
                  min="1.0"
                  max="3.0"
                  value="1.8"
                  style="margin-top: 10px; width: 55px"
                  onchange="changePdfScale(this.value)"
                />
              </div>
              <!-- 这里是内容 start -->
              <div
                id="voicelist"
                style="float: left; width: 200px; margin-left: 20px"
              >
                <div
                  v-for="(item, index) in voicePart.partList"
                  :id="'partLi' +index"
                  @click.stop="voicePart.partClick(item)"
                  :class="[item.selected ? 'active' : '', 'select-item click abc-change']"
                  style="cursor: pointer"
                >
                  <input
                    type="checkbox"
                    name="voiceitem"
                    :value="item.index"
                    @click.stop="voicePart.partClick(item);"
                    :checked="item.selected"
                  />{{item.name}}
                </div>
              </div>
            </div>
            <!-- 这里是内容 end -->
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-primary"
                data-dismiss="modal"
                onclick="exportAbc2Pdf('source')"
              >
                确定
              </button>
            </div>
          </div>
        </div>
      </div>
      <!-- 导出图片预览 -->
      <div
        class="modal fade"
        id="IMG_div"
        tabindex="-1"
        role="dialog"
        aria-labelledby="IMG_div"
        aria-hidden="true"
      >
        <div class="modal-dialog" role="document">
          <div class="modal-content" style="width: 95%; height: 800px">
            <div class="modal-header">
              <h5 class="modal-title" id="IMG_divLabel">导出选项</h5>
              <button
                type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close"
              >
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <div>
                上边距：<input
                  id="imgtopmargin"
                  style="width: 60px"
                  value="2.54"
                  onblur="setImgMargin()"
                />cm <br />下边距：<input
                  id="imgbotmargin"
                  style="width: 60px"
                  value="2.54"
                  onblur="setImgMargin()"
                />cm
                <div style="position: absolute; left: 180px; top: 5px">
                  <iframe
                    id="imgPreviewIframe"
                    src="assets/music_score_editor/img_preview.html?v=1.0.12"
                    style="width: 1200px; height: 600px"
                  ></iframe>
                </div>
                <br />
                左边距：<input
                  id="imgleftmargin"
                  style="width: 60px; margin-top: 10px"
                  value="3.18"
                  onblur="setImgMargin()"
                />cm <br />右边距：<input
                  id="imgrightmargin"
                  style="width: 60px"
                  value="3.18"
                  onblur="setImgMargin()"
                />cm<br />
                清析度：<select
                  id="imgrate"
                  style="margin-top: 10px"
                  onchange="changeImgRate(this.value)"
                >
                  <option value="2.0">标清</option>
                  <option value="2.5">高清</option>
                  <option value="3.0">超清</option>
                </select>
                <br />
                缩放比：<input
                  id="imgScale"
                  type="number"
                  step="0.1"
                  min="1.0"
                  max="3.0"
                  value="1.4"
                  style="margin-top: 10px; width: 55px"
                  onchange="changeImgScale(this.value)"
                />
              </div>
              <!-- 这里是内容 start -->
              <div
                id="voicelist"
                style="float: left; width: 200px; margin-left: 20px"
              >
                <div
                  v-for="(item, index) in voicePart.partList"
                  :id="'partLi' +index"
                  @click.stop="voicePart.partClick(item)"
                  :class="[item.selected ? 'active' : '', 'select-item click abc-change']"
                  style="cursor: pointer"
                >
                  <input
                    type="checkbox"
                    name="voiceitem"
                    :value="item.index"
                    @click.stop="voicePart.partClick(item);"
                    :checked="item.selected"
                  />{{item.name}}
                </div>
              </div>
            </div>
            <!-- 这里是内容 end -->
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-primary"
                data-dismiss="modal"
                onclick="exportAbc2Img()"
              >
                确定
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- 保存历史记录 -->
      <div
        class="modal fade"
        id="SERVER_HIS_div"
        tabindex="-1"
        role="dialog"
        aria-labelledby="SERVER_HIS_div"
        aria-hidden="true"
      >
        <div class="modal-dialog" role="document">
          <div class="modal-content" style="width: 400px; height: 250px">
            <div class="modal-header">
              <h5 class="modal-title" id="SERVER_HIS_divLabel">存到历史记录</h5>
              <button
                type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close"
              >
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <div>
                备注：<input id="hisbackup" style="width: 360px" value="" />
              </div>
            </div>
            <!-- 这里是内容 end -->
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-primary"
                data-dismiss="modal"
                onclick="saveServerHistory()"
              >
                确定
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- 分声部导出 -->
      <div
        class="modal fade"
        id="VOICEPART_div"
        tabindex="-1"
        role="dialog"
        aria-labelledby="VOICEPART_div"
        aria-hidden="true"
      >
        <div class="modal-dialog" role="document">
          <div class="modal-content" style="width: 400px; height: 350px">
            <div class="modal-header">
              <h5 class="modal-title" id="VOICEPART_divLabel">分声部导出</h5>
              <button
                type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close"
              >
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <!-- 这里是内容 start -->
              <div
                id="voicelist"
                style="float: left; width: 200px; margin-left: 20px"
              >
                <div
                  v-for="(item, index) in voicePart.partList"
                  :id="'partLi' +index"
                  @click.stop="voicePart.partClick(item)"
                  :class="[item.selected ? 'active' : '', 'select-item click abc-change']"
                  style="cursor: pointer"
                >
                  <input
                    type="checkbox"
                    name="voiceitem"
                    :value="item.index"
                    @click.stop="voicePart.partClick(item);"
                    :checked="item.selected"
                  />{{item.name}}
                </div>
              </div>
              <div style="float: left">
                <input
                  type="checkbox"
                  name="standstaff"
                /><span
                  style="cursor: pointer"
                  onclick="$('input[name=standstaff]').prop('checked',!$('input[name=standstaff]').prop('checked'))"
                  >五线谱（图片）</span
                ><br />
                <input
                  type="checkbox"
                  name="simpletaff"
                /><span
                  style="cursor: pointer"
                  onclick="$('input[name=simpletaff]').prop('checked',!$('input[name=simpletaff]').prop('checked'))"
                  >简谱（图片）</span
                ><br />
                <input type="checkbox" name="mixtaff" checked="checked" /><span
                  style="cursor: pointer"
                  onclick="$('input[name=mixtaff]').prop('checked',!$('input[name=mixtaff]').prop('checked'))"
                  >简线混排（图片）</span
                ><br />
                <input
                  v-if="!isExe"
                  type="checkbox"
                  name="mp3"
                  checked="checked"
                /><span
                  style="cursor: pointer"
                  onclick="$('input[name=mp3]').prop('checked',!$('input[name=mp3]').prop('checked'))"
                  >mp3</span
                ><br />
                <input
                  v-if="!isExe"
                  type="checkbox"
                  name="midi"
                  checked="checked"
                /><span
                  style="cursor: pointer"
                  onclick="$('input[name=midi]').prop('checked',!$('input[name=midi]').prop('checked'))"
                  >midi</span
                ><br />
              </div>
            </div>
            <!-- 这里是内容 end -->
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-primary"
                data-dismiss="modal"
                onclick="exportVoice()"
              >
                确定
              </button>
            </div>
          </div>
        </div>
      </div>
      <!-- 一键导出所有声部 -->
      <div id="exportAllVoiceDiv" style="display: none">
        <form
          action=""
          name="exportAllVoiceForm"
          id="exportAllVoiceForm"
        ></form>
      </div>

      <!-- 音量设置 -->
      <div
        class="modal fade"
        id="VOL_SETTING_div"
        tabindex="-1"
        role="dialog"
        aria-labelledby="VOL_SETTING_div"
        aria-hidden="true"
      >
        <div class="modal-dialog" role="document">
          <div class="modal-content" style="width: 400px; height: 350px">
            <div class="modal-header">
              <h5 class="modal-title" id="VOL_SETTING_divLabel">音量设置</h5>
              <button
                type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close"
              >
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <!-- 这里是内容 start -->
              <div
                id="voicevollist"
                style="float: left; width: 300px; margin-left: 20px"
              >
                <div
                  v-for="(item, index) in voicePart.partList"
                  v-if="index<voicePart.partList.length-1"
                  :id="'voicepart' +index"
                  :class="[item.selected ? 'active' : '', 'select-item click abc-change']"
                >
                  {{item.name}}：&nbsp;
                  <input
                    type="range"
                    name="voicevol"
                    style="width: 180px; float: right"
                    v-bind:index="index"
                    min="0"
                    max="10"
                    value="10"
                    onchange="setVoiceVol(this,this.value / 10)"
                  />
                  <span
                    name="voicevolspan"
                    v-bind:index="index"
                    style="float: right; margin-right: 15px"
                    >1</span
                  >
                </div>
              </div>
            </div>
            <!-- 这里是内容 end -->
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-primary"
                data-dismiss="modal"
                onclick=""
              >
                确定
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- 分声部do位置设置 -->
      <div
        class="modal fade"
        id="DO_CHN_div"
        tabindex="-1"
        role="dialog"
        aria-labelledby="DO_CHN_div"
        aria-hidden="true"
      >
        <div class="modal-dialog" role="document">
          <div class="modal-content" style="width: 400px; height: 350px">
            <div class="modal-header">
              <h5 class="modal-title" id="DO_CHN_divLabel">do位置设置</h5>
              <button
                type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close"
              >
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <!-- 这里是内容 start -->
              <div style="float: left; width: 450px; margin-left: 20px">
                <select
                  id="voice_v"
                  class="form-control"
                  style="width: 120px; float: left"
                >
                  <option
                    v-for="(item, index) in voicePart.partList"
                    v-if="index<voicePart.partList.length-1"
                    v-bind:value="index"
                  >
                    {{item.name}}
                  </option>
                </select>
                <br /><br />
                <select
                  id="voice_key"
                  class="form-control"
                  style="width: 80px; float: left"
                >
                  <option value="C">C</option>
                  <option value="G">G</option>
                  <option value="D">D</option>
                  <option value="A">A</option>
                  <option value="E">E</option>
                  <option value="B">B</option>
                  <option value="F#">#F</option>
                  <option value="C#">#C</option>
                  <option value="F">F</option>
                  <option value="Bb">bB</option>
                  <option value="Eb">bE</option>
                  <option value="Ab">bA</option>
                  <option value="Db">bD</option>
                  <option value="Gb">bG</option>
                  <option value="Cb">bC</option>
                </select>
                <div style="float: left; margin-top: 8px; margin-left: 10px">
                  简谱do所在区域:
                  <input
                    type="radio"
                    style="width:20px;margin-right：1px;"
                    name="voiceDoPos"
                    value="lower"
                    onclick="changeVoiceDo(this.value)"
                  />小字组
                  <input
                    style="width:20px;margin-right：1px;"
                    type="radio"
                    name="voiceDoPos"
                    value="higher"
                    onclick="changeVoiceDo(this.value)"
                  />小字一组
                </div>
              </div>
            </div>
            <!-- 这里是内容 end -->
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-primary"
                data-dismiss="modal"
                onclick=""
              >
                确定
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="fixed flex items-center space-x-1 z-40 justify-between bottom-2 right-2 rounded-full p-2" style="background: #B0B0B0;">
        <img src="assets/music_score_editor/img/scale-small.png" class="cursor-pointer" @click="() => {
          m.panzoom.scale -= 1
        }"/>
        <input v-model="m.panzoom.scale" step="1" min="50" max="150" type="range" class="w-16" @change="m.panzoom.scale = $event.target.value"/>
        <img src="assets/music_score_editor/img/scale-big.png" class="cursor-pointer" @click="() => {
          m.panzoom.scale += 1
        }"/>
      </div>

      <div
        v-show="m.numberKeypad.isMove"
        class="fixed top-0 left-0 w-screen h-screen z-50 cursor-move"
        @mousemove.stop="e => {
          if (!m.numberKeypad.isMove) return
          const { x: sx, y: sy } = m.numberKeypad.moveStart
          m.numberKeypad.position = {
            x: e.pageX - sx,
            y: e.pageY - sy
          }
        }"
        @mouseup="m.numberKeypad.isMove = false"
      >
      </div>

      <input
        v-if="m.editor.type && !['lyric', 'lyric2'].includes(m.editor.type)"
        id="editor"
        v-model.trim="m.editor.val"
        class="form-control fixed z-50"
        style="min-width: 100px"
        :style="m.editor.style"
        @keydown.esc.stop="() => {
          m.editor.isEsc = true
          m.editor.type = ''
        }"
        @keydown.enter.stop="m.editor.type = ''"
        @blur="m.editor.type = ''"
        @click.stop
      >
      </input>
      <textarea
        id="editor"
        v-else-if="['lyric', 'lyric2'].includes(m.editor.type)"
        v-model="m.editor.val"
        class="form-control fixed z-50 overflow-y-hidden"
        :style="m.editor.style"
        @keydown.esc.stop="() => {
          m.editor.isEsc = true
          m.editor.type = ''
        }"
        @click.stop
        @keydown.tab.stop="() => {
          m.editor.type = ''
          $nextTick(() => {
            const noteList = [...$(`rect[ondblclick][type='rest'],rect[ondblclick][type='note'],rect[ondblclick][type='splnum_note'],rect[ondblclick][type='splnum_rest']`)]
            const index = noteList.findIndex(el => el.getAttribute('istart') === m.editor.noteIstart)
            if (noteList < 0) return
            const nextIstart = noteList[index + 1]?.getAttribute('istart')
            if (!nextIstart) return
            $('.selected_text').removeClass('selected_text')
            const note = [...$(`text[istart=${nextIstart}]`)].find(el => {
              el = $(el)
              console.log(el.attr('type'))
              return ['r1', 'r2', 'r4', 'r8', 'r16', 'r32', 'r64', 'hd', 'note'].includes(el.attr('type'))
            })
            const istart = $(note).attr('istart')
            m.editor.noteIstart = istart
            const s = syms[istart]

            let top
            if (content_vue.m.scoreOpts.musicType === 'easy') {
              top = $(note).offset().top
            } else {
              const line = s.my_line
              top = $($(`g[type='staff']`)[line]).offset().top
            }
            top += 50 * content_vue.m.panzoom.scale / 100
            top += 'px'
            let { left } = $(note).offset()
            left +='px'
            m.editor.style = {
              top,
              left,
              width: '100px',
              height: '40px',
              minHeight: '40px'
            }
            m.editor.lyricIndex = istart
            $nextTick(() => {
              $('#editor').focus()
            })
            const val = s.a_ly?.map(item => item.t).join('\n') || ''
            m.editor.val = val
            m.editor.type = 'lyric'
          })
        }"
        @keydown.ctrl.enter.stop="m.editor.type = ''"
        @blur="m.editor.type = ''"
        @input="() => {
          if (m.editor.type !== 'lyric') return
          const lines = m.editor.val.split('\n')
          m.editor.style.height = lines.length * 23 + 20 + 'px'
        }"
      >
      </textarea>
      
      <div
        v-show="m.numberKeypad.isShow"
        class="fixed z-30 bottom-12 right-24"
        :style="getNumberKeypadPosStyle"
        style="background-color: #F5F5F5; box-shadow: 4px 4px 30px 0px rgba(3,35,63,0.28); border-radius: 10px 10px 10px 10px;">
        <div
          class="relative flex items-center justify-between px-3.5 py-2 text-xl cursor-pointer"
          @mousedown.stop="(e) => {
            m.numberKeypad.isMove = true
            m.numberKeypad.moveStart = {
              x: e.pageX - m.numberKeypad.position.x,
              y: e.pageY - m.numberKeypad.position.y
            }
          }"
        >
          <div style="font-size: 20px; font-weight: 500;">小键盘</div>
          <img src="assets/music_score_editor/img/close.png" class="cursor-pointer" @click.stop="m.numberKeypad.isShow = false" @mousedown.stop/>
        </div>

        <div class="p-2 bg-white grid grid-cols-4 gap-2 text-base">
          <div
            v-for="(item, idx) in m.numberKeypad[{ 'easy': 'easyList' }[scoreOpts.musicType] || 'staffList'][m.numberKeypad.page]"
            class="p-1.5 num-key cursor-pointer duration-300 flex justify-center items-center"
            style="min-width: 42px; min-height: 42px;"
            :class="[
              { 'row-span-2': [7, 14].includes(idx) },
              { 'col-span-2': idx === 15 },
              { 'is-select-key': item.isSelect }
            ]"
            :key="idx"
            @click.stop="() => {
              $(item.selector)?.click()
              item.fn && item.fn()
              m.isInsertMode = draw_editor
              changeNumKeypadSelect()
            }"
            :title="item.title"
          >
            <div v-if="item.className" class="m-auto" :class="[item.className + (item.isSelect ? '-active' : '')]"></div>
            <img v-else-if="item.url" :src="item.url" draggable="false" class="object-contain w-7 h-7"/>
          </div>
        </div>
      </div>


      <input type="file" id="input-file" class="hidden" @change="inputFile"/>

      <div
        class="flex fixed left-0 items-center space-x-2 w-full border-t border-b bg-#f5f5f6"
        style="top: 32px; border-color: #DEDEDF;z-index: 99;"
      >
        <div class="_tool-box ml-3.5 _tips" style="--tips: '保存（Ctrl+S）'" @click="saveScore()">
          <div class="i-save"></div>
        </div>

        <div
          v-if="m.scoreOpts.musicType !== 'easy'"
          class="_tool-box _tips"
          :class="{ 'active': m.isInsertMode }"
          style="--tips: '箭头 / 输入（N）'"
          @click="switchPrachEditor"
        >
          <div class="i-insert"></div>
        </div>

        <div
          class="_tool-box _tips"
          style="--tips: '撤销（Ctrl+Z）'"
          @click="() => {
            if($('body').attr('class')=='editor-div'){
              return;
            }
              setTimeout(function(){
              goback();
            },100)
          }"
        >
          <div class="i-withdraw"></div>
        </div>

        <div class="forward _tool-box _tips" style="--tips: '恢复（Ctrl+Y）'">
          <div class="i-recover"></div>
        </div>

        <!-- 分割线，和元素高度一致为50px -->
        <hr style="width:1px;height:50px;background-color:rgb(222, 222, 223)">

        <div class="h-full bg-#dededf w-0.5"></div>

        <!-- <template v-if="true">
          <div class="_tool-box _tips" style="--tips: '符干向上（U）' " @click="checkIsSelectNote() && setNoteStemDirect('up')">
            <div class="i-note-down"></div>
          </div>
          
          <div class="_tool-box _tips" style="--tips: '符干向下（I）'" @click="checkIsSelectNote() && setNoteStemDirect('down')">
            <div class="i-note-up"></div>
          </div>
        </template> -->

        <div
          class="relative _tool-box _tips"
          :class="{ 'active': m.addBar.show }"
          style="--tips: '添加小节'"
          @click.stop="checkIsSelectBar() && (m.addBar.show = true)"
        >

          <div class="i-addBar"></div>
          <div
            v-if="m.addBar.show"
            class="absolute top-12 left-3.5 bg-white  z-50 box-border rounded-sm"
            style="box-shadow: 0px 4px 30px 0px rgba(3,35,63,0.28); right: -3px; padding: 8px 10px; font-size: 12px; width: 216px;"
            @click.stop
          >
            <div class="flex items-center">
              <div>小节前</div>
              <div class="mx-2">插入</div>
              <number-input v-model="m.addBar.before" :min="1" style="width: 64px; height: 20px;"></number-input>
              <div class="mx-2">小节</div>
              <img src="assets/music_score_editor/img/gou.png" class="ml-auto cursor-pointer" @click="insertNodes(m.addBar.before) | (m.addBar.show = false)">
            </div>

            <div class="mt-2 flex items-center">
              <div>小节后</div>
              <div class="ml-2">插入</div>
              <number-input v-model="m.addBar.after" :min="1" class="ml-2" style="width: 64px;height: 20px;"></number-input>
              <div class="mx-2">小节</div>
              <img src="assets/music_score_editor/img/gou.png" class="ml-auto cursor-pointer" @click="insertNodes(m.addBar.after, true) | (m.addBar.show = false)">
            </div>
          </div>
        </div>

        <div
          class="_tool-box items-center _tips text-xs cursor-pointer"
          style="--tips: '删除小节（Ctrl+Backspace）'"
          @click="checkIsSelectBar() && delSelectedNode()"
        >
          <div class="i-delBar"></div>
        </div>

        <div class="h-full bg-#dededf w-0.5"></div>

        <!-- 分割线，和元素高度一致为50px -->
        <hr style="width:1px;height:50px;background-color:rgb(222, 222, 223)">

        <template v-if="getMenuTxt === '文本'">
          <div
            class="_tool-box _tips text-xl"
            style="--tips: '歌词（L）'"
            @click.stop="checkIsSelectNote() && createLyricEditor()"
          >
            <div class="i-l"></div>
          </div>

          <!-- 分割线，和元素高度一致为50px -->
          <hr style="width:1px;height:50px;background-color:rgb(222, 222, 223)">


          <select-font-input v-model="m.lyric.style.fontFamily" :list="m.lyric.fontFamilyList" style="width: 94px; height: 26px; font-size: 12px;background-color:#fff"></select-font-input>
          <select-input v-model="m.lyric.style.fontSize" :list="m.lyric.fontSizeList" style="width: 94px; height: 26px; font-size: 12px;background-color:#fff"></select-input>

          
          <!-- 分割线，和元素高度一致为50px -->
          <hr style="width:1px;height:50px;background-color:rgb(222, 222, 223)">

          <div
            class="_tool-box relative"
            :style="{ color: m.lyric.style.color }"
            @click="$refs.lyricColorRef.click()"
          >
            <div class="i-color relative">
              <div class="absolute -bottom-1 h-0.5 w-full" :style="`background: ${m.lyric.style.color}`"></div>
            </div>
            <input v-model="m.lyric.style.color" ref="lyricColorRef" type="color" class="top-2 left-0 absolute opacity-0 pointer-events-none"/>
          </div>

          <div
            class="_tool-box"
            :class="{ 'active': m.lyric.style.fontWeight === 'bold' }"
            :style="{ 'box-shadow': m.lyric.style.fontWeight === 'bold' ? '' : 'none' }"
            @click="() => m.lyric.style.fontWeight = m.lyric.style.fontWeight === 'bold' ? 'normal' : 'bold'"
          >
            <div class="i-fontBold"></div>
          </div>
          <div
            class="_tool-box"
            :class="{ 'active': m.lyric.style.fontStyle !== 'normal' }"
            :style="{ 'box-shadow': m.lyric.style.fontStyle === 'normal' ? 'none' : '' }"
            @click="() => m.lyric.style.fontStyle = m.lyric.style.fontStyle === 'italic' ? 'normal' : 'italic'"
          >
            <div class="i-xie"></div>
          </div>
        </template>

        <div v-else-if="getMenuTxt === '视图'" class="h-full flex items-center space-x-9" style="color: #696969;">
          <div class="flex items-center space-x-2.5 ml-8 cursor-pointer" @click="() => {
            if (keyboardShow && m.numberKeypad.isShow && m.isMusicNoteShow) {
              keyboardShow = m.numberKeypad.isShow = m.isMusicNoteShow = false
            } else {
              keyboardShow = m.numberKeypad.isShow = m.isMusicNoteShow = true
            }
          }">
            <img :src="`assets/music_score_editor/img/checkbox${keyboardShow && m.numberKeypad.isShow && m.isMusicNoteShow ? '2' : '1'}.png`" />
            <div>全部{{ keyboardShow && m.numberKeypad.isShow && m.isMusicNoteShow ? '隐藏' : '显示' }}</div>
          </div>

          <div class="flex items-center space-x-2.5 cursor-pointer" @click="(menuActive = '') | keyboardClick()">
            <img :src="`assets/music_score_editor/img/checkbox${keyboardShow ? '2' : '1'}.png`" />
            <div>虚拟键盘</div>
          </div>
          
          <div class="flex items-center space-x-2.5 cursor-pointer" @click="m.numberKeypad.isShow = !m.numberKeypad.isShow">
            <img :src="`assets/music_score_editor/img/checkbox${m.numberKeypad.isShow ? '2' : '1'}.png`" />
            <div>小键盘</div>
          </div>

          <div class="flex items-center space-x-2.5 cursor-pointer" @click="m.isMusicNoteShow = !m.isMusicNoteShow">
            <img :src="`assets/music_score_editor/img/checkbox${m.isMusicNoteShow ? '2' : '1'}.png`" />
            <div>音符面板</div>
          </div>
        </div>

        <template v-else-if="getMenuTxt === '工具'">
          <div
            class="_tool-box _tips"
            style="--tips: '移调（Y）'"
            @click="m.key.show = true"
          >
            <div class="i-yi"></div>
          </div>

          <div
            id="timbre"
            class="_tool-box _tips relative"
            :class="{ 'active': m.timbre.show }"
            style="--tips: '音色（S）'"
            @click.stop="(m.timbre.show = true) | (m.foldLine.toolShow = false)"
          >
            <div class="i-gi"></div>
            <ul v-if="m.timbre.show" class="absolute top-10 left-2 z-40 bg-white p-0.5 rounded-sm overflow-y-auto text-xs" style="height: 500px; box-shadow: 4px 4px 24px 0px rgba(0,22,41,0.14);">
              <li
                v-for="(model, index) in instrumentList"
                @click.stop="instrumentChoose(model.code) | (m.timbre.show = false)"
                class="hover:sky-blue-bg duration-300 rounded-sm whitespace-nowrap block"
                style="padding: 4px 14px; min-width: 77px;"
              >
                {{model.name}}
              </li>
            </ul>
          </div>

          <div
            class="_tool-box relative"
            :class="{ 'active': m.foldLine.toolShow }"
            @click.stop="(m.foldLine.toolShow = true) | (m.timbre.show = false)"
          >
            <div class="i-br"></div>
            <div
              v-if="m.foldLine.toolShow"
              class="absolute top-12 left-1 bg-white  z-50 box-border rounded-sm"
              style="box-shadow: 0px 4px 30px 0px rgba(3,35,63,0.28); right: -3px; padding: 2px; font-size: 12px; width: 170px;"
              @click.stop
            >
              <div class="w-full rounded-sm hover:sky-blue-bg duration-300" style="padding: 4px 14px;" @click="() => {
                checkIsSelectBar() && addBr()
                m.foldLine.toolShow = false
              }">
                <div class="flex flex-row flex-nowrap justify-between">
                  <div>折行</div>
                  <div>Enter</div>
                </div>
              </div>
              <div class="rounded-sm hover:sky-blue-bg duration-300" style="padding: 4px 14px;" @click="(m.foldLine.show = true) | (m.foldLine.toolShow = false)">
                <div class="flex flex-row flex-nowrap justify-between">
                  <div>自定义折行</div>
                  <div>  Ctrl+Enter</div>
                </div>
              </div>
            </div>
          </div>
        </template>

        <div class="h-full bg-#dededf w-0.5 ml-auto"></div>

        <div
          id="metronomesetting"
          @click="switchMetro()"
          class="_tool-box _tips"
          style="--tips: '节拍器（J）'"
        >
          <div class="i-rhythm"></div>
        </div>

        <div id="player" class="flex-col relative _tool-box _tips _right text-transparent" style="--tips: '播放/暂停（空格键）'" @click="myplay">
          <div class="i-play flex-shrink-0 absolute"></div>
          <div id="playspan">播放</div>
        </div>
        <div id="player-2" class="_tool-box _tips _right" style="--tips: '回到开始处（Home）'" @click="() => {
          mystop()
          $('.selected_text').removeClass('selected_text')
          $('#player').removeClass('active')
        }">
          <div class="i-play-restar"></div>
        </div>
      </div>

      <div class="fixed top-0 left-0 w-full flex items-center text-#666 text-sm bg-#f5f5f6" style="z-index: 99;">
        <div
          v-for="(item, i) in m.menuList"
          :key="item.txt"
          class="cursor-pointer relative w-20 h-8 deep-blue-line flex items-center justify-center rounded duration-300"
          :class="{ 'text-#333 rounded bg-sky-blue show': m.menuIndex ===  i }"
          @click.stop="item.fn ? item.fn(i) : changeMenuIndex(i)"
        >
          {{ item.txt }}
          <div
            v-if="m.menuIndex ===  i && item.children"
            class="fixed top-8 left-0 w-24 bg-white"
            style="z-index: 100; box-shadow: 4px 4px 10px 0px rgba(0,22,41,0.25); border-radius: 2px 2px 2px 2px; font-size: 14px; padding: 1px;"
          >
            <div
              v-for="child in item.children"
              class="w-full flex cursor-pointer hover:sky-blue-bg duration-300"
              style="padding: 4px 0 4px 14px; min-width: 88px;border-radius: 2px 2px 2px 2px;"
              @click.stop="child.fn() | (m.menuIndex = -1)"
            >
              {{ child.txt }}
            </div>
          </div>
        </div>

        <div class="cursor-pointer ml-auto mr-8" @click="m.shortcutsPanel.index = 0">快捷键</div>
        <div class="mx-3 cursor-pointer"><a href="assets/music_score_editor/doc.pdf?v=1.0.12" target="_blank" style="text-decoration: none;color: inherit;">帮助</a></div>
      </div>
      
      <div
        :class="m.alertMsg ? '_show' : '_hide'"
        class="fixed top-0 left-0 duration-300 h-screen w-screen flex items-center justify-center"
        style="z-index: 9999999;"
      >
        <div
          class="rounded-xl overflow-hidden flex flex-col"
          style="background: #F5F5F5; box-shadow: 4px 4px 30px 0px rgba(3,35,63,0.28); width: 449px; min-height: 207px;"
        >
          <b class="flex justify-between items-center text-xl" style="background-color: #F5F5F5; padding: 12px 21px;">
            <div style="color: #C05E5E;">提示</div>
            <img src="assets/music_score_editor/img/close.png" class="cursor-pointer" @click="m.alertMsg = ''"/>
          </b>
          <div class="bg-white flex-1 items-center flex justify-center" style="color: #606060; font-size: 18px;">
            <div class="w-96 text-center">
              {{ m.alertMsg }}
            </div>
          </div>
        </div>
      </div>

      <!-- TODO ------------------------------顶部导航菜单------------------------------ -->
      <!-- <div class="music-header">
        <ul>
          <!== 顶级菜单  ==>
          <li
            v-for="( menu, m) in menuList"
            :class="[ menuActive == menu.menuCode ? 'active' : '']"
            :data-code="menu.menuCode"
            @click.stop="navClick( menu.menuCode)"
          >
            {{ menu.menuName }}
            <div
              class="menu-box"
              style="z-index: 9999"
              v-if="menu.subMenuList.length"
            >
              <!== 一级菜单  ==>
              <template v-if="menu.menuCode == 'view'"
                ><!== 复选和点击事件是同一个，无需加入到常用栏中 ==>
                <div
                  :class="['menu-li', subMenu.classCss, subMenu.checkbox && 'm-checkbox', subMenu.isChecked && 'checked']"
                  :id="subMenu.id"
                  v-for="(subMenu, n) in menu.subMenuList"
                  @click.stop="navItemClick( m, n)"
                >
                  <i></i><span>{{ subMenu.name }}</span>
                </div>
              </template>
              <template v-else
                ><!== 复选和点击事件存在不同的用处==>
                <div
                  :class="['menu-li', subMenu.classCss, subMenu.checkbox && 'm-checkbox', subMenu.isChecked && 'checked', (subMenu.subMenuList && subMenu.subMenuList.length) && 'expand']"
                  :id="subMenu.id"
                  v-for="(subMenu, n) in menu.subMenuList"
                >
                  <i @click.stop="navItemClick( m, n, menu.code)"></i
                  ><span>{{ subMenu.name }}</span>
                  <!== 二级菜单  ==>
                  <div
                    class="menu-sub-box scroll"
                    v-if="subMenu.subMenuList && subMenu.subMenuList.length"
                  >
                    <template v-if="subMenu.code == 'pytb'"
                      ><!== 谱音同步  ==>
                      <div
                        class="menu-li"
                        v-for="(item, i) in subMenu.subMenuList"
                        :class="['pytb-li', pytbOption == i ? 'active': '']"
                        @click.stop="pytbChoose(i)"
                      >
                        <img src="assets/music_score_editor/images/ic_tick.png" />{{ item.name }}
                      </div>
                    </template>
                    <template v-else>
                      <div
                        class="menu-li menu-li-item"
                        :class="item.classCss"
                        v-for="(item, i) in subMenu.subMenuList"
                        :id="item.id"
                        :value="item.value"
                        :level="item.level"
                        :chord="item.chord"
                        :position="item.position"
                        :type="item.type"
                        :dur="item.dur"
                      >
                        <img :src="item.url" />{{ item.name }}
                      </div>
                    </template>
                  </div>
                </div>
              </template>
            </div>
          </li>
        </ul>
        <!== 连接状态 ==>
        <div class="connect-status">
          <span id="midi_label">未连接midi设备</span>
        </div>
      </div> -->

      <!-- TODO 第一行工具栏 -->
      <!-- <div class="tools-box">
        <template
          v-for="(func, i) in usuallyFuncList"
          v-if="func.menuCode != 'view'"
        >
          <template v-for="(subFunc, j) in func.subMenuList">
            <div
              :class="['tools-li',  subFunc.classCss]"
              :title="subFunc.name"
              :id="subFunc.id"
            >
              <img :src="subFunc.url" />
            </div>
          </template>
          <div
            class="sep"
            v-if="func.subMenuList && func.subMenuList.length"
          ></div>
        </template>
        <!== 谱例属性 ==>
        <!== <div id="plsx" title="谱例属性" style="display: none;" class="tools-li plsx"  @click="plsxClick">
			<img src="assets/music_score_editor/images/attr.png">
		</div> ==>
        <!== 语法编辑框 ==>
        <div
          id="editor"
          title="语法编辑框(CTRL+E)"
          @click="editorClick"
          class="tools-li"
        >
          <img src="assets/music_score_editor/images/editor.png" />
        </div>
        <div
          id="metronomesetting"
          title="节拍器"
          @click="switchMetro()"
          class="tools-li"
        >
          <img src="assets/music_score_editor/images/jpq.png" />
        </div>
        <div
          id="micInput"
          title="麦克风输入"
          onclick="switchMicInput()"
          class="tools-li"
        >
          <img src="assets/music_score_editor/images/mic.png" />
        </div>
        <div class="sep"></div>
        <div
          title="五线谱"
          onclick="changeStaffType(this,0)"
          class="tools-li compute-mode"
        >
          <img src="assets/music_score_editor/images/icon_wxp.png" />
        </div>
        <div
          title="简谱"
          onclick="changeStaffType(this,2);restoreEditor();"
          class="tools-li compute-mode"
        >
          <img src="assets/music_score_editor/images/icon_jp.png" />
        </div>
        <div
          title="简线混排"
          onclick="changeStaffType(this,1)"
          class="tools-li compute-mode"
        >
          <img src="assets/music_score_editor/images/icon_jx.png" />
        </div>
        <div class="sep"></div>
        <div
          :title="abcSel.isOpen ? '完成绘制' : '绘制曲式'"
          @click="startDrawMF"
          class="tools-li compute-mode"
        >
          <img src="assets/music_score_editor/images/draw-mf.png" />
        </div>
        <div
          :title="showMusicForm ? '隐藏曲式' : '展示曲式'"
          @click="showMF"
          class="tools-li compute-mode"
        >
          <img src="assets/music_score_editor/images/toggle-mf.png" />
        </div>
        <div
          @click="isShowHelp =!isShowHelp"
          title="曲式分析使用说明"
          class="tools-li compute-mode"
        >
          <img src="assets/music_score_editor/images/icon_wh.png" />
        </div>

        <div class="sep"></div>
        <div
          title="放大"
          onclick="changeScale(0.2)"
          class="tools-li compute-mode"
        >
          <img src="assets/music_score_editor/images/fd.png" />
        </div>
        <div
          title="缩小"
          onclick="changeScale(-0.2)"
          class="tools-li compute-mode"
        >
          <img src="assets/music_score_editor/images/sx.png" />
        </div>
        <!== <div class="tools-li page-view">
			<select class="form-control">
				<option>页面视图</option>
			</select>
		</div> ==>
        <div class="sep"></div>
        <div title="显示小节序号" class="tools-li compute-mode">
          <img
            src="assets/music_score_editor/images/nodeseq.png"
            style="width: 30px; height: 30px"
            class="shownodeseq cmenu"
            draggable="false"
          />
        </div>
        <div title="显示每行首个小节序号" class="tools-li compute-mode">
          <img
            src="assets/music_score_editor/images/firstnodeseq.png"
            style="width: 30px; height: 30px"
            value=""
            class="showfirstnodeseq cmenu"
            draggable="false"
          />
        </div>
        <div title="每5小节显示" class="tools-li compute-mode">
          <img
            src="assets/music_score_editor/images/nodeseq5.png"
            style="width: 30px; height: 30px"
            value=""
            class="shownodeseq5 cmenu"
            draggable="false"
          />
        </div>
        <div title="显示小节序号边框" class="tools-li compute-mode">
          <img
            src="assets/music_score_editor/images/measurebox.png"
            style="width: 30px; height: 30px"
            value=""
            class="showmeasurebox cmenu"
            draggable="false"
          />
        </div>
        <div title="简谱do位置" class="tools-li compute-mode">
          <img
            src="assets/music_score_editor/images/do_chn.png"
            style="width: 30px; height: 30px"
            id="do_chn"
            value="DO"
            data-toggle="modal"
            data-target="#DO_CHN_div"
            class="cmenu"
            draggable="false"
          />
        </div>
        <!== <div title="声部下移" class="tools-li compute-mode">
			<img src="assets/music_score_editor/images/direct/staffdown.png" style="width:30px;height:30px;" value="[I:staff +1]" position="before" class="cmenu" draggable="false">
		</div>
		<div title="声部上移" class="tools-li compute-mode">
			<img src="assets/music_score_editor/images/direct/staffup.png" style="width:30px;height:30px;" value="[I:staff -1]" position="before" class="cmenu" draggable="false">
		</div> ==>
        <div
          title="小节背景色"
          class="tools-li compute-mode"
          style="display: none"
        >
          <img
            src="assets/music_score_editor/images/beijingse2.png"
            style="width: 30px; height: 30px"
            id="nodecolorli"
            style="width: 30px; height: 30px"
            value='"-mb-"'
            position="before"
            type="nodebg"
            class="operator cmenu nodecolorli"
            draggable="false"
          />
        </div>
        <!== <div title="音符背景色" class="tools-li compute-mode">
			<img src="assets/music_score_editor/images/beijingse.png" style="width:30px;height:30px;" id="notecolorli" value="&quot;-nb-&quot;" position="before" type="notebg" class="operator cmenu notecolorli" draggable="false">
		</div> ==>
        <div class="sep"></div>
        <div title="升一个音" class="tools-li compute-mode">
          <img
            src="assets/music_score_editor/images/shengjiang1.png"
            style="width: 30px; height: 30px"
            id="up"
            value="up"
            class="up cmenu"
            draggable="false"
          />
        </div>
        <div title="降一个音" class="tools-li compute-mode">
          <img
            src="assets/music_score_editor/images/shengjiang2.png"
            style="width: 30px; height: 30px"
            id="down"
            value="down"
            class="down cmenu"
            draggable="false"
          />
        </div>
        <!== <div title="上升一个八度" class="tools-li compute-mode">
			<img src="assets/music_score_editor/images/up8.png" id="up8" style="width:30px;height:30px;" value="up8" class="up8 cmenu" draggable="false">
		</div>
		<div title="下降一个八度" class="tools-li compute-mode">
			<img src="assets/music_score_editor/images/down8.png" style="width:30px;height:30px;" id="down8" value="down8" class="down8 cmenu" draggable="false">
		</div> ==>
        <div class="sep"></div>
        <div
          id="instrumentSelectByType"
          class="menu-list"
          title="更换乐器"
          style="height: 30px"
        >
          <img src="assets/music_score_editor/images/instrument.png" />
        </div>
        <div
          id="instrument"
          class="menu-list"
          title="更换乐器"
          @click.stop="menuClick('instrument')"
          style="height: 30px"
        >
          <img src="assets/music_score_editor/images/instrument.png" />
          <!== <span>乐器</span> ==>
          <div
            class="menu-pulldown-box"
            :class="{'menu-pulldown-box-2-style-2': headerInBottom}"
          >
            <input placeholder="请输入搜索关键字" v-model="instrumentKey" />
            <ul>
              <li
                v-show="!instrumentKey || instrumentOption == model.code || model.name.indexOf(instrumentKey) > -1"
                v-for="(model, index) in instrumentList"
                @click.stop="instrumentChoose(model.code)"
                :class="instrumentOption == model.code && 'menu-choose'"
              >
                <img src="assets/music_score_editor/images/ic_tick.png" /><span>{{model.name}}</span>
              </li>
            </ul>
          </div>
        </div>
        <div class="sep"></div>
        <div title="显示唱名" class="tools-li compute-mode">
          <img
            src="assets/music_score_editor/images/doremi.png"
            style="width: 30px; height: 30px"
            value="showcm"
            class="showcm cmenu"
            draggable="false"
          />
        </div>
        <div
          id="insertWord"
          title="文字"
          class="tools-li"
          onclick="enabledInsertWord(this);"
        >
          <span style="font-size: 18px; padding-top: 3px"
            ><strong>A</strong></span
          >
        </div>
        <div title="显示竖笛谱" class="tools-li compute-mode">
          <img
            src="assets/music_score_editor/images/sd.png"
            style="width: 30px; height: 30px"
            value="showsd"
            class="showsd cmenu"
            draggable="false"
          />
        </div>
        <div title="小节等间距" class="tools-li compute-mode">
          <img
            src="assets/music_score_editor/images/equalbars.png"
            style="width: 30px; height: 30px"
            value="equalbars"
            class="equalbars cmenu"
            draggable="false"
          />
        </div>
        <div title="复制歌词" class="tools-li compute-mode">
          <img
            src="assets/music_score_editor/images/cplyric.png"
            style="width: 30px; height: 30px"
            class="cplyric cmenu"
            draggable="false"
          />
        </div>
        <div
          title="播放唱名"
          id="playNoteChangMing"
          onclick="switchPlayNoteChangMing()"
          class="tools-li"
        >
          <img src="assets/music_score_editor/images/changming.png" style="width: 30px; height: 30px" />
        </div>
        <div class="play_option">
          <label>播放速度：</label>
          <input
            type="number"
            id="changePlaySpeedBtn"
            onchange="changePlaySpeed(this.value)"
            step="0.1"
            min="0.1"
            max="10"
            value="1"
            class="form-control"
            style="
              width: 60px;
              height: 30px;
              text-align: center;
              display: inline;
            "
          />
        </div>
        <div class="sep"></div>
        <div
          v-if="isExe"
          onclick="typeof (parent.closePop) == 'function' && parent != window  ? parent.closePop() : history.back()"
          class="back-btn"
        >
          <img src="assets/music_score_editor/images/back_arrow.png" />
          <span style="white-space: nowrap">返回</span>
        </div>
      </div> -->

      <div
        class="tools-box hidden"
        style="position: fixed; top: 38px; right: 0; z-index: 2"
      >
        <div v-show="!isJxbz" class="play-btn" onclick="musicFormEdit()">
          <div class="play-img qs">
            <img src="assets/music_score_editor/images/qs.png" />
          </div>
          <span style="white-space: nowrap">曲式</span>
        </div>
        <div class="play-btn" onclick="myplay()">
          <div class="play-img">
            <img src="assets/music_score_editor/images/play.png" id="playimg" />
          </div>
          <span id="playspan" style="white-space: nowrap">播放</span>
        </div>
        <div class="play-btn" onclick="mystop()">
          <div class="play-img">
            <img style="padding: 2.5px" src="assets/music_score_editor/images/stop.png" />
          </div>
          <span id="stopspan">停止</span>
        </div>
        <div
          v-show="!isJxbz"
          class="play-btn save-server save_to_server"
          style="border: 1px solid #ff9000"
          id="save_to_server"
        >
          <div class="play-img">
            <img style="padding: 2.5px" src="assets/music_score_editor/images/save_to_cloud.png" />
          </div>
          <span id="save_to_server_span" style="color: #ff9000"
            >存到谱例库</span
          >
        </div>
        <div
          v-show="!isJxbz"
          class="play-btn save-server save_to_history"
          style="border: 1px solid #ff9000"
          id="save_to_history"
        >
          <div class="play-img">
            <img style="padding: 2.5px" src="assets/music_score_editor/images/save_to_cloud.png" />
          </div>
          <span id="save_to_history_span" style="color: #ff9000"
            >存到历史记录</span
          >
        </div>
        <div
          v-show="isJxbz"
          class="play-btn save-server"
          style="border: 1px solid #ff9000"
        >
          <div class="play-img">
            <img style="padding: 2.5px" src="assets/music_score_editor/images/save_to_cloud.png" />
          </div>
          <span style="color: #ff9000" @click="saveJxbzAbc">保存</span>
        </div>
        <div
          class="play-btn save-server gen_image"
          style="border: 1px solid #ff9000"
        >
          <div class="play-img">
            <img style="padding: 2.5px" src="assets/music_score_editor/images/save_to_cloud.png" />
          </div>
          <span style="color: #ff9000" @click="startsyn">生成图片</span>
        </div>

        <div
          id="scplaydiv"
          class="play-btn"
          onclick="scOpen()"
          style="display: none"
        >
          <div class="play-img">
            <img src="assets/music_score_editor/images/play.png" id="playimg" />
          </div>
          <span id="scspan" style="white-space: nowrap">视唱</span>
        </div>
      </div>

      <!-- TODO 第二行工具栏 -->
      <div class="tools-box hidden">
        <!-- 编辑 -->
        <div
          id="graphEditorMenuInsert"
          title="插入模式(N)"
          class="tools-li"
          onclick="switchPrachEditor(this);"
        >
          <img src="assets/music_score_editor/images/bianji.png" style="width: 30px; height: 30px" />
        </div>
        <div
          id="graphEditorMenuUpdate"
          title="修改模式(U)"
          class="tools-li menu-pressed"
          onclick="switchPrachEditor(this);"
        >
          <img src="assets/music_score_editor/images/editor.png" style="width: 30px; height: 30px" />
        </div>
        <!-- <div id="selectedStatus" title="选择（CTRL+Q）" class="tools-li" onclick="enabledEditor(this);">
          <img src="assets/music_score_editor/images/selected.png" style="width:30px;height:30px;"/>
        </div> -->
        <div class="sep"></div>
        <img
          class="tools-li"
          v-for="(tImg, idx) in toolsLengthList.imgList"
          :class="tImg.class"
          :key="'ti' + idx"
          :src="tImg.url"
          :title="tImg.title"
          @click="toolItemClick(toolsLengthList.code, tImg.id, tImg.value)"
          :id="tImg.id"
          :value="tImg.value"
          :level="tImg.level"
          :chord="tImg.chord"
          :position="tImg.position"
          :type="tImg.type"
          :dur="tImg.dur"
          :keycode="tImg.keycode"
          :data-toggle="tImg.datatoggle"
          :data-target="tImg.datatarget"
        />
        <div class="tools-li">
          <img
            id="length_swtich"
            title="切换"
            src="assets/music_score_editor/images/switch.png"
            style="width: 18px; height: 18px"
            class="switch"
          />
        </div>
        <div class="sep"></div>
        <div title="休止符" target>
          <img
            src="assets/music_score_editor/images/rest.png"
            style="width: 30px; height: 30px"
            class="reststatus tools-li"
          />
        </div>
        <div title="符点" target>
          <img
            src="assets/music_score_editor/images/dot3.png"
            style="width: 30px; height: 30px"
            value="3/"
            class="dotstatus tools-li"
          />
        </div>
        <div title="符点" target>
          <img
            src="assets/music_score_editor/images/dot4.png"
            style="width: 30px; height: 30px"
            value="7//"
            class="dotstatus tools-li"
          />
        </div>
        <div class="sep"></div>
        <div title="升" target>
          <img
            src="assets/music_score_editor/images/yingao1.png"
            style="width: 30px; height: 30px"
            value="^"
            class="pitchbtn tools-li"
          />
        </div>
        <div title="重升" target>
          <img
            src="assets/music_score_editor/images/cs.png"
            style="width: 30px; height: 30px"
            value="^^"
            class="pitchbtn tools-li"
          />
        </div>
        <div title="降" target>
          <img
            src="assets/music_score_editor/images/yingao2.png"
            style="width: 30px; height: 30px"
            value="_"
            class="pitchbtn tools-li"
          />
        </div>
        <div title="重降" target>
          <img
            src="assets/music_score_editor/images/cj.png"
            style="width: 30px; height: 30px"
            value="__"
            class="pitchbtn tools-li"
          />
        </div>
        <div title="还原" target>
          <img
            src="assets/music_score_editor/images/yingao3.png"
            style="width: 30px; height: 30px"
            value="="
            class="pitchbtn tools-li"
          />
        </div>
        <div class="sep"></div>
        <div class="tools-li page-view choir-sel" style="display: none">
          <select id="chordKeyType" class="form-control">
            <option value="">自然大调</option>
            <option value="hsdd">和声大调</option>
            <option value="zrxd">自然小调</option>
            <option value="hsxd">和声小调</option>
          </select>
        </div>
        <div class="tools-li page-view choir-sel" style="display: none">
          <select id="chordCategory" class="form-control">
            <option value="3" class="category">三和弦</option>
            <option value="7" class="category">七和弦</option>
            <option value="f3" class="category">副属三和弦</option>
          </select>
        </div>
        <div class="tools-li page-view choir-sel" style="display: none">
          <select id="chordLevel" class="form-control" style="width: 70px">
            <option type="Ⅰ" level="1" class="level">Ⅰ</option>
            <option type="Ⅱ" level="2" class="level">Ⅱ</option>
            <option type="Ⅲ" level="3" class="level">Ⅲ</option>
            <option type="Ⅳ" level="4" class="level">Ⅳ</option>
            <option type="Ⅴ" level="5" class="level">Ⅴ</option>
            <option type="Ⅵ" level="6" class="level">Ⅵ</option>
            <option type="Ⅶ" level="7" class="level">Ⅶ</option>
          </select>
        </div>
        <div class="tools-li page-view choir-sel" style="display: none">
          <select id="markType" class="form-control">
            <option value="">罗马数字</option>
            <option value="shuzi">数字和弦</option>
            <option value="zimu">字母标记</option>
          </select>
        </div>
        <div
          id="chordType"
          class="marktype"
          style="margin-left: 5px; font-size: 0; display: none"
        >
          <span class="chord tools-li" value="yuanwei" type3="" type7=""
            >原位<span class="hxspan hx3">Ⅰ</span></span
          >
          <span class="chord tools-li" value="zhuangwei1" type3="6" type7="56"
            >第一转位<span class="hxspan hx3-6">Ⅰ</span></span
          >
          <span class="chord tools-li" value="zhuangwei2" type3="46" type7="34"
            >第二转位<span class="hxspan hx3-46">Ⅰ</span></span
          >
          <span
            class="chord tools-li"
            value="zhuangwei3"
            type3=""
            type7="2"
            style="display: none"
            >第三转位<span class="hxspan hx7-2">Ⅴ</span></span
          >
        </div>
        <!-- 数字和弦 -->
        <div
          id="chordType_shuzi"
          class="marktype"
          style="margin-left: 5px; font-size: 0; display: none"
        >
          <span class="chord_shuzi tools-li" value="yuanwei" type3="" type7="7"
            >原位<span class="hxspan_shuzi_yuanwei">1</span></span
          >
          <span
            class="chord_shuzi tools-li"
            value="zhuangwei1"
            type3="6"
            type7="56"
            >第一转位<span class="hxspan_shuzi_zhuangwei1">1/3</span></span
          >
          <span
            class="chord_shuzi tools-li"
            value="zhuangwei2"
            type3="46"
            type7="34"
            >第二转位<span class="hxspan_shuzi_zhuangwei2">1/5</span></span
          >
          <span
            class="chord_shuzi tools-li"
            value="zhuangwei3"
            type3=""
            type7="2"
            style="display: none"
            >第三转位<span class="hxspan_shuzi_zhuangwei3">Ⅴ</span></span
          >
        </div>
        <!-- 字母和弦 -->
        <div
          id="chordType_zimu"
          class="marktype"
          style="margin-left: 5px; font-size: 0; display: none"
        >
          <span class="chord_zimu tools-li" value="yuanwei" type3="" type7=""
            >原位<span class="hxspan_zimu hx3">C</span></span
          >
          <span
            class="chord_zimu tools-li"
            value="zhuangwei1"
            type3="6"
            type7="56"
            >第一转位<span class="hxspan_zimu hx3-6">C</span></span
          >
          <span
            class="chord_zimu tools-li"
            value="zhuangwei2"
            type3="46"
            type7="34"
            >第二转位<span class="hxspan_zimu hx3-46">C</span></span
          >
          <span
            class="chord_zimu tools-li"
            value="zhuangwei3"
            type3=""
            type7="2"
            style="display: none"
            >第三转位<span class="hxspan_zimu hx7-2">Ⅴ</span></span
          >
        </div>
        <!-- 副属三和弦 -->
        <div
          id="chordType_f3"
          class="marktype"
          style="margin-left: 5px; font-size: 0; display: none"
        >
          <span
            class="chord_f3 luoma tools-li"
            value="yuanwei"
            type3=""
            type7=""
            >原位Ⅴ/<span class="hxspan_f3 hx3">Ⅰ</span></span
          >
          <span
            class="chord_f3 shuzi tools-li"
            value="yuanwei"
            type3=""
            type7=""
            style="display: none"
            ><span class="hxspan_f3_shuzi hx3"></span
          ></span>
          <span
            class="chord_f3 zimu tools-li"
            value="yuanwei"
            type3=""
            type7=""
            style="display: none"
            ><span class="hxspan_f3_zimu hx3"></span
          ></span>
        </div>
        <div class="sep"></div>
        <div id="editorvDiv" style="margin-left: 5px; font-size: 0">
          <span class="editorv tools-li" value="1">1</span>
          <span class="editorv tools-li" value="2">2</span>
          <span class="editorv tools-li" value="3">3</span>
          <span class="editorv tools-li" value="4">4</span>
        </div>
        <div class="play_option" style="display: none">
          <label>播放选项：</label>
          <!-- 临时变换调 -->
          <select
            id="playingKey"
            style="width: 80px; display: inline; line-height: 30px"
            onchange="changePlayingKey(this.value)"
          >
            <option value="">移调</option>
            <option value="C">C</option>
            <option value="G">G</option>
            <option value="D">D</option>
            <option value="A">A</option>
            <option value="E">E</option>
            <option value="B">B</option>
            <option value="F#">#F</option>
            <option value="C#">#C</option>
            <option value="F">F</option>
            <option value="Bb">bB</option>
            <option value="Eb">bE</option>
            <option value="Ab">bA</option>
            <option value="Db">bD</option>
            <option value="Gb">bG</option>
            <option value="Cb">bC</option>
          </select>

          <!-- <div id="playInstrument" class="menu-list" title="更换乐器" @click.stop="menuClick('playInstrument')" style="height:30px;width:75px;padding-top: 3px;"> -->
          <div
            class="menu-list"
            title="更换乐器"
            onclick="showInstrMenu()"
            style="height: 30px; width: 75px; padding-top: 3px"
          >
            <label id="instruSpan">更换乐器</label>
            <!-- <span>乐器</span> -->
            <div
              class="menu-pulldown-box"
              :class="{'menu-pulldown-box-2-style-2': headerInBottom}"
            >
              <input placeholder="请输入搜索关键字" v-model="instrumentKey" />
              <ul>
                <li
                  v-show="!instrumentKey || playingInstrumentOption == model.code || model.name.indexOf(instrumentKey) > -1"
                  v-for="(model, index) in instrumentList"
                  @click.stop="playingInstrumentChange(model.code,model.name)"
                  :class="playingInstrumentOption == model.code && 'menu-choose'"
                >
                  <img src="assets/music_score_editor/images/ic_tick.png" /><span>{{model.name}}</span>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <div style="display: none;">
        <div class="tools-box spl-input" style="display: none">
          <div
            class="tools-li cmenu"
            src="assets/music_score_editor/images/jianpu/1.png"
            level="0"
            num="1"
            value="C"
            type="spl"
            style="
              position: relative;
              margin-right: 0px;
              -webkit-user-select: none;
              -moz-user-select: none;
              -ms-user-select: none;
              user-select: none;
            "
          >
            1
          </div>
          <div
            class="tools-li cmenu"
            src="assets/music_score_editor/images/jianpu/2.png"
            level="0"
            num="2"
            value="D"
            type="spl"
            style="
              position: relative;
              margin-right: 0px;
              -webkit-user-select: none;
              -moz-user-select: none;
              -ms-user-select: none;
              user-select: none;
            "
          >
            2
          </div>
          <div
            class="tools-li cmenu"
            src="assets/music_score_editor/images/jianpu/3.png"
            level="0"
            num="3"
            value="E"
            type="spl"
            style="
              position: relative;
              margin-right: 0px;
              -webkit-user-select: none;
              -moz-user-select: none;
              -ms-user-select: none;
              user-select: none;
            "
          >
            3
          </div>
          <div
            class="tools-li cmenu"
            src="assets/music_score_editor/images/jianpu/4.png"
            level="0"
            num="4"
            value="F"
            type="spl"
            style="
              position: relative;
              margin-right: 0px;
              -webkit-user-select: none;
              -moz-user-select: none;
              -ms-user-select: none;
              user-select: none;
            "
          >
            4
          </div>
          <div
            class="tools-li cmenu"
            src="assets/music_score_editor/images/jianpu/5.png"
            level="0"
            num="5"
            value="G"
            type="spl"
            style="
              position: relative;
              margin-right: 0px;
              -webkit-user-select: none;
              -moz-user-select: none;
              -ms-user-select: none;
              user-select: none;
            "
          >
            5
          </div>
          <div
            class="tools-li cmenu"
            src="assets/music_score_editor/images/jianpu/6.png"
            level="0"
            num="6"
            value="A"
            type="spl"
            style="
              position: relative;
              margin-right: 0px;
              -webkit-user-select: none;
              -moz-user-select: none;
              -ms-user-select: none;
              user-select: none;
            "
          >
            6
          </div>
          <div
            class="tools-li cmenu"
            src="assets/music_score_editor/images/jianpu/7.png"
            level="0"
            num="7"
            value="B"
            type="spl"
            style="
              position: relative;
              margin-right: 0px;
              -webkit-user-select: none;
              -moz-user-select: none;
              -ms-user-select: none;
              user-select: none;
            "
          >
            7
          </div>
          <div class="tools-li cmenu" onclick="jianPuOperatorUp8(1)">
            <img src="assets/music_score_editor/images/jianpu/s8.png" />
          </div>
          <div class="tools-li cmenu" onclick="jianPuOperatorUp8(-1)">
            <img src="assets/music_score_editor/images/jianpu/j8.png" />
          </div>
          <div class="tools-li cmenu" id="jphxButton">
            <img src="assets/music_score_editor/images/jianpu/jphx.png" />
          </div>
        </div>
      </div>
      <!-- ------------------------------顶部导航菜单-------------------------------->

      <!-- 底部琴键 -->
      <div class="bottom-box" :class="{'bottom-box-hide': !keyboardShow, 'bottom-box-style-2': headerInBottom}" >
        <!-- 音程尺 -->
        <div class="tone-ruler ruler">
          <div class="ruler-border"></div>
          <div class="ruler-title">音程尺</div>
          <li class="li-expand">一<br />度</li>
          <li>小<br />二<br />度</li>
          <li>大<br />二<br />度</li>
          <li>小<br />三<br />度</li>
          <li>大<br />三<br />度</li>
          <li>纯<br />四<br />度</li>
          <li>增减<br />四五<br />度度</li>
          <li>纯<br />五<br />度</li>
          <li>小<br />六<br />度</li>
          <li>大<br />六<br />度</li>
          <li>小<br />七<br />度</li>
          <li>大<br />七<br />度</li>
          <li class="li-expand">八<br />度</li>
        </div>
        <!-- 大三和弦 -->
        <div class="dshx-ruler ruler">
          <li>
            <div>大三度</div>
            <span></span>
            <span></span>
            <span></span>
            <span></span>
          </li>
          <li>
            <div>小三度</div>
            <span></span>
            <span></span>
            <span></span>
          </li>
          <div class="hx-ruler-title">大三和弦</div>
        </div>
        <!-- 小三和弦 -->
        <div class="xshx-ruler ruler">
          <li>
            <div>小三度</div>
            <span></span>
            <span></span>
            <span></span>
          </li>
          <li>
            <div>大三度</div>
            <span></span>
            <span></span>
            <span></span>
            <span></span>
          </li>
          <div class="hx-ruler-title">小三和弦</div>
        </div>
        <input
          type="text"
          id="numstaffinput"
          name="numstaffinput"
          onkeyup="numstaffpress()"
          style="
            position: absolute;
            top: -35px;
            left: 0px;
            width: 60px;
            height: 30px;
            font-size: 14px;
            display: none;
          "
        />
        <div class="keyboard-box keyboard-up">
          <div class="keyboard-bar">
            <span class="keyboard-lbl">&nbsp;</span>
            <span class="close piano-close" title="关闭"></span>
            <span class="minimize" title="最小化"></span>
            <span class="restore hide" title="还原"></span>
            <span class="scroll_right" id="scrollRight" title="右移"></span>
            <span class="scroll_left" id="scrollLeft" title="左移"></span>
          </div>
          <div
            id="scoreEditorPianoKeyboardContainer"
            data-bind="visible: showPianoKeyboard, style: {height: pianoKeyboardHeight, right: rightPanelWidth }"
            style="height: 200px; right: 0px"
          >
            <div
              id="scoreEditorPianoKeyboard"
              data-bind="template: {name: 'score/html5EditorControls', data: html5Editor()}"
            >
              <div id="noteInput" class="pianoKeyboard" style="left: -868px">
                <div id="pianoKeysWhite" class="keyRow white">
                  <div group="C0">
                    <div class="key" style="left: 0px">
                      <!-- 大二 -->
                    </div>
                    <div class="key" style="left: 62px"></div>
                    <div class="key" style="left: 124px"></div>
                    <div class="key" style="left: 186px"></div>
                    <div class="key" style="left: 248px"></div>
                    <div class="key" style="left: 310px"></div>
                    <div class="key" style="left: 372px"></div>
                  </div>
                  <div group="C1">
                    <div class="key" style="left: 434px">
                      <!-- 大一 -->
                    </div>
                    <div class="key" style="left: 496px"></div>
                    <div class="key" style="left: 558px"></div>
                    <div class="key" style="left: 620px"></div>
                    <div class="key" style="left: 682px"></div>
                    <div class="key" style="left: 744px"></div>
                    <div class="key" style="left: 806px"></div>
                  </div>
                  <div group="C2">
                    <div class="key" style="left: 868px">
                      <!-- 大字 -->
                    </div>
                    <div class="key" style="left: 930px"></div>
                    <div class="key" style="left: 992px"></div>
                    <div class="key" style="left: 1054px"></div>
                    <div class="key" style="left: 1116px"></div>
                    <div class="key" style="left: 1178px"></div>
                    <div class="key" style="left: 1240px"></div>
                  </div>
                  <div group="C3">
                    <div class="key" style="left: 1302px">
                      <!-- 小字 -->
                    </div>
                    <div class="key" style="left: 1364px"></div>
                    <div class="key" style="left: 1426px"></div>
                    <div class="key" style="left: 1488px">
                      <div class="keyIcon2"></div>
                    </div>
                    <div class="key" style="left: 1550px"></div>
                    <div class="key" style="left: 1612px"></div>
                    <div class="key" style="left: 1674px"></div>
                  </div>
                  <div group="C4" class="group-active">
                    <div class="key" style="left: 1736px">
                      <!-- 中央C -->
                    </div>
                    <div class="key" style="left: 1798px"></div>
                    <div class="key" style="left: 1860px"></div>
                    <div class="key" style="left: 1922px"></div>
                    <div class="key" style="left: 1984px">
                      <div class="keyIcon2"></div>
                    </div>
                    <div class="key" style="left: 2046px"></div>
                    <div class="key" style="left: 2108px"></div>
                  </div>
                  <div group="C5">
                    <div class="key" style="left: 2170px">
                      <!-- 小二 -->
                    </div>
                    <div class="key" style="left: 2232px"></div>
                    <div class="key" style="left: 2294px"></div>
                    <div class="key" style="left: 2356px"></div>
                    <div class="key" style="left: 2418px"></div>
                    <div class="key" style="left: 2480px"></div>
                    <div class="key" style="left: 2542px"></div>
                  </div>
                  <div group="C6">
                    <div class="key" style="left: 2604px">
                      <!-- 小三 -->
                    </div>
                    <div class="key" style="left: 2666px"></div>
                    <div class="key" style="left: 2728px"></div>
                    <div class="key" style="left: 2790px"></div>
                    <div class="key" style="left: 2852px"></div>
                    <div class="key" style="left: 2914px"></div>
                    <div class="key" style="left: 2976px"></div>
                  </div>
                  <div group="C7">
                    <div class="key" style="left: 3038px">
                      <!-- 小四 -->
                    </div>
                    <div class="key" style="left: 3100px"></div>
                    <div class="key" style="left: 3162px"></div>
                    <div class="key" style="left: 3224px"></div>
                    <div class="key" style="left: 3286px"></div>
                    <div class="key" style="left: 3348px"></div>
                    <div class="key" style="left: 3410px"></div>
                  </div>
                  <div group="C8">
                    <div class="key" style="left: 3472px">
                      <!-- 小五 -->
                    </div>
                    <div class="key" style="left: 3534px"></div>
                    <div class="key" style="left: 3596px"></div>
                    <div class="key" style="left: 3658px"></div>
                    <div class="key" style="left: 3720px"></div>
                    <div class="key" style="left: 3782px"></div>
                    <div class="key" style="left: 3844px"></div>
                  </div>
                </div>
                <div id="pianoKeysBlack" class="keyRow black">
                  <div group="B0">
                    <div class="key" style="left: 31px"></div>
                    <div class="key" style="left: 93px"></div>
                    <div class="key" style="left: 217px"></div>
                    <div class="key" style="left: 279px"></div>
                    <div class="key" style="left: 341px"></div>
                  </div>
                  <div group="B1">
                    <div class="key" style="left: 465px"></div>
                    <div class="key" style="left: 527px"></div>
                    <div class="key" style="left: 651px"></div>
                    <div class="key" style="left: 713px"></div>
                    <div class="key" style="left: 775px"></div>
                  </div>
                  <div group="B2">
                    <div class="key" style="left: 899px"></div>
                    <div class="key" style="left: 961px"></div>
                    <div class="key" style="left: 1085px"></div>
                    <div class="key" style="left: 1147px"></div>
                    <div class="key" style="left: 1209px"></div>
                  </div>
                  <div group="B3">
                    <div class="key" style="left: 1333px"></div>
                    <div class="key" style="left: 1395px"></div>
                    <div class="key" style="left: 1519px"></div>
                    <div class="key" style="left: 1581px"></div>
                    <div class="key" style="left: 1643px"></div>
                  </div>
                  <div group="B4">
                    <div class="key" style="left: 1767px"></div>
                    <div class="key" style="left: 1829px"></div>
                    <div class="key" style="left: 1953px"></div>
                    <div class="key" style="left: 2015px"></div>
                    <div class="key" style="left: 2077px"></div>
                  </div>
                  <div group="B5">
                    <div class="key" style="left: 2201px"></div>
                    <div class="key" style="left: 2263px"></div>
                    <div class="key" style="left: 2387px"></div>
                    <div class="key" style="left: 2449px"></div>
                    <div class="key" style="left: 2511px"></div>
                  </div>
                  <div group="B6">
                    <div class="key" style="left: 2635px"></div>
                    <div class="key" style="left: 2697px"></div>
                    <div class="key" style="left: 2821px"></div>
                    <div class="key" style="left: 2883px"></div>
                    <div class="key" style="left: 2945px"></div>
                  </div>
                  <div group="B7">
                    <div class="key" style="left: 3069px"></div>
                    <div class="key" style="left: 3131px"></div>
                    <div class="key" style="left: 3255px"></div>
                    <div class="key" style="left: 3317px"></div>
                    <div class="key" style="left: 3379px"></div>
                  </div>
                  <div group="B8">
                    <div class="key" style="left: 3503px"></div>
                    <div class="key" style="left: 3565px"></div>
                    <div class="key" style="left: 3689px"></div>
                    <div class="key" style="left: 3751px"></div>
                    <div class="key" style="left: 3813px"></div>
                  </div>
                </div>
              </div>
              <!-- <div class="pianoKeyboardSlider right" id="scrollRight"></div>
              <div class="pianoKeyboardSlider left" id="scrollLeft"></div> -->
            </div>
          </div>
        </div>
      </div>
      <!-- 中间主要内容 -->
      <div class="body-box relative" style="overflow: hidden; height: 100%; background: #B5C5D3;" @scroll="() => {
        m.editor.isEsc = true
        m.editor.type = ''
      }">
        <!-- 左边列表 -->
        <div class="body-left" style="z-index: 20; position: fixed; top: 84px; left: 0px;">
          <div class="body-left-content scroll" style="background: #F5F5F6">
            <!--abcString 相关  -->
            <input
              id="s0"
              type="button"
              style="display: none; background-color: #80ff80"
              value="(noname)"
            />
            <input
              id="s1"
              type="button"
              style="display: none; background-color: #ffd0d0"
              value=""
            />
            <input
              type="file"
              id="abcfile"
              accept=".xzds"
              style="display: none"
              onchange="loadxzdsfile()"
            />
            <!-- <input
              type="file"
              id="midifile"
              accept=".mid,.midi"
              style="display: none"
              onchange="postmidifile()"
            />
            <input
              type="file"
              id="xmlfile"
              accept=".xml,.musicxml"
              style="display: none"
            /> -->
            <div class="flex flex-col h-full pb-4">
              <div class="panel-name">
                音符面板
                <img
                  src="assets/music_score_editor/img/arrow-2.png"
                  class="plsx-close"
                  @click="m.isMusicNoteShow = false"
                />
              </div>
              <ul class="flex-1 flex flex-col" style="padding: 10px 6px 100px 6px; border-top: 1px solid #D9D9D9;">
                <li
                  v-for="(model, index) in m.toolList"
                  :class="model.code"
                  :key="model.code"
                  @click="model.isExpand = !model.isExpand"
                  style="margin-bottom: 8px;"
                >
                  <div class="flex space-x-1 px-1 cursor-pointer group items-center">
                    <div class="w-5 h-5 flex items-center justify-center rounded-sm group-hover:bg-gray-300">
                      <img src="assets/music_score_editor/img/right.png" :class="{'arrow-down': model.isExpand}" class="duration-300" />
                    </div>
                    <span>{{model.name}}</span>
                  </div>
                  <img
                    class="switch"
                    :id="model.code + '_swtich'"
                    title="切换"
                    @click.stop="model.isExpand = true"
                    v-if="model.canSwitch"
                    src="assets/music_score_editor/images/switch.png"
                  />
                  <div
                    class="left-hide-content mb-3 bg-transparent"
                    :class="{'left-hide-content-show': model.isExpand}"
                  >
                    <div v-if="model.code == 'note'" class="note-box">
                      <select class="form-control select" id="notegroup">
                        <option value="C0">大字二组</option>
                        <option value="C1">大字一组</option>
                        <option value="C2">大字组</option>
                        <option value="C3">小字组</option>
                        <option value="C4" selected="selected">小字一组</option>
                        <option value="C5">小字二组</option>
                        <option value="C6">小字三组</option>
                        <option value="C7">小字四组</option>
                        <option value="C7">小字四组</option>
                        <option value="C8">小字五组</option>
                      </select>
                    </div>
                    <ul v-if="model.code == 'note'" class="yinfu-ul">
                      <li
                        value="C"
                        class="notes"
                        @click="toolItemClick('note', 'C')"
                      >
                        C
                      </li>
                      <li
                        value="D"
                        class="notes"
                        @click="toolItemClick('note', 'D')"
                      >
                        D
                      </li>
                      <li
                        value="E"
                        class="notes"
                        @click="toolItemClick('note', 'E')"
                      >
                        E
                      </li>
                      <li
                        value="F"
                        class="notes"
                        @click="toolItemClick('note', 'F')"
                      >
                        F
                      </li>
                      <li
                        value="G"
                        class="notes"
                        @click="toolItemClick('note', 'G')"
                      >
                        G
                      </li>
                      <li
                        value="A"
                        class="notes"
                        @click="toolItemClick('note', 'A')"
                      >
                        A
                      </li>
                      <li
                        value="B"
                        class="notes"
                        @click="toolItemClick('note', 'B')"
                      >
                        B
                      </li>
                      <li
                        value="z"
                        class="notes"
                        @click="toolItemClick('note', 'z')"
                        id="znotes"
                      >
                        z
                      </li>
                    </ul>
                    <div
                      v-if="model.code === 'speedTerm'"
                      class="flex justify-center py-1"
                      style="margin-bottom: 0; border-radius: 0; background-color: #fff; border: 1px solid #E6E6E6; position: relative; transform: translate(1px, 1px);z-index: 50;"
                    >
                      <div
                        class="flex items-center h-full cursor-pointer transform"
                        style="transform: scale(.85)"
                      >
                        <img
                          :src="`assets/music_score_editor/img/radio${m.scoreOpts.speedType === 'sign' ? '1' : '2'}.png`"
                          class="cursor-pointer mr-3"
                          @click="m.scoreOpts.speedType = 'sign'"
                        />
                        <div
                          class="flex h-full items-center relative z-50 duration-300"
                          :class="{ 'opacity-50 pointer-events-none': m.scoreOpts.speedType !== 'sign' }"
                        >
                          <select-input v-model="m.scoreOpts.speedNote" :list="m.newScore.speedNoteList" style="height: 28px;"></select-input>
                          <div style="margin: 0 10px;">=</div>
                          <number-input v-model="m.scoreOpts.speedNum" :min="1" style="width: 64px; height: 28px;"></number-input>
                        </div>
                      </div>
                    </div>
                    <div
                      class="grid items-center justify-center bg-white border-l border-t"
                      :class="[`grid-cols-${(model.code === 'speedTerm' && index === 0) ? 1 : model.cols || 1}`]"
                      :style="model.code === 'speedTerm' ? 'margin-top: 0px' : ''"
                    >
                      <template v-if="model.code === 'speedTerm'">
                        <div
                          v-for="(item) in speedTxtListPanel"
                          :key="item.val"
                          class="flex items-center justify-center h-8 text-sm font-normal"
                          style="margin-left: -2px; margin-top: -2px; border: 1px solid #E6E6E6; transform: translate(1px, 1px);"
                          :title="item.title"
                          @click="() => {
                            scoreOpts.speedType = 'txt'
                            scoreOpts.speedText = item.txt
                            abc_change()
                          }"
                        >
                          {{ item.txt }}
                        </div>
                      </template>
                      <template v-else-if="model.code === 'emoTerm'">
                        <div
                          v-for="(item) in m.scoreOpts.musicType === 'easy' ? easyEmoTxtList : staffEmoTxtList"
                          :key="item.txt"
                          class="flex items-center justify-center h-8 text-sm font-normal"
                          style="margin-left: -2px; margin-top: -2px; border: 1px solid #E6E6E6; transform: translate(1px, 1px);"
                          :title="item.title"
                          @click="setEmoTxt(item.txt)"
                        >
                          {{ item.txt }}
                        </div>
                      </template>
                      <template v-else>
                        <div
                          v-for="(tImg, idx) in model.imgList"
                          :key="'ti' + idx"
                          class="flex items-center justify-center"
                          :class="[model.className]"
                          style="margin-left: -2px; margin-top: -2px; border: 1px solid #E6E6E6; transform: translate(1px, 1px);"
                          @click="() => {
                            if (!model.canClick) return
                            if (tImg.fn) return tImg.fn()
                            changeAbc((txt) => `${tImg.value || ''}${txt}${tImg.value2 || ''}`);
                          }"
                        >
                          <img
                            :title="tImg.title"
                            @click="toolItemClick(model.code, tImg.id, tImg.value)"
                            :src="tImg.url"
                            :id="tImg.id"
                            :value="tImg.value"
                            :value2="tImg.value2"
                            :level="tImg.level"
                            :chord="tImg.chord"
                            :class="[tImg.class, 'object-contain']"
                            :position="tImg.position"
                            :type="tImg.type"
                            :dur="tImg.dur"
                            :data-toggle="tImg.datatoggle"
                            :data-target="tImg.datatarget"
                          />
                        </div>
                      </template>
                    </div>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </div>

        <!-- 右键菜单 -->
        <div
          id="shortcut_menu"
          v-show="m.ctxMenu.isShow"
          class="fixed panzoom-exclude rounded-sm duration-300 w-44 p-0.5 bg-white"
          @mouseup.stop
          @click.stop
          :style="{
            left: m.ctxMenu.x + 'px',
            top: m.ctxMenu.y + 'px',
            zIndex: 999,
            boxShadow: '0px 4px 30px 0px rgba(3,35,63,0.28)'
          }"
        >
          <template
            v-for="(item, i) in getCtxMenuList"
          >
            <div v-if="item.type === 'line' && getCtxMenuList.length > 3" style="width: 100%; height: 1px; background: #E9E9E9;"></div>
            <div
              v-else-if="item.title"
              class="flex justify-between items-center rounded-sm cursor-pointer addBar-box hover:sky-blue-bg duration-300 relative"
              :class="[
                { 'pointer-events-none text-gray-400 cursor-default': item.disabled }
              ]"
              style="padding: 4px 9px; font-size: 12px;"
              @click="item.fn && item.fn() | item.title === '添加小节' | item.title ==='修改小节时值' || (m.ctxMenu.isShow = false)"
            >
              <div>{{ item.title }}</div>
              <div v-if="item.subTitle" style="color: #767676;">{{ item.subTitle }}</div>
              <template v-if="item.title === '添加小节'">
                <img src="assets/music_score_editor/img/arrow_down.png" class="transform -rotate-90 w-2 h-1" >
                <div
                  class="absolute addBar duration-300 right-0 top-0 transform cursor-default translate-x-full bg-white rounded-sm pointer-events-none opacity-0"
                  style="box-shadow: 0px 4px 30px 0px rgba(3,35,63,0.28); width: 215px; padding: 6px 10px"
                  @click.stop
                >
                  <div class="flex items-center">
                    <div>小节前</div>
                    <div class="ml-2">插入</div>
                    <number-input v-model="m.addBar.before" :min="1" class="ml-2" style="width: 64px"></number-input>
                    <div class="mx-2">小节</div>
                    <img src="assets/music_score_editor/img/gou.png" class="cursor-pointer" @click="insertNodes(m.addBar.before) | (m.ctxMenu.isShow = false)">
                  </div>
                  <div class="mt-2 flex items-center">
                    <div>小节后</div>
                    <div class="ml-2">插入</div>
                    <number-input v-model="m.addBar.after" :min="1" class="ml-2" style="width: 64px"></number-input>
                    <div class="mx-2">小节</div>
                    <img src="assets/music_score_editor/img/gou.png" class="cursor-pointer" @click="insertNodes(m.addBar.after, true) | (m.ctxMenu.isShow = false)">
                  </div>
                </div>
              </template>
              <template v-else-if="item.title === '修改小节时值'">
                <img src="assets/music_score_editor/img/arrow_down.png" class="transform -rotate-90 w-2 h-1" >
                <div
                  class="absolute addBar duration-300 right-0 top-0 transform cursor-default translate-x-full bg-white rounded-sm pointer-events-none opacity-0"
                  style="box-shadow: 0px 4px 30px 0px rgba(3,35,63,0.28); width: 220px; padding: 6px 10px"
                  @click.stop
                >
                  <div class="items-center flex">
                    <number-input v-model="m.scoreNodeData.weakBarTop" :min="1" style="width: 64px; height: 28px;"></number-input>
                    <div style="margin-left: 3px;">个</div>
                    <div class="mx-1.5">/</div>
                    <input type="hidden" id="barTimeTop" oldval="4" value="4" >
                    <input type="hidden" id="barTimeBot" oldval="4" value="4" >
                    
                    <div class="rounded flex h-6" style="border: 1px solid rgb(217, 217, 217);height: 28px;margin-right: 10px;">
                        <select style="display: none;" v-model="m.scoreNodeData.weakBarBot" placeholder="请选择音符">
                          <option
                            v-for="item in m.newScore.beatNoteList3"
                            :key="item.val"
                            :label="item.txt"
                            :value="item.val">
                            {{ item.txt }}
                          </option>
                        </select>

                        <div v-for="item in m.newScore.beatNoteList3" :key="item.val" v-if="item.val==m.scoreNodeData.weakBarBot" style="padding: 5px 5px;">
                          {{ item.txt }}
                        </div>

                        <div class="flex flex-col h-full">
                            <div @click="weakBarBotEdit(true)" class="flex-1 w-5 flex justify-center items-center cursor-pointer hover:bg-gray-200 duration-300"
                                style="border-left: 1px solid rgb(217, 217, 217);">
                                <img src="assets/music_score_editor/img/arrow_down.png" class="transform -rotate-180">
                            </div>
                            <div @click="weakBarBotEdit(false)" class="flex-1 w-5 flex justify-center items-center cursor-pointer hover:bg-gray-200 duration-300"
                                style="border-top: 1px solid rgb(217, 217, 217); border-left: 1px solid rgb(217, 217, 217);">
                                <img src="assets/music_score_editor/img/arrow_down.png">
                            </div>
                        </div>
                    </div>

                    <img src="assets/music_score_editor/img/gou.png" class="cursor-pointer" @click="changeNodeDur() | (m.ctxMenu.isShow = false)">
                  </div>
                </div>
              </template>

              <div v-if="item.childList" class="absolute right-0 translate-x-full transform-gpu bg-white">
                <div v-for="item in item.childList" @click="item.fn && item.fn() | (() => (m.ctxMenu.isShow = false))()">
                  {{ item.title }}
                </div>
              </div>
            </div>
          </template>
        </div>


        <!-- 右边琴谱 -->
        <!-- <div
          id="panZoom"
          class="body-right flex overflow-y-visible justify-center top-0 left-0"
        > -->
        <div
          id="panZoom"
          class="body-right flex overflow-y-visible w-screen h-screen justify-center top-0 left-0"
        >
          <!--左侧符号面板区域  -->
          <!-- <img
            class="left-show-img pointer hide"
            :style="keyboardShow ? 'margin-top: -208px;' : ''"
            src="assets/music_score_editor/images/left.png"
          /> -->
          <!-- 谱子区域 -->
          <div class="right-top" style="width: 1000px; margin-top: 100px; height: 700px;">
            <div
              class="right-top-content scroll flex justify-end m-4 overflow-visible"
              onmousedown.stop="rightTopContentMouseDown(event)"
              onmousemove.stop="rightTopContentmoving(event)"
              onmouseup.stop="rightTopContentMouseUp(event)"
              onmouseleave.stop="rightTopContentMouseLeave(event)"
            >
              <div
                class="abc-content rounded-md fixed flex flex-col overflow-y-auto left-0 items-center w-screen"
                style="top:84px; height: calc(100vh - 84px); background: rgb(181, 197, 211);"
              >
              <!-- <div
                class="shabi-content abc-content rounded-md fixed flex flex-col overflow-y-auto items-center"
                style="top:84px; height: calc(100vh - 84px); background: rgb(181, 197, 211);left:400px;"
              > -->
                <div style="display: none;">
                  <div id="nodeMenu" style="display: none">
                    <button
                      id="btnAddBr"
                      class="btn btn-success"
                      onclick="addBr()"
                    >
                      换行
                    </button>
                    <!-- <button id="btnSplitVoice" class="btn btn-success" onclick="splitVoice()">分声部</button> -->
                    <button
                      id="delStaff"
                      class="btn btn-danger"
                      onclick="delVoice()"
                    >
                      删除声部
                    </button>
                    <button
                      id="changeInstrBtn"
                      class="btn btn-info"
                      onclick="showInstruSelector(event)"
                    >
                      换音色
                    </button>
                    <button
                      id=""
                      class="btn btn-warning"
                      onclick="splitNode(event)"
                    >
                      上下声部
                    </button>
                    <button
                      id=""
                      class="btn btn-info"
                      onclick="setStaffNameHandle()"
                    >
                      声部名称
                    </button>
                    <!-- <button id="btnChangeSpeed" class="btn btn-info" onclick="showSpeedDiv()">变速</button> -->
                    <!-- <button id="btnChangeKey" class="btn btn-warning" onclick="showKeyDiv()">变调</button> -->
                    <!-- <button id="btnChangeMeter" class="btn btn-danger" onclick="showMeterDiv()">变拍号</button> -->
  
                    <!-- <button id="btnChangeNodeBgColor" class="btn btn-warning" onclick="showNodeBgColorPicker()">添加背景色</button>
              <button id="btnClearNodeBgColor" class="btn btn-warning" onclick="clearNodeBgColor()">清除背景色</button> -->
  
                    <!-- <button id="btnDelNode" onclick="addBr()">删除</button>
              <button id="btnInsertNode" onclick="addBr()">插入</button> -->
                  </div>
                </div>
                <!-- <input type="button" style="position: absolute;right:10px;top:10px;width: 30px;" value="+" onclick="changeScale(0.2)">
						<input type="button" style="position: absolute;right:10px;top:40px;width: 30px;" value="-" onclick="changeScale(-0.2)"> -->
                <!-- <div class="tbjpsz tbjpsz-other noselect" @click="tbjpszClick">
							<div class="check-box">
								<img :class="!isTbjpsz && 'hide'" src="assets/music_score_editor/images/tick.png" />
							</div>
							<span>同步钢琴键盘时值</span>
						</div> -->
                <div class="target_box" :style="{
                  padding: `${m.panzoom.scale / 100 * 40}px 0px ${m.panzoom.scale / 100 * 40}px 0px`,
                  transform: `scale(${m.panzoom.scale / 100})`,
                }">

                  <div
                    id="target"
                    class="panzoom-exclude box-content"
                    :class="!m.isInsertMode ? 'cbk' : 'cbe'"
                    :style="{
                      cursor: `url(assets/music_score_editor/img/${!draw_editor ? 'black' : 'blue'}.png), auto`
                    }"
                    @click.right="draw_editor || openCtxMenu($event)"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      xmlns:xlink="http://www.w3.org/1999/xlink"
                      xml:space="preserve"
                      width="18.3in"
                      height="2in"
                      viewBox="0 0 595 144"
                      id="svg_pic"
                    >
                      <text
                        x="250"
                        y="100"
                        font-family="serif"
                        font-size="12"
                      ></text>
                    </svg>
                  </div>
                </div>
                <div id="paper" style="width: 0px"></div>
                <div id="paper-speed" style="width: 0px"></div>
                <div id="midi-download" style="display: none"></div>
                <div id="midi-download-speed" style="display: none"></div>
              </div>
            </div>
            <div class="right-down-box">
              <div
                id="savetip"
                class="alert alert-danger alert-dismissible fade show"
                role="alert"
                style="
                  height: 40px;
                  display: none;
                  text-align: center;
                  position: absolute;
                  z-index: 999;
                  width: 600px;
                  right: 100px;
                "
              >
                <strong>友情提醒:</strong> 您已经有3分钟未保存数据,请及时保存.
              </div>
              <!-- <div class="mode-change compute-mobile-change play-way-box">
            <div class="play-way piano active" title="钢琴播放" onclick="setAbcPlayWay(0)"><img src="assets/music_score_editor/images/piano_play.png" /></div>
            <div class="play-way system" title="系统播放" onclick="setAbcPlayWay(1)"><img src="assets/music_score_editor/images/system_play.png" /></div>
          </div>
          <span class="play-vol">按键声音：<a href="javascript: setNoteOnVol()" style="text-decoration: underline;">关</a></span> -->
            </div>
          </div>
          <!-- 编辑器 -->
          <div class="right-bottom opacity-0 pointer-events-none" style="display: block; position: fixed; z-index: -99;">
            <label
              id="er"
              onclick="popshow('errlist', true)"
              style="
                display: none;
                background: #ff8080;
                cursor: pointer;
                position: absolute;
                left: 0;
                top: 0px;
                font-size: 14px;
              "
              >语法有错</label
            >
            <form
              action="abcservlet"
              id="abcform"
              target="target_iframe"
              method="post"
              style="height: 100%;"
            >
              <input type="hidden" id="personid" name="personid" />
              <input type="hidden" id="personname" name="personname" />
              <input type="hidden" id="groupid" name="groupid" />
              <input type="hidden" id="stafftypeid" name="stafftypeid" />
              <input
                type="hidden"
                id="createbuttontype"
                name="createbuttontype"
              />
              <input type="hidden" id="appid" name="appid" />
              <input type="hidden" id="title" name="title" />
              <input type="hidden" id="dir_str" name="dir_str" />
              <input type="hidden" id="png_attachid" name="png_attachid" />
              <input type="hidden" id="pic_url" name="pic_url" />
              <input type="hidden" id="mp3_attachid" name="mp3_attachid" />
              <input type="hidden" id="abc_attachid" name="abc_attachid" />
              <input type="hidden" id="txt_attachid" name="txt_attachid" />
              <input type="hidden" id="appid" name="appid" />
              <input type="hidden" id="nodelinedata" name="nodelinedata" />

              <input
                type="hidden"
                id="wxp_barlinecoor"
                name="wxp_barlinecoor"
              /><!-- 五线谱小节线数据 -->
              <input
                type="hidden"
                id="jp_barlinecoor"
                name="jp_barlinecoor"
              /><!-- 简谱小节线数据 -->
              <input
                type="hidden"
                id="jxhp_barlinecoor"
                name="jxhp_barlinecoor"
              /><!-- 简线混排小节线数据 -->
              <input type="hidden" id="weakbar" name="weakbar" />
              <input type="hidden" id="iecdata" name="iecdata" />
              <input type="hidden" id="exporttype" name="exporttype" />
              <input
                type="hidden"
                id="transpose"
                name="transpose"
                value="0"
              /><!-- 移调后导出midi有点问题 -->
              <input
                type="hidden"
                id="picdata"
                name="picdata"
              /><!-- 五线谱图片base64数据 -->
              <input
                type="hidden"
                id="jxhp_picdata"
                name="jxhp_picdata"
              /><!-- 简线混排图片base64数据 -->
              <input
                type="hidden"
                id="jp_picdata"
                name="jp_picdata"
              /><!-- 简谱图片base64数据 -->
              <input type="hidden" id="picdata-speed" name="picdata-speed" />
              <input
                type="hidden"
                id="overwritemp3"
                name="overwritemp3"
                value="1"
              />
              <input type="hidden" id="mp3desc" name="mp3desc" />
              <input type="hidden" id="speed" name="speed" />
              <input
                type="hidden"
                id="mustype"
                name="mustype"
              /><!-- 谱子类型：0:五线谱；1：间线混排；2：简谱 -->
              <input
                type="hidden"
                id="pictype"
                name="pictype"
              /><!-- 图片类型：compute/mobile -->

              <textarea
                id="source"
                readonly="true"
                name="source"
                rows="14"
                cols="73"
                wrap="off"
                style="
                  font: 20px monospace;
                  height: 100%;
                  width: 100% !important;
                  padding-bottom: 10px;
                "
                ondrop="dropped(event)"
                ondragenter="drag_over(event)"
                ondragover="drag_over(event)"
                oninput="abc_change()"
                onclick="source_click()"
                onmouseup="source_mouseup()"
              ></textarea>
              <textarea
                id="src1"
                rows="40"
                cols="73"
                wrap="off"
                style="font: 14px monospace; display: none"
                oninput="abc_change()"
              ></textarea>
              <textarea
                id="source-speed"
                name="source-speed"
                style="display: none"
                rows=""
                cols=""
              ></textarea>
              <textarea
                id="source-gen-midi"
                name="source-gen-midi"
                style="display: none"
                rows=""
                cols=""
              ></textarea>
              <div id="errlist" class="popup" style="width: 600px">
                <div class="close" onclick="popshow('errlist')">x</div>
                <div id="diverr" style="font-size: 14px"></div>
              </div>
            </form>
          </div>
          
          <!--  曲式分析编辑框 beg -->
          <div
            class="modal fade"
            id="MUSIC_FORM_div"
            tabindex="-1"
            role="dialog"
            aria-labelledby="MUSIC_FORM_divLabel"
          >
            <div class="modal-dialog" role="document">
              <!--  style="width:400px;height:380px;left:50%;margin-left:-200px;" -->
              <div
                class="modal-content"
                style="
                  width: 740px;
                  height: auto;
                  left: 50%;
                  margin-left: -200px;
                "
              >
                <div class="modal-header">
                  <h5 class="modal-title" id="MIDI_SETTING_divLabel">
                    绘制曲式
                  </h5>
                  <button
                    type="button"
                    class="close"
                    data-dismiss="modal"
                    aria-label="Close"
                  >
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body" style="padding-bottom: 50px">
                  <form id="mfForm">
                    <div class="comm-row comm-row-2">
                      <div class="comm-row-2-item">
                        <div class="comm-title">编号</div>
                        <input
                          v-if="!inpdisable"
                          id="number"
                          name="fieldno"
                          v-model="musicForm.fieldno"
                          class="comm-input comm-input-2"
                        />
                        <span
                          v-else="inpdisable"
                          class="disable"
                          v-html="musicForm.fieldno"
                          title="双击可编辑"
                          @dblclick="inpEdit"
                        ></span>
                        <div class="set-sub" @click="setStyle('sub')"></div>
                        <div class="set-sup" @click="setStyle('sup')"></div>
                        <div class="set-restore" @click="setStyle('restore')">
                          <i></i>
                        </div>
                      </div>
                      <div class="comm-row-2-item">
                        <div class="comm-title">颜色</div>
                        <div class="comm-input comm-input-2 js-color">
                          <input
                            id="bgcolor"
                            v-model="musicForm.bgcolor"
                            class="color"
                          />
                        </div>
                      </div>
                    </div>
                    <div class="comm-row">
                      <div class="comm-title">段落名称</div>
                      <input
                        class="comm-input"
                        v-model="musicForm.fieldname"
                        name="fieldname"
                        id="fieldname"
                      />
                    </div>
                    <div class="comm-row comm-row-2">
                      <div class="comm-row-2-item">
                        <div class="comm-title">音符起始位置</div>
                        <input
                          class="comm-input comm-input-2"
                          v-model="musicForm.startNodeIndex"
                          id="startNodeIndex"
                        />
                      </div>
                      <div class="comm-row-2-item">
                        <div class="comm-title">音符终止位置</div>
                        <input
                          class="comm-input comm-input-2"
                          v-model="musicForm.endNodeIndex"
                          id="startNodeIndex"
                        />
                      </div>
                    </div>
                    <div class="comm-row">
                      <div class="comm-title">段落内容</div>
                      <textarea
                        class="comm-textarea"
                        v-model="musicForm.fielddesc"
                        name="fielddesc"
                        id="fielddesc"
                      ></textarea>
                    </div>

                    <div class="comm-row">
                      <div class="comm-title">上传图片</div>
                      <ul class="file-ul comm-textarea" style="height: auto">
                        <li
                          v-for="( file,index) in fileUpload.showFiles"
                          @click="filePreview.init(fileUpload.showFiles, index)"
                          class="uploadnum"
                        >
                          <span v-html="setFileHtml(file)"></span>
                          <div
                            class="remove"
                            @click.stop.prevent="removeFile(file, index)"
                          >
                            <i class="ti ti-close"></i>
                          </div>
                        </li>
                        <li class="upload-add">
                          <file-upload
                            ref="upload"
                            v-show="fileUpload.showFiles.length ==0"
                            v-model="fileUpload.files"
                            :multiple="true"
                            :drop="true"
                            @input-file="inputFile"
                            :post-action="fileUpload.fileUrl"
                            :data="fileUpload.fileData"
                          >
                            <div class="image-plus" style="position: relative">
                              <div class="image-plus-horizontal"></div>
                              <div class="image-plus-vertical"></div>
                            </div>
                          </file-upload>
                        </li>
                      </ul>
                    </div>
                    <div class="pop-btn-box">
                      <div class="pop-btn save" @click="submit()">确定</div>
                      <div
                        class="pop-btn delete"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        取消
                      </div>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
          <!--  曲式分析编辑框 end -->
          <!-- 钢琴键盘展开、收起按钮  -->
          <!-- <img class="keyboard-show-img pointer" :style="keyboardShow ? 'bottom: 200px;' : ''" :src="keyboardShow ? 'assets/music_score_editor/images/bottom.png' : 'assets/music_score_editor/images/top.png'" @click="keyboardClick" /> -->
        </div>
        <!-- 属性面板 -->
        <div
          class="body-attr scroll"
          :style="{width: '0px'}"
        >
          <div class="panel-name">
            <span
              id="panelName"
              :class="{'panel-name-item js-click': true, 'active': attrPanelIndex == 0}"
              @click="attrPanelIndex = 0"
              >谱例属性</span
            >
            <span
              id="layoutPanel"
              :class="{'panel-name-item layout js-click': true, 'active': attrPanelIndex == 1}"
              @click="attrPanelIndex = 1"
              id=""
              >排版</span
            >
            <img
              src="assets/music_score_editor/images/close.png"
              title="关闭"
              class="panel-close attr-close"
            />
          </div>
          <div class="panel-body staff" v-show="attrPanelIndex == 0">
            <div class="panel-control">
              <label>谱表模板:</label>
              <select
                id="staffModule"
                class="form-control"
                onchange="switchStaffType()"
              >
                <option value="">全部</option>
                <option value="common">常用谱表</option>
                <option value="choir">合唱谱表</option>
                <option value="indoor">室内乐</option>
              </select>
            </div>
            <div class="panel-control">
              <label>谱表类型:</label>
              <select id="staffType" class="form-control">
                <option value="treble" module="common">高音谱表</option>
                <option value="bass" module="common">低音谱表</option>
                <option value="alto" module="common">中音谱表</option>
                <option value="tenor" module="common">次中音谱表</option>
                <option value="hit" module="common">打击乐</option>
                <option value="piano" module="common">钢琴用大谱表</option>
                <option value="fourstaff" module="common">四部和声谱表</option>
                <option value="satb" module="choir">SATB</option>
                <option value="satb_piano" module="choir">人声+钢琴</option>
                <option value="string" module="indoor">弦乐四重奏</option>
                <option value="wind" module="indoor">管乐四重奏</option>
              </select>
            </div>
            <div class="panel-control">
              <label>谱表数:</label>
              <input
                class="form-control"
                id="STAFFNUM"
                onchange="handleStaffChange()"
                type="number"
                step="1"
                min="1"
                max="99"
                value="1"
                style="width: 80px; text-align: center"
              />
            </div>
            <!-- <div class="panel-control">
					<label>四部和声:</label>
					<input type="checkbox" id="fourstaff" style="width: 20px;margin-left: 0px;margin-right: 0px;">
				</div> -->
            <div class="panel-control">
              <label>声部属性:</label>
              <input
                type="button"
                id="staffPropBtn"
                value="设置"
                onclick="showStaffProp()"
              />
            </div>
            <div class="panel-control" style="">
              <label>小节数:</label>
              <input
                id="nodecount"
                onchange="handleBarNum()"
                class="form-control"
                type="number"
                step="1"
                min="1"
                max="99999"
                value="8"
                style="
                  width: 165px;
                  margin-left: 8px;
                  margin-right: 0px;
                  text-align: center;
                "
              />
            </div>
            <div class="panel-control">
              <label>每行小节数:</label
              ><input
                class="form-control"
                type="number"
                id="barsperstaff"
                onchange="setBarsPerstaff('source',this.value)"
                step="1"
                min="0"
                max="99"
                value=""
                style="width: 80px; text-align: center"
              />
            </div>
            <div class="panel-control">
              <label>弱起小节:</label
              ><input
                type="checkbox"
                id="isR"
                style="width: 20px; margin-left: 0px; margin-right: 0px"
              />
            </div>
            <div class="panel-control">
              <label>弱起小节:</label>
              <input
                id="weakBarTop"
                disabled="disabled"
                type="number"
                class="form-control input-number"
                onchange="handleWeakBar()"
                step="1"
                min="1"
                max="10"
                value="1"
              />/
              <input
                id="weakBarBot"
                disabled="disabled"
                type="number"
                class="form-control input-number"
                onchange="handleWeakBar()"
                step="1"
                min="1"
                max="128"
                value="4"
              />
            </div>

            <!-- <div class="panel-control">
					<label>小节数:</label><input class="form-control" style="width: 80px;"/>
				</div> -->
            <div class="panel-control">
              <label>节拍:</label>
              <input
                id="M_mol"
                type="number"
                class="form-control input-number"
                onchange="setMValue();changeMValue()"
                step="1"
                min="1"
                max="100"
                value="2"
              />
              /
              <!-- <input id="M_den" type="number" class="form-control input-number" onchange="setMValue();changeMValue()" step="2" min="2" max="100" value="4"/> -->
              <select id="M_den" onchange="" class="form-control">
                <option value="2">2</option>
                <option value="4">4</option>
                <option value="8">8</option>
              </select>
              <input
                type="hidden"
                class="form-control"
                style="width: 20px"
                id="M"
              />
              <input
                id="M_type"
                value="1"
                type="hidden"
              /><!-- 标记节拍的类型，1为普通的节拍类型，其他的为C或C|类型 -->
            </div>
            <div class="panel-control">
              <label>散板:</label>
              <input
                type="checkbox"
                id="nometer"
                style="width: 20px; margin-left: 0px; margin-right: 0px"
              />
            </div>
            <div class="panel-control">
              <label>速度文本:</label
              ><input id="Q_DESC" class="form-control" style="width: 80px" />
            </div>
            <div class="panel-control">
              <label>速度:</label>
              <input
                type="radio"
                name="speedsh"
                value="show"
                id="speedshow"
                onchange="switchSpeedShow('show')"
              /><label for="restshow" style="width: 30px">显示</label>
              <input
                type="radio"
                name="speedsh"
                value="hide"
                id="speedhide"
                onchange="switchSpeedShow('hide')"
              /><label for="resthide" style="width: 30px">隐藏</label>
            </div>
            <div class="panel-control" id="speeddiv">
              <label>速度:</label>
              <div
                class="dropdown"
                style="width: 40px; margin-left: 0px; margin-right: 0px"
              >
                <input class="form-control" id="Q" style="display: none" />
                <input class="form-control" id="NOTE_Q" style="display: none" />
                <div
                  id="dropdownMenuButton"
                  style="width: 40px; padding: 0px; background-color: white"
                  class="btn btn-secondary dropdown-toggle"
                  type="button"
                  data-toggle="dropdown"
                  aria-haspopup="true"
                  aria-expanded="false"
                >
                  <div>
                    <img id="selectSpeedImg" src="assets/music_score_editor/images/note_1.png" />
                  </div>
                </div>
                <div
                  id="Q_DIV"
                  style="width: 80px"
                  class="dropdown-menu"
                  aria-labelledby="dropdownMenuButton"
                >
                  <a
                    class="dropdown-item"
                    href="javascript:void(0);"
                    onclick="selectSpeed(1,'1/1')"
                    val="1/1"
                    ><img src="assets/music_score_editor/images/note_1.png"
                  /></a>
                  <a
                    class="dropdown-item"
                    href="javascript:void(0);"
                    onclick="selectSpeed(2,'1/2')"
                    val="1/2"
                    ><img src="assets/music_score_editor/images/note_2.png"
                  /></a>
                  <a
                    class="dropdown-item"
                    href="javascript:void(0);"
                    onclick="selectSpeed(3,'1/4')"
                    val="1/4"
                    ><img src="assets/music_score_editor/images/note_3.png"
                  /></a>
                  <a
                    class="dropdown-item"
                    href="javascript:void(0);"
                    onclick="selectSpeed(4,'1/8')"
                    val="1/8"
                    ><img src="assets/music_score_editor/images/note_4.png"
                  /></a>
                  <a
                    class="dropdown-item"
                    href="javascript:void(0);"
                    onclick="selectSpeed(5,'1/16')"
                    val="1/16"
                    ><img src="assets/music_score_editor/images/note_5.png"
                  /></a>
                  <a
                    class="dropdown-item"
                    href="javascript:void(0);"
                    onclick="selectSpeed(6,'1/32')"
                    val="1/32"
                    ><img src="assets/music_score_editor/images/note_6.png"
                  /></a>
                  <a
                    class="dropdown-item"
                    href="javascript:void(0);"
                    onclick="selectSpeed(7,'1/64')"
                    val="1/64"
                    ><img src="assets/music_score_editor/images/note_7.png"
                  /></a>
                </div>
              </div>
              <span style="min-width: auto">=</span>
              <input
                id="Q_V"
                style="
                  width: 40px;
                  display: inline;
                  padding-bottom: 11px;
                  margin-left: 0px;
                  padding-left: 0px;
                  padding-right: 0px;
                  text-align: center;
                "
                class="form-control"
              />
            </div>
            <div class="panel-control">
              <label>速度:</label>
              <div>
                <select
                  id="plsxspeedtype"
                  class="form-control"
                  onchange="setSpeedValue(this,'Q_V');synSpeed(this.value)"
                  style="
                    width: 108px;
                    display: inline;
                    height: 40px;
                    padding-top: 6px;
                    padding-left: 1px;
                  "
                >
                  <option value="40">庄板(极慢板)</option>
                  <option value="46">广板</option>
                  <option value="52">慢板</option>
                  <option value="56">柔板</option>
                  <option value="60">小广板</option>
                  <option value="66">行板</option>
                  <option value="69">小行板</option>
                  <option value="88" selected="selected">中板</option>
                  <option value="108">小快板</option>
                  <option value="132">快板</option>
                  <option value="158">活板</option>
                  <option value="184">急板</option>
                  <option value="208">最急板</option>
                </select>
                <br />
                <select
                  id="plsxspeedtype_en"
                  class="form-control"
                  onchange="setSpeedValue(this,'Q_V');synSpeed(this.value)"
                  style="
                    width: 108px;
                    display: inline;
                    height: 40px;
                    padding-top: 6px;
                    padding-left: 1px;
                  "
                >
                  <option value="40">Grave</option>
                  <option value="46">Largo</option>
                  <option value="52">Lento</option>
                  <option value="56">Adagio</option>
                  <option value="60">Larghtto</option>
                  <option value="66">Andante</option>
                  <option value="69">Andantino</option>
                  <option value="88" selected="selected">Moderato</option>
                  <option value="108">Allegretto</option>
                  <option value="132">Allegro</option>
                  <option value="160">Vivace</option>
                  <option value="184">Presto</option>
                  <option value="208">Prestissimo</option>
                </select>
              </div>
            </div>
            <div class="panel-control">
              <label>调号:</label>
              <select id="K" class="form-control" style="width: 80px">
                <option value="C">C</option>
                <option style="display: none" value="C">Am</option>
                <option style="display: none" value="C">CMAJOR</option>
                <option style="display: none" value="C">Cmaj</option>
                <option style="display: none" value="C">Cmajor</option>
                <option style="display: none" value="C">C Ionian</option>
                <option value="G">G</option>
                <option style="display: none" value="G">Em</option>
                <option style="display: none" value="G">GMAJOR</option>
                <option style="display: none" value="G">Gmaj</option>
                <option style="display: none" value="G">Gmajor</option>
                <option style="display: none" value="G">G Ionian</option>
                <option value="D">D</option>
                <option style="display: none" value="D">Bm</option>
                <option style="display: none" value="D">DMAJOR</option>
                <option style="display: none" value="D">Dmaj</option>
                <option style="display: none" value="D">Dmajor</option>
                <option style="display: none" value="D">D Ionian</option>
                <option value="A">A</option>
                <option style="display: none" value="A">F#m</option>
                <option style="display: none" value="A">AMAJOR</option>
                <option style="display: none" value="A">Amaj</option>
                <option style="display: none" value="A">Amajor</option>
                <option style="display: none" value="A">A Ionian</option>
                <option value="E">E</option>
                <option style="display: none" value="E">C#m</option>
                <option style="display: none" value="E">EMAJOR</option>
                <option style="display: none" value="E">Emaj</option>
                <option style="display: none" value="E">Emajor</option>
                <option style="display: none" value="E">E Ionian</option>
                <option value="B">B</option>
                <option style="display: none" value="B">G#m</option>
                <option style="display: none" value="B">BMAJOR</option>
                <option style="display: none" value="B">Bmaj</option>
                <option style="display: none" value="B">Bmajor</option>
                <option style="display: none" value="B">B Ionian</option>
                <option value="F#">#F</option>
                <option style="display: none" value="F#">D#m</option>
                <option style="display: none" value="F#">F#MAJOR</option>
                <option style="display: none" value="F#">F#maj</option>
                <option style="display: none" value="F#">F#major</option>
                <option style="display: none" value="F#">F# Ionian</option>
                <option value="C#">#C</option>
                <option style="display: none" value="C#">A#m</option>
                <option style="display: none" value="C#">C#MAJOR</option>
                <option style="display: none" value="C#">C#maj</option>
                <option style="display: none" value="C#">C#major</option>
                <option style="display: none" value="C#">C# Ionian</option>
                <option value="F">F</option>
                <option style="display: none" value="C#">Dm</option>
                <option style="display: none" value="C#">C#MAJOR</option>
                <option style="display: none" value="C#">C#maj</option>
                <option style="display: none" value="C#">C#major</option>
                <option style="display: none" value="C#">C# Ionian</option>
                <option value="Bb">bB</option>
                <option style="display: none" value="Bb">Gm</option>
                <option style="display: none" value="Bb">BbMAJOR</option>
                <option style="display: none" value="Bb">Bbmaj</option>
                <option style="display: none" value="Bb">Bbmajor</option>
                <option style="display: none" value="Bb">Bb Ionian</option>
                <option value="Eb">bE</option>
                <option style="display: none" value="Eb">Cm</option>
                <option style="display: none" value="Eb">EbMAJOR</option>
                <option style="display: none" value="Eb">Ebmaj</option>
                <option style="display: none" value="Eb">Ebmajor</option>
                <option style="display: none" value="Eb">Eb Ionian</option>
                <option value="Ab">bA</option>
                <option style="display: none" value="Ab">Fm</option>
                <option style="display: none" value="Ab">AbMAJOR</option>
                <option style="display: none" value="Ab">Abmaj</option>
                <option style="display: none" value="Ab">Abmajor</option>
                <option style="display: none" value="Ab">Ab Ionian</option>
                <option value="Db">bD</option>
                <option style="display: none" value="Db">Bbm</option>
                <option style="display: none" value="Db">DbMAJOR</option>
                <option style="display: none" value="Db">Dbmaj</option>
                <option style="display: none" value="Db">Dbmajor</option>
                <option style="display: none" value="Db">Db Ionian</option>
                <option value="Gb">bG</option>
                <option style="display: none" value="Gb">Ebm</option>
                <option style="display: none" value="Gb">GbMAJOR</option>
                <option style="display: none" value="Gb">Gbmaj</option>
                <option style="display: none" value="Gb">Gbmajor</option>
                <option style="display: none" value="Gb">Gb Ionian</option>
                <option value="Cb">bC</option>
                <option style="display: none" value="Cb">Abm</option>
                <option style="display: none" value="Cb">CbMAJOR</option>
                <option style="display: none" value="Cb">Cbmaj</option>
                <option style="display: none" value="Cb">Cbmajor</option>
                <option style="display: none" value="Cb">Cb Ionian</option>
              </select>
            </div>
            <div id="dopos_m" class="panel-control">
              <label>简谱do所在区域:</label>
              <div>
                <input
                  type="radio"
                  style="width:20px;margin-right：1px;"
                  name="doPos"
                  value="lower"
                  onclick="changeYG($('#K').val())"
                />小字组<br />
                <input
                  style="width:20px;margin-right：1px;"
                  type="radio"
                  name="doPos"
                  value="higher"
                  onclick="changeYG($('#K').val())"
                />小字一组
              </div>
            </div>
          </div>
          <!-- 属性面板=>排版 -->
          <div class="panel-body layout" v-show="attrPanelIndex == 1">
            <div class="panel-control">
              <label>标题字体:</label>
              <input
                id="titleFontSize"
                class="form-control"
                type="number"
                onchange="setTitleFontSize()"
                step="1"
                min="1"
                max="50"
                value="28"
                style="width: 80px"
              />
            </div>
            <div class="panel-control">
              <label>标题颜色:</label>
              <input
                id="titleColor"
                class="form-control"
                type="text"
                style="width: 75px"
              />
            </div>
            <div class="panel-control">
              <label>歌词字体:</label>
              <input
                id="lyricFontSize"
                class="form-control"
                type="number"
                onchange="setLyricFontSize()"
                step="1"
                min="1"
                max="50"
                value="14"
                style="width: 80px"
              />
            </div>
            <div class="panel-control">
              <label>歌词颜色:</label>
              <input
                id="lyricColor"
                class="form-control"
                id="lyricColor"
                type="text"
                value=""
                onchange=""
                style="width: 75px"
              />
            </div>
            <div class="panel-control">
              <label>标注字体:</label>
              <input
                id="bracketGchFontSize"
                class="form-control"
                type="number"
                onchange="setBracketGchSize()"
                step="1"
                min="1"
                max="50"
                value="14"
                style="width: 80px"
              />
            </div>
            <div class="panel-control">
              <label>反复标记字体大小:</label>
              <input
                id="dacsFontSize"
                class="form-control"
                type="number"
                onchange="setDacsFontSize()"
                step="1"
                min="1"
                max="50"
                value="16"
                style="width: 80px"
              />
            </div>
            <div class="panel-control">
              <label>标题与顶部间距:</label
              ><input
                style="width: 80px"
                type="number"
                step="1"
                min="0"
                max="200"
                value="0"
                onchange="changeTitleSpace(this.value)"
                class="form-control line_height"
              />
            </div>
            <div class="panel-control">
              <label>谱表与标题间距:</label
              ><input
                style="width: 80px"
                type="number"
                step="1"
                min="0"
                max="200"
                value="0"
                onchange="changeMusicSpace(this.value)"
                class="form-control line_height"
              />
            </div>
            <div class="panel-control">
              <label>标题与作曲间距:</label
              ><input
                style="width: 80px"
                type="number"
                step="1"
                min="0"
                max="200"
                value="0"
                onchange="changeComposerSpace(this.value)"
                class="form-control line_height"
              />
            </div>
            <div class="panel-control">
              <label>左边距:</label
              ><input
                style="width: 80px"
                type="number"
                step="1"
                min="1"
                max="200"
                value="20"
                onchange="changeStaffMargin(this.value,'')"
                class="form-control line_height"
              />
            </div>
            <div class="panel-control">
              <label>右边距:</label
              ><input
                style="width: 80px"
                type="number"
                step="1"
                min="1"
                max="200"
                value="10"
                onchange="changeStaffMargin('',this.value)"
                class="form-control line_height"
              />
            </div>
            <div class="panel-control">
              <label>底边距:</label
              ><input
                style="width: 80px"
                type="number"
                step="1"
                min="1"
                max="200"
                value="0"
                onchange="changeStaffBotMargin(this.value)"
                class="form-control line_height"
              />
            </div>
            <div class="panel-control">
              <label>行间距:</label
              ><input
                style="width: 80px"
                type="number"
                step="1"
                min="1"
                max="200"
                value="46"
                onchange="changeStaffSep(this.value)"
                class="form-control line_height"
              />
            </div>
            <div class="panel-control">
              <label>小节间距:</label>
              <div>
                <input
                  type="radio"
                  name="equalbarsradio"
                  value="0"
                  id="equalbars0"
                  onchange="setEqualBars(0)"
                /><label for="equalbars0" style="width: 90px">不等间距</label
                ><br />
                <input
                  type="radio"
                  name="equalbarsradio"
                  value="1"
                  id="equalbars1"
                  onchange="setEqualBars(1)"
                /><label for="equalbars1" style="width: 90px">等间距</label>
              </div>
            </div>
            <input
              id="nodecolorselecter"
              onchange="setNodeBgColor()"
              class="form-control"
              type="color"
              value="000000"
              style="width: 75px; display: none"
            />
            <input
              id="notecolorselecter"
              onchange="setNoteColor()"
              class="form-control"
              type="color"
              value="000000"
              style="width: 75px; display: none"
            />
          </div>
          <!-- 属性面板=>排版 -->
          <div class="panel-body slur" style="display: none">
            <div class="panel-control">
              <label>弧度:</label
              ><input
                style="width: 80px"
                type="number"
                step="0.1"
                min="1.0"
                max="10.0"
                value="1.0"
                onchange="changeSlurHeight(this.value)"
                class="slurheightVal"
              />
            </div>
            <div class="panel-control">
              <label>位置:</label>
              <input
                type="radio"
                name="slurdirect"
                value="up"
                id="slurdirup"
                onchange="setSlurDirect('up')"
              /><label for="slurdirup" style="width: 15px">上</label>
              <input
                type="radio"
                name="slurdirect"
                value="down"
                id="slurdirdown"
                onchange="setSlurDirect('down')"
              /><label for="slurdirdown" style="width: 15px">下</label>
              <input
                type="radio"
                name="slurdirect"
                value="auto"
                id="slurdirauto"
                onchange="setSlurDirect('auto')"
              /><label for="slurdirauto" style="width: 28px">自动</label><br />
            </div>
          </div>
          <div class="panel-body note" style="display: none">
            <div class="panel-control">
              <label>定位:</label>
              <div>
                <a style="cursor: pointer" href="javascript:localtosource()"
                  >定位到语法框</a
                >
              </div>
            </div>
            <div class="panel-control stemdir">
              <label>符干方向:</label>
              <div>
                <input
                  type="radio"
                  name="stemdirect"
                  value="up"
                  id="stemdirup"
                  onchange="setNoteStemDirect('up')"
                /><label for="stemdirup">上</label><br />
                <input
                  type="radio"
                  name="stemdirect"
                  value="down"
                  id="stemdirdown"
                  onchange="setNoteStemDirect('down')"
                /><label for="stemdirdown">下</label><br />
                <input
                  type="radio"
                  name="stemdirect"
                  value="auto"
                  id="stemdirauto"
                  onchange="setNoteStemDirect('auto')"
                /><label for="stemdirauto">自动</label><br />
              </div>
            </div>
            <div class="panel-control">
              <label>音高:</label>
              <div>
                <input
                  type="radio"
                  name="notepitch"
                  value="1"
                  id="uppitch1"
                  onclick="upDownKeyWord(1)"
                /><label for="uppitch1" style="cursor: pointer">升高1度</label
                ><br />
                <input
                  type="radio"
                  name="notepitch"
                  value="-1"
                  id="downpitch1"
                  onclick="upDownKeyWord(-1)"
                /><label for="downpitch1" style="cursor: pointer">降低1度</label
                ><br />
                <input
                  type="radio"
                  name="notepitch"
                  value="12"
                  id="uppitch8"
                  onclick="upDownKeyWord(12)"
                /><label for="uppitch8" style="cursor: pointer">升高8度</label
                ><br />
                <input
                  type="radio"
                  name="notepitch"
                  value="-12"
                  id="downpitch8"
                  onclick="upDownKeyWord(-12)"
                /><label for="downpitch8" style="cursor: pointer">降低8度</label
                ><br />
              </div>
            </div>
            <div class="panel-control notemove">
              <label>左右移动:</label>
              <div>
                <a style="cursor: pointer" href="javascript:mNoteLeft()"
                  >&larr;</a
                >
                <a style="cursor: pointer" href="javascript:mNoteRight()"
                  >&rarr;</a
                >
              </div>
            </div>
            <div class="panel-control notedurmove">
              <label>时值:</label>
              <div>
                <a style="cursor: pointer" href="javascript:noteDurMove(-1)"
                  >&larr;</a
                >
                <a style="cursor: pointer" href="javascript:noteDurMove(1)"
                  >&rarr;</a
                >
              </div>
            </div>
            <div class="panel-control noteJpText">
              <label>显示文本:</label>
              <div>
                <input
                  type="text"
                  id="noteJpText"
                  onblur="setNoteJpText()"
                  style="width: 100px"
                  class="form-control"
                />
              </div>
            </div>
            <div class="panel-control noteJpText">
              <label>文本音色:</label>
              <div>
                <input
                  type="text"
                  id="noteJpTextMidi"
                  onblur="setNoteJpTextMidi()"
                  style="width: 100px"
                  class="form-control"
                />
              </div>
            </div>
            <div class="panel-control notedurmove">
              <label title="仅渲染选中音符">背景色1:</label>
              <div>
                <input
                  id="noteBgColorInput"
                  type="text"
                  class="form-control"
                  style="width: 58px; padding: 0px"
                  autocomplete="off"
                />
                <input
                  value="清除"
                  onclick="clearNoteBgColor(1)"
                  type="button"
                />
              </div>
            </div>
            <div class="panel-control notedurmove">
              <label title="">背景色2:</label>
              <div>
                <input
                  id="noteBgColorInput2"
                  type="text"
                  class="form-control"
                  style="width: 58px; padding: 0px"
                  autocomplete="off"
                />
                <input
                  value="清除"
                  onclick="clearNoteBgColor(2)"
                  type="button"
                />
              </div>
            </div>
            <div class="panel-control">
              <form name="theform" style="display: none">
                <input type="radio" name="myradio" value="local_name" />
                上传文件名字保持本地文件名字
                <input
                  type="radio"
                  name="myradio"
                  value="random_name"
                  checked="true"
                />
                上传文件名字是随机文件名
                <br />
                上传到指定目录:<input
                  type="text"
                  id="dirname"
                  placeholder="如果不填，默认是上传到根目录"
                  value="files/abcimg"
                  size="50"
                />

                <div id="container">
                  <input id="selectfiles" type="file" style="display: none" />
                  <a id="postfiles" href="javascript:void(0);" class="btn"
                    >开始上传</a
                  >
                </div>
              </form>

              <label>图片:</label>
              <div style="display: block; width: 100px">
                <input
                  value="选择文件"
                  type="button"
                  onclick="$('#selectfiles').click()"
                />
                <input value="上传" type="button" onclick="uploadNotePic()" />
                <pre id="console"></pre>
                <div id="ossfile">
                  你的浏览器不支持flash,Silverlight或者HTML5！
                </div>
              </div>
            </div>
          </div>
          <div class="panel-body deco" style="display: none">
            <div class="panel-control">
              <label>显示位置:</label>
              <div>
                <input
                  type="radio"
                  name="decodirect"
                  value="up"
                  id="decodirup"
                  onchange="setDecoStemDirect('up')"
                /><label for="decodirup" style="width: 15px">上</label>
                <input
                  type="radio"
                  name="decodirect"
                  value="down"
                  id="decodirdown"
                  onchange="setDecoStemDirect('down')"
                /><label for="decodirdown" style="width: 15px">下</label>
                <input
                  type="radio"
                  name="decodirect"
                  value="auto"
                  id="decodirauto"
                  onchange="setDecoStemDirect('auto')"
                /><label for="decodirauto" style="width: 28px">自动</label
                ><br />
              </div>
            </div>
            <div
              class="panel-control"
              style="display: none"
              id="fermatatimediv"
            >
              <label>延长时值:</label>
              <div>
                <input
                  id="fermatatimeInput"
                  style="width: 80px"
                  type="number"
                  step="0.1"
                  min="1.0"
                  max="10.0"
                  value="1.0"
                  onchange="changeFermatatime(this.value)"
                />
              </div>
            </div>
          </div>
          <div class="panel-body rest" style="display: none">
            <div class="panel-control">
              <label>显示:</label>
              <div>
                <input
                  type="radio"
                  name="restsh"
                  value="show"
                  id="restshow"
                  onchange="switchRestShow('show')"
                /><label for="restshow" style="width: 30px">显示</label>
                <input
                  type="radio"
                  name="restsh"
                  value="hide"
                  id="resthide"
                  onchange="switchRestShow('hide')"
                /><label for="resthide" style="width: 30px">隐藏</label>
              </div>
            </div>
          </div>
          <div class="panel-body bar" style="display: none">
            <div class="panel-control">
              <label>换行:</label>
              <div>
                <input type="checkbox" id="notebr" onclick="switchNoteBr()" />
              </div>
            </div>
            <div class="panel-control" id="splcenter">
              <label>简谱居中显示:</label>
              <div>
                <input
                  type="radio"
                  name="splcenterop"
                  value="center"
                  id="splnotecenter"
                  onchange="switchSplNoteCenter('center')"
                /><label for="barrestshow" style="width: 30px">居中</label>
                <input
                  type="radio"
                  name="splcenterop"
                  value="auto"
                  id="splnoteauto"
                  onchange="switchSplNoteCenter('auto')"
                /><label for="barresthide" style="width: 30px">自动</label>
              </div>
            </div>
            <div class="panel-control">
              <label>变速:</label>
              <div>
                <input value="变速" type="button" onclick="showSpeedDiv()" />
              </div>
            </div>
            <div class="panel-control">
              <label>变调:</label>
              <div>
                <input value="变调" type="button" onclick="showKeyDiv()" />
              </div>
            </div>
            <div class="panel-control">
              <label>背景色:</label>
              <div>
                <input
                  id="barBgColorInput"
                  type="text"
                  class="form-control"
                  style="width: 40px"
                  autocomplete="off"
                />
                <input
                  value="清除"
                  onclick="clearNodeBgColor()"
                  type="button"
                />
              </div>
            </div>
            <div class="panel-control">
              <label>休止符:</label>
              <div>
                <input
                  type="radio"
                  name="barrestsh"
                  value="show"
                  id="barrestshow"
                  onchange="switchBarRestShow('show')"
                /><label for="barrestshow" style="width: 30px">显示</label>
                <input
                  type="radio"
                  name="barrestsh"
                  value="hide"
                  id="barresthide"
                  onchange="switchBarRestShow('hide')"
                /><label for="barresthide" style="width: 30px">隐藏</label>
              </div>
            </div>
            <div class="panel-control">
              <label>宽度:</label>
              <div>
                <input
                  type="number"
                  step="1"
                  min="0"
                  max="500"
                  value=""
                  class="comm comm-short comm-center"
                  style="width: 80px; display: none"
                  id="barWidthInput"
                  onchange="setBarWidth()"
                />
                <input
                  type="number"
                  step="0.01"
                  min="0.5"
                  max="5.0"
                  value="1.00"
                  class="comm comm-short comm-center"
                  style="width: 80px"
                  id="barWidthInput2"
                  onchange="setBarWidth2()"
                />
              </div>
            </div>
            <div class="panel-control">
              <label>高度(上):</label>
              <div>
                <input
                  type="number"
                  step="1"
                  min="0"
                  max="500"
                  value=""
                  class="comm comm-short comm-center"
                  style="width: 80px"
                  id="barHeightTopInput"
                  onchange="setBarHeight('top')"
                />
              </div>
            </div>
            <div class="panel-control">
              <label>高度(下):</label>
              <div>
                <input
                  type="number"
                  step="1"
                  min="0"
                  max="500"
                  value=""
                  class="comm comm-short comm-center"
                  style="width: 80px"
                  id="barHeightBotInput"
                  onchange="setBarHeight('bot')"
                />
              </div>
            </div>
          </div>
          <div class="panel-body gch" style="display: none">
            <div class="panel-control">
              <label>文本:</label>
              <div>
                <input
                  type="text"
                  id="gchText"
                  class="form-control"
                  onblur="changeSGch()"
                  onkeydown="syncText()"
                />
              </div>
            </div>
            <div class="panel-control">
              <label>显示位置:</label>
              <div>
                <input
                  type="radio"
                  name="gchdirect"
                  value="^"
                  id="gchdirup"
                  onchange="changeSGch()"
                /><label for="gchdirup" style="width: 15px">上</label>
                <input
                  type="radio"
                  name="gchdirect"
                  value="_"
                  id="gchdirdown"
                  onchange="changeSGch()"
                /><label for="gchdirdown" style="width: 15px">下</label>
              </div>
            </div>
            <div class="panel-control">
              <label>字体大小:</label>
              <div>
                <input
                  type="number"
                  step="1"
                  min="10"
                  max="100"
                  value="14"
                  class="comm comm-short comm-center"
                  style="width: 80px"
                  id="gchfontsize"
                  onchange="changeSGch()"
                />
              </div>
            </div>
            <div class="panel-control">
              <label>字体类型:</label>
              <div>
                <input
                  type="radio"
                  name="gchfonttype"
                  id="gchfonttype1"
                  value=""
                  checked="checked"
                  onchange="changeSGch()"
                /><label for="gchfonttype1">普通字体</label><br />
                <input
                  type="radio"
                  name="gchfonttype"
                  id="gchfonttype2"
                  value="∆"
                  onchange="changeSGch()"
                /><label for="gchfonttype2">美术字体</label>
              </div>
            </div>
            <!-- <div class="panel-control">
					<label>位置调整:</label>
					<div>
						<a style="cursor: pointer;" href="javascript:setGchPos('down')">&#8595;</a>&nbsp;
						<a style="cursor: pointer;" href="javascript:setGchPos('up')">&#8593;</a>&nbsp;
						<a style="cursor: pointer;" href="javascript:setGchPos('left')">&larr;</a>&nbsp;
						<a style="cursor: pointer;" href="javascript:setGchPos('right')">&rarr;</a>&nbsp;
					</div>
				</div> -->
          </div>
          <!-- 歌词 -->
          <div class="panel-body lyricpropertyes" style="display: none">
            <div class="panel-control">
              <label>文本:</label>
              <div>
                <input
                  type="text"
                  id="lyricText"
                  class="form-control"
                  onblur="changeSlyric()"
                />
                <input type="hidden" id="lyricBgColor" />
                <input type="hidden" id="editorLyricIstart" />
                <input type="hidden" id="editorLyricIend" />
              </div>
            </div>
            <div class="panel-control">
              <label>上标:</label>
              <div>
                <input
                  type="text"
                  id="lyricTextUp"
                  class="form-control"
                  onblur="changeSlyric()"
                />
              </div>
            </div>
            <div class="panel-control">
              <label>下标:</label>
              <div>
                <input
                  type="text"
                  id="lyricTextDown"
                  class="form-control"
                  onblur="changeSlyric()"
                />
              </div>
            </div>
            <div class="panel-control">
              <label>对齐:</label>
              <div>
                <!-- <input type="radio" name="lyricAlign" value="left" id="lyricAlignLeft" onchange="switchLyricAlign('left')"><label for="lyricAlignLeft" style="width: 50px;">左对齐</label><br> -->
                <input
                  type="radio"
                  name="lyricAlign"
                  value="right"
                  id="lyricAlignRight"
                  onchange="switchLyricAlign('right')"
                /><label for="lyricAlignRight" style="width: 50px">右对齐</label
                ><br />
                <input
                  type="radio"
                  name="lyricAlign"
                  value="center"
                  id="lyricAlignCenter"
                  onchange="switchLyricAlign('center')"
                /><label for="lyricAlignCenter" style="width: 65px"
                  >居中对齐</label
                >
              </div>
            </div>
            <div class="panel-control">
              <label>背景色:</label>
              <div>
                <input
                  id="lyricBgColorInput"
                  type="text"
                  class="form-control"
                  style="width: 58px; padding: 0px"
                  autocomplete="off"
                />
                <input
                  value="清除"
                  onclick="clearLyricBgColor()"
                  type="button"
                />
              </div>
            </div>
            <div class="panel-control">
              <label>颜色:</label>
              <div>
                <input
                  id="singleLyricColorInput"
                  type="text"
                  class="form-control"
                  style="width: 58px; padding: 0px"
                  autocomplete="off"
                />
                <input
                  value="清除"
                  onclick="clearSingleLyricColor()"
                  type="button"
                />
              </div>
            </div>
          </div>
          <!-- 速度 -->
          <div class="panel-body speed" style="display: none">
            <div class="panel-control">
              <label>速度:</label>
              <div>
                <input
                  type="radio"
                  name="barrestsh"
                  value="show"
                  id="speedshow"
                  onchange="switchSpeedShow('show')"
                /><label for="speedshow" style="width: 30px">显示</label>
                <input
                  type="radio"
                  name="barrestsh"
                  value="hide"
                  id="speedhide"
                  onchange="switchSpeedShow('hide')"
                /><label for="speedhide" style="width: 30px">隐藏</label>
              </div>
            </div>
          </div>
          <!-- 小节线 -->
          <div class="panel-body nodeline" style="display: none">
            <div class="panel-control">
              <label>类型:</label>
              <div>
                <select id="nodelineType" onchange="changeNodeLineType(this)">
                  <option value="|">普通小节线</option>
                  <option value=".|">虚线小节线</option>
                  <option value="||">双小节线</option>
                  <option value="|]">终止小节线</option>
                  <option value="|:">开始反复</option>
                  <option value=":|">结束反复</option>
                  <option value=":||:">结束-开始 反复</option>
                </select>
              </div>
            </div>
          </div>
          <!-- 文本 -->
          <div class="panel-body text" style="display: none">
            <!-- <div class="panel-control">
					<label>字体大小:</label>
					<div>
						<input type="number" step="1" min="10" max="100" value="14" class="comm comm-short comm-center" style="width:80px;" id="textfontsize" onchange="changeIWord()">
					</div>
				</div>
				<div class="panel-control">
					<label>字体类型:</label>
					<div>
						<input type="radio" name="gchfonttype" id="gchfonttype1" value="" checked="checked" onchange="changeIword()"><label for="gchfonttype1">普通字体</label><br>
      	 		  		<input type="radio" name="gchfonttype" id="gchfonttype2" value="∆" onchange="changeIword()"><label for="gchfonttype2">美术字体</label>     
					</div>
				</div>
				<div class="panel-control">
					<label>字体颜色:</label>
					<div>
						<input id="iwordColorInput" type="text" value="000000" onchange="setIwordColor()" class="form-control color" style="width: 40px; background-image: none; background-color: rgb(0, 0, 0); color: rgb(255, 255, 255);" autocomplete="off">
					</div>
				</div> -->
          </div>
        </div>
      </div>

      <!-- 谱例属性 -->
      <div class="plsx-box hide" id="plsx-box">
        <div class="plsx-title">乐谱属性</div>
        <img
          class="plsx-close"
          @click="plsxClick"
          src="assets/music_score_editor/images/close.png"
          title="关闭"
        />
        <div class="comm comm-short">
          <span>编&nbsp;&nbsp;&nbsp;&nbsp;号:</span>
          <input
            class="form-control"
            id="X"
            type="number"
            style="width: 60px"
          />
          <!-- <span style="margin-left: 30px;">行高：</span><input id="staffsepheight" style="width:80px;margin-left: 9px;" type="number" step="1" min="45" max="200" value="46" onchange="changeStaffSep(this.value)" class="form-control"> -->
          <!-- <span style="margin-left: 16px;">小节数：</span>
			<input id="nodecount" class="form-control" type="number" step="1" min="1" max="99999" value="32" style="width:165px;margin-left:8px;margin-right: 0px;text-align: center;">  -->
        </div>
        <div class="comm">
          <span>标&nbsp;&nbsp;&nbsp;&nbsp;题:</span>
          <input
            class="form-control"
            id="T"
            type="text"
            style="width: 522px"
            onmousemove="window.event? window.event.cancelBubble = true : e.stopPropagation();"
          />
        </div>
        <div class="comm">
          <span>副标题:</span>
          <input
            class="form-control"
            id="T_S"
            type="text"
            style="width: 522px"
            onmousemove="window.event? window.event.cancelBubble = true : e.stopPropagation();"
          />
        </div>
        <div class="comm">
          <span style="vertical-align: middle"
            >作&nbsp;&nbsp;&nbsp;&nbsp;者:</span
          >
          <!-- <input class="form-control" id="C" type="text" style="width:200px;"  onmousemove="window.event? window.event.cancelBubble = true : e.stopPropagation();"/> -->
          <textarea
            id="C"
            rows=""
            cols=""
            class="form-control"
            style="
              width: 522px;
              height: 80px;
              display: inline;
              margin-left: 16px;
              vertical-align: middle;
            "
            onmousemove="window.event? window.event.cancelBubble = true : e.stopPropagation();"
          ></textarea>
        </div>
        <div class="comm comm-short">
          <!-- <span>节&nbsp;&nbsp;&nbsp;&nbsp;拍:</span>
			<input type="number" class="form-control" onchange="setMValue()" id="M_mol" step="1" min="1" max="100" value="2" style="width:60px;margin-right: 0px;text-align: center;"/>/<input class="form-control" onchange="setMValue()" id="M_den" type="number" step="1" min="1" max="100" value="4" style="width:60px;margin-left: 0px;margin-right: 0px;text-align: center;"/>
			<input type="checkbox" id="nometer" style="width: 20px;margin-left: 0px;margin-right: 0px;"><span style="margin-right: 32px;">散板</span>
			<input type="hidden" class="form-control" style="width:20px;"id="M"> -->
          <span>默认音符单位:</span>
          <select class="form-control" id="L" style="width: 184px">
            <option value="1/1">1/1</option>
            <option value="1/2">1/2</option>
            <option value="1/4">1/4</option>
            <option value="1/8">1/8</option>
            <option value="1/16">1/16</option>
            <option value="1/32">1/32</option>
            <option value="1/64">1/64</option>
          </select>
        </div>
        <br /><br />
        <div style="float: right; padding-right: 80px">
          <button type="button" style="width: 80px" onclick="showStaffProp()">
            确定
          </button>
        </div>
      </div>

      <div class="pop-window-box help-pop" v-show="isShowHelp">
        <div class="pop-window-cover"></div>
        <div class="pop-window-container">
          <div class="pop-window-header">
            <span>使用说明</span>
            <img
              title=""
              @click.stop="isShowHelp=false"
              src="assets/music_score_editor/images/close.png"
            />
          </div>
          <div class="pop-window-body">
            <ul>
              <li>
                <p>
                  <strong style="color: #44d2b6">a：&nbsp;</strong
                  ><strong>新增片段：</strong
                  >&nbsp;点击“绘制曲式”按钮，按住shift，鼠标点击某一个音符为片段的开始位置，再点击某一个音符为片段的结束位置，弹出编辑框，填写信息即可；
                </p>
              </li>
              <li>
                <p>
                  <strong style="color: #44d2b6">b：&nbsp;</strong
                  ><strong>新增下级：</strong
                  >&nbsp;先选择某一片段，开始位置定位在当前片段区间，根据第a点操作即可添加；
                </p>
              </li>
              <li>
                <p>
                  <strong style="color: #44d2b6">c：&nbsp;</strong
                  ><strong>删、改片段：</strong
                  >&nbsp;点击曲式片段，弹出操作框，可编辑、删除、全部删除；
                </p>
              </li>
              <li>
                <p>
                  <strong style="color: #44d2b6">d：&nbsp;</strong
                  ><strong>完成绘制：</strong
                  >&nbsp;设置完成后，请记得点击"完成绘制"按钮，曲式的配置才会保存下来。<strong
                    style="color: #0E518F"
                    >（如果没有点击"完成绘制"按钮，那都白做了，很重要哦！）。</strong
                  >
                </p>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <ul id="commonCtxMenu" class="dropdown-menu">
      <li>
        <a
          class="dropdown-item"
          href="#"
          id="add2commonitem"
          onclick="add2CommonMenu()"
          >添加到常用</a
        >
      </li>
      <li>
        <a
          class="dropdown-item"
          href="#"
          id="delcommonitem"
          onclick="delCommonMenu()"
          >从常用删除</a
        >
      </li>
    </ul>

    <div class="hidden">
      <ul id="ctxMenu" class="dropdown-menu">
        <li class="dropdown-submenu">
          <a class="dropdown-item">小节</a>
          <ul class="dropdown-menu">
            <li>
              <a
                class="dropdown-item"
                href="javascript:appendNodes(1);hiddenMenu();"
                >追加一小节</a
              >
            </li>
            <li>
              <a
                class="dropdown-item"
                href="javascript:popAppendNode();hiddenMenu();"
                >追加多个小节</a
              >
            </li>
            <li>
              <a
                class="dropdown-item"
                href="javascript:delSelectedNode();hiddenMenu();"
                >删除小节</a
              >
            </li>
            <li>
              <a
                class="dropdown-item"
                href="javascript:insertNodes();hiddenMenu();"
                >插入小节</a
              >
            </li>
          </ul>
        </li>
        <!-- <li><a class="dropdown-item" href="javascript:$('#plsx').click();hiddenMenu()">谱例属性</a></li> -->
        <!--  <li><a class="dropdown-item" href="javascript:popStaffProp();hiddenMenu()">谱表属性</a></li> -->
        <li class="noterelli">
          <a class="dropdown-item" href="javascript:editorCurrNoteAnnot();"
            >添加文字</a
          >
        </li>
        <li class="noterelli">
          <a class="dropdown-item" href="javascript:editCurrNoteLyric();"
            >编辑歌词</a
          >
        </li>
        <li class="noterelli">
          <a class="dropdown-item" href="javascript:copyNote();">复制音符</a>
        </li>
        <li class="noterelli">
          <a class="dropdown-item" href="javascript:pasteNote();">粘贴音符</a>
        </li>
        <li class="noterelli">
          <a class="dropdown-item" href="javascript:localtosource();hiddenMenu()"
            >定位语法框</a
          >
        </li>
        <li class="noterelli">
          <a class="dropdown-item" href="javascript:mergeNote();hiddenMenu();"
            >连接符尾</a
          >
        </li>
      </ul>
    </div>

    <!-- Modal -->
    <div
      class="modal fade"
      id="QC_div"
      tabindex="-1"
      role="dialog"
      aria-labelledby="Q_divLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content" style="min-width: 500px">
          <div class="modal-header">
            <h5 class="modal-title" id="Q_divLabel">改变速度</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <!-- 这里是内容 start -->
            <div class="comm comm-short comm-center">
              <span>速度:</span>
              <div class="dropdown" style="width: 80px">
                <!-- <input class="form-control" id="NOTE_Q" style="display: none;"/> -->
                <div
                  style="width: 80px"
                  class="btn btn-secondary dropdown-toggle"
                  type="button"
                  data-toggle="dropdown"
                  aria-haspopup="true"
                  aria-expanded="false"
                >
                  <div>
                    <img id="selectSpeedImg2" src="assets/music_score_editor/images/note_1.png" />
                  </div>
                </div>
                <div
                  style="width: 80px"
                  class="dropdown-menu"
                  aria-labelledby="dropdownMenuButton"
                >
                  <a
                    class="dropdown-item"
                    href="javascript:void(0);"
                    onclick="selectSpeed2(1,'1/1')"
                    val="1/1"
                    ><img src="assets/music_score_editor/images/note_1.png"
                  /></a>
                  <a
                    class="dropdown-item"
                    href="javascript:void(0);"
                    onclick="selectSpeed2(2,'1/2')"
                    val="1/2"
                    ><img src="assets/music_score_editor/images/note_2.png"
                  /></a>
                  <a
                    class="dropdown-item"
                    href="javascript:void(0);"
                    onclick="selectSpeed2(3,'1/4')"
                    val="1/4"
                    ><img src="assets/music_score_editor/images/note_3.png"
                  /></a>
                  <a
                    class="dropdown-item"
                    href="javascript:void(0);"
                    onclick="selectSpeed2(4,'1/8')"
                    val="1/8"
                    ><img src="assets/music_score_editor/images/note_4.png"
                  /></a>
                  <a
                    class="dropdown-item"
                    href="javascript:void(0);"
                    onclick="selectSpeed2(5,'1/16')"
                    val="1/16"
                    ><img src="assets/music_score_editor/images/note_5.png"
                  /></a>
                  <a
                    class="dropdown-item"
                    href="javascript:void(0);"
                    onclick="selectSpeed2(6,'1/32')"
                    val="1/32"
                    ><img src="assets/music_score_editor/images/note_6.png"
                  /></a>
                  <a
                    class="dropdown-item"
                    href="javascript:void(0);"
                    onclick="selectSpeed2(7,'1/64')"
                    val="1/64"
                    ><img src="assets/music_score_editor/images/note_7.png"
                  /></a>
                </div>
              </div>
              <span style="min-width: auto">=</span>
              <input
                style="
                  width: 80px;
                  display: inline;
                  padding-bottom: 11px;
                  margin-left: 16px;
                "
                class="form-control"
                id="NOTE_Q_V"
              />
              <select
                id="speedtypeselect"
                class="form-control"
                onchange="setSpeedValue(this,'NOTE_Q_V')"
                style="
                  width: 120px;
                  display: inline;
                  height: 40px;
                  padding-top: 6px;
                "
              >
                <option value="">--</option>
                <option value="40">庄板(极慢板)</option>
                <option value="46">广板</option>
                <option value="52">慢板</option>
                <option value="56">柔板</option>
                <option value="66">行板</option>
                <option value="69">小行板</option>
                <option value="88">中板</option>
                <option value="108">小快板</option>
                <option value="132">快板</option>
                <option value="158">活板</option>
                <option value="184">急板</option>
                <option value="208">最急板</option>
              </select>
              <input type="hidden" id="speedtype" value="node" />
            </div>
            <!-- 这里是内容 end -->
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-dismiss="modal"
            >
              关闭
            </button>
            <button
              type="button"
              class="btn btn-primary"
              data-dismiss="modal"
              onclick="addNodeSpeed()"
            >
              确定
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal -->
    <div
      class="modal fade"
      id="M_div"
      tabindex="-1"
      role="dialog"
      aria-labelledby="M_divLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="M_divLabel">改变拍号</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="comm comm-short">
              <span>节拍:</span>
              <input type="hidden" id="node_M" position="before" />
              <input
                type="number"
                class="form-control"
                id="node_M_mol"
                step="1"
                min="1"
                max="100"
                value="2"
                style="
                  width: 60px;
                  margin-right: 0px;
                  text-align: center;
                  display: inline-block;
                "
              />/
              <input
                class="form-control"
                id="node_M_den"
                type="number"
                step="1"
                min="1"
                max="100"
                value="4"
                style="
                  width: 60px;
                  margin-left: 0px;
                  margin-right: 0px;
                  text-align: center;
                  display: inline-block;
                "
              />
              <input
                type="checkbox"
                id="nometernode"
                style="
                  width: 20px;
                  margin-left: 0px;
                  margin-right: 0px;
                  display: none;
                "
              /><span style="margin-right: 32px; display: none">散板</span>
              <!-- <select class="form-control" id="node_M" position="before">
				<option value="[M:2/4]">2/4</option>
				<option value="[M:3/4]">3/4</option>
				<option value="[M:4/4]">4/4</option>
				<option value="[M:5/4]">5/4</option>
				<option value="[M:6/4]">6/4</option>
				<option value="[M:3/8]">3/8</option>
				<option value="[M:6/8]">6/8</option>
				<option value="[M:9/8]">9/8</option>
				<option value="[M:12/8]">12/8</option>
			</select> -->
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-dismiss="modal"
            >
              关闭
            </button>
            <button
              type="button"
              class="btn btn-primary"
              data-dismiss="modal"
              onclick="changeNodeMeter()"
            >
              确定
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal -->
    <div
      class="modal fade"
      id="K_div"
      tabindex="-1"
      role="dialog"
      aria-labelledby="K_divLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content" style="width: 600px">
          <div class="modal-header">
            <h5 class="modal-title" id="K_divLabel">改变调号</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <!-- 这里是内容 start -->
            <div class="keySignatureOptions">
              <div class="keySignatures sharp">
                <div
                  class="keyChoice"
                  style="margin-left: 30px; width: 25px"
                  value="[K:C]"
                >
                  C
                </div>
                <div class="keyChoice" style="width: 28px" value="[K:G]">G</div>
                <div class="keyChoice" style="width: 34px" value="[K:D]">D</div>
                <div class="keyChoice" style="width: 44px" value="[K:A]">A</div>
                <div class="keyChoice" style="width: 54px" value="[K:E]">E</div>
                <div class="keyChoice" style="width: 65px" value="[K:B]">B</div>
                <div class="keyChoice" style="width: 74px" value="[K:F#]">
                  F#
                </div>
                <div class="keyChoice" style="width: 85px" value="[K:C#]">
                  C#
                </div>
              </div>
              <div class="keySignatures flat">
                <div
                  class="keyChoice"
                  style="margin-left: 30px; width: 25px"
                  value="[K:]"
                >
                  --
                </div>
                <div class="keyChoice" style="width: 28px" value="[K:F]">F</div>
                <div class="keyChoice" style="width: 34px" value="[K:Bb]">
                  bB
                </div>
                <div class="keyChoice" style="width: 44px" value="[K:Ab]">
                  bE
                </div>
                <div class="keyChoice" style="width: 54px" value="[K:Ab]">
                  bA
                </div>
                <div class="keyChoice" style="width: 65px" value="[K:Db]">
                  bD
                </div>
                <div class="keyChoice" style="width: 74px" value="[K:Gb]">
                  bG
                </div>
                <div class="keyChoice" style="width: 85px" value="[K:Cb]">
                  bC
                </div>
              </div>
            </div>
            <div id="dopos_k" style="text-align: center">
              简谱do所在区域:
              <input
                type="radio"
                style="width: 20px"
                name="doPos2"
                value="lower"
                checked="checked"
                onclick="changeYG($('#K_div .selected').text(),'doPos2')"
              />小字组
              <input
                style="width: 20px"
                type="radio"
                name="doPos2"
                value="higher"
                onclick="changeYG($('#K_div .selected').text(),'doPos2')"
              />小字一组
            </div>
            <!-- 这里是内容 end -->
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-dismiss="modal"
            >
              关闭
            </button>
            <button
              type="button"
              class="btn btn-primary"
              data-dismiss="modal"
              onclick="changeNodeKey()"
            >
              确定
            </button>
          </div>
        </div>
      </div>
    </div>
    <div
      class="modal fade"
      id="Z_div"
      tabindex="-1"
      role="dialog"
      aria-labelledby="Z_divLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content" style="width: 600px">
          <div class="modal-header">
            <h5 class="modal-title" id="Z_divLabel">移调</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body zkey">
            <!-- 这里是内容 start -->
            <div class="keySignatureOptions">
              <div class="keySignatures sharp">
                <div
                  class="keyChoice"
                  style="margin-left: 30px; width: 25px"
                  value="c"
                >
                  C
                </div>
                <!-- 以下是C大调的别名 -->
                <div style="display: none" value="c">Am</div>
                <div style="display: none" value="c">CMAJOR</div>
                <div style="display: none" value="c">Cmaj</div>
                <div style="display: none" value="c">Cmajor</div>
                <div style="display: none" value="c">C Ionian</div>
                <!-- 以上是C大调的别名 -->
                <div class="keyChoice" style="width: 28px" value="g">G</div>
                <!-- 以下是G大调的别名 -->
                <div style="display: none" value="g">Em</div>
                <div style="display: none" value="g">GMAJOR</div>
                <div style="display: none" value="g">Gmaj</div>
                <div style="display: none" value="g">Gmajor</div>
                <div style="display: none" value="g">G Ionian</div>
                <div class="keyChoice" style="width: 34px" value="d">D</div>
                <!-- 以下是D大调的别名 -->
                <div style="display: none" value="d">Bm</div>
                <div style="display: none" value="d">DMAJOR</div>
                <div style="display: none" value="d">Dmaj</div>
                <div style="display: none" value="d">Dmajor</div>
                <div style="display: none" value="d">D Ionian</div>
                <div class="keyChoice" style="width: 44px" value="a">A</div>
                <!-- 以下是A大调的别名 -->
                <div style="display: none" value="a">F#m</div>
                <div style="display: none" value="a">AMAJOR</div>
                <div style="display: none" value="a">Amaj</div>
                <div style="display: none" value="a">Amajor</div>
                <div style="display: none" value="a">A Ionian</div>
                <div class="keyChoice" style="width: 54px" value="e">E</div>
                <!-- 以下是E大调的别名 -->
                <div style="display: none" value="e">C#m</div>
                <div style="display: none" value="e">EMAJOR</div>
                <div style="display: none" value="e">Emaj</div>
                <div style="display: none" value="e">Emajor</div>
                <div style="display: none" value="e">E Ionian</div>
                <div class="keyChoice" style="width: 65px" value="b,">B</div>
                <!-- 以下是B大调的别名 -->
                <div style="display: none" value="b,">G#m</div>
                <div style="display: none" value="b,">BMAJOR</div>
                <div style="display: none" value="b,">Bmaj</div>
                <div style="display: none" value="b,">Bmajor</div>
                <div style="display: none" value="b,">B Ionian</div>
                <div class="keyChoice" style="width: 74px" value="^f">#F</div>
                <!-- 以下是F#的别名 -->
                <div style="display: none" value="^f">D#m</div>
                <div style="display: none" value="^f">F#MAJOR</div>
                <div style="display: none" value="^f">F#maj</div>
                <div style="display: none" value="^f">F#major</div>
                <div style="display: none" value="^f">F# Ionian</div>
                <div class="keyChoice" style="width: 85px" value="^c">#C</div>
                <!-- 以下是C#的别名 -->
                <div style="display: none" value="^c">A#m</div>
                <div style="display: none" value="^c">C#MAJOR</div>
                <div style="display: none" value="^c">C#maj</div>
                <div style="display: none" value="^c">C#major</div>
                <div style="display: none" value="^c">C# Ionian</div>
              </div>
              <div class="keySignatures flat">
                <div
                  class="keyChoice"
                  style="margin-left: 30px; width: 25px"
                  value=""
                >
                  --
                </div>
                <div class="keyChoice" style="width: 28px" value="f">F</div>
                <!-- 以下是F的别名 -->
                <div style="display: none" value="f">Dm</div>
                <div style="display: none" value="f">FMAJOR</div>
                <div style="display: none" value="f">Fmaj</div>
                <div style="display: none" value="f">Fmajor</div>
                <div style="display: none" value="f">F Ionian</div>
                <div class="keyChoice" style="width: 34px" value="_b,">Bb</div>
                <!-- 以下是Bb的别名 -->
                <div style="display: none" value="_b,">Gm</div>
                <div style="display: none" value="_b,">BbMAJOR</div>
                <div style="display: none" value="_b,">Bbmaj</div>
                <div style="display: none" value="_b,">Bbmajor</div>
                <div style="display: none" value="_b,">Bb Ionian</div>
                <div class="keyChoice" style="width: 44px" value="_e">Eb</div>
                <!-- 以下是Eb的别名 -->
                <div style="display: none" value="_e">Cm</div>
                <div style="display: none" value="_e">EbMAJOR</div>
                <div style="display: none" value="_e">Ebmaj</div>
                <div style="display: none" value="_e">Ebmajor</div>
                <div style="display: none" value="_e">Eb Ionian</div>
                <div class="keyChoice" style="width: 54px" value="_a,">Ab</div>
                <!-- 以下是Ab的别名 -->
                <div style="display: none" value="_a,">Fm</div>
                <div style="display: none" value="_a,">AbMAJOR</div>
                <div style="display: none" value="_a,">Abmaj</div>
                <div style="display: none" value="_a,">Abmajor</div>
                <div style="display: none" value="_a,">Ab Ionian</div>
                <div class="keyChoice" style="width: 65px" value="_d">Db</div>
                <!-- 以下是Db的别名 -->
                <div style="display: none" value="_d">Bbm</div>
                <div style="display: none" value="_d">DbMAJOR</div>
                <div style="display: none" value="_d">Dbmaj</div>
                <div style="display: none" value="_d">Dbmajor</div>
                <div style="display: none" value="_d">Db Ionian</div>
                <div class="keyChoice" style="width: 74px" value="_g">Gb</div>
                <!-- 以下是Gb的别名 -->
                <div style="display: none" value="_g">Ebm</div>
                <div style="display: none" value="_g">GbMAJOR</div>
                <div style="display: none" value="_g">Gbmaj</div>
                <div style="display: none" value="_g">Gbmajor</div>
                <div style="display: none" value="_g">Gb Ionian</div>
                <div class="keyChoice" style="width: 85px" value="_c">Cb</div>
                <!-- 以下是Gb的别名 -->
                <div style="display: none" value="_c">Abm</div>
                <div style="display: none" value="_c">CbMAJOR</div>
                <div style="display: none" value="_c">Cbmaj</div>
                <div style="display: none" value="_c">Cbmajor</div>
                <div style="display: none" value="_c">Cb Ionian</div>
              </div>
            </div>
            <!-- 这里是内容 end -->
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-dismiss="modal"
            >
              关闭
            </button>
            <button
              type="button"
              class="btn btn-primary"
              data-dismiss="modal"
              onclick="changeZKey()"
            >
              确定
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- 小节线数据 -->
    <div
      class="modal center-modal bd-example-modal-lg fade"
      id="N_div"
      tabindex="-1"
      role="dialog"
      aria-labelledby="N_divLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content" style="width: 1200px; height: 830px">
          <div class="modal-header">
            <h5 class="modal-title" id="N_divLabel">小节线数据</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <!-- 这里是内容 start -->
            <div style="float: left">
              <textarea
                rows="25"
                cols="75"
                id="nodelinedata_tmp"
                onclick="lightNode()"
              ></textarea>
            </div>
            <canvas id="pre" style="" width="300px" height="50px"></canvas
            ><br />
            <div
              style="width: 1130px; height: 550px; float: left; overflow: auto"
            >
              <div style="position: relative">
                <img alt="" id="imgpreview" src="" />
                <div
                  id="candiv"
                  style="
                    position: absolute;
                    width: 0;
                    height: 0px;
                    background: #0E518F;
                    opacity: 0.3;
                  "
                  onclick=""
                ></div>
              </div>
            </div>

            <!-- 这里是内容 end -->
          </div>
          <div class="modal-footer">
            <!-- <button type="button" class="btn btn-primary" onclick="resetNodeLineDataIndex()" id="resetIndexBtn">索引号重新排列</button> -->
            <button
              type="button"
              class="btn btn-primary"
              onclick="resetNodeLineData()"
              id="resetBtn"
            >
              重新获取
            </button>
            <button
              type="button"
              class="btn btn-primary"
              onclick="startPreview()"
              id="previewBtn"
            >
              预览
            </button>
            <button
              type="button"
              class="btn btn-primary"
              data-dismiss="modal"
              onclick="setNodelineData()"
            >
              保存
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- 智能纠错数据 -->
    <!-- <div class="modal fade" id="IEC_div" tabindex="-1" role="dialog" aria-labelledby="IEC_divLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content" style="width:1000px;height:580px;">
      <div class="modal-header">
        <h5 class="modal-title" id="IEC_divLabel">智能纠错数据</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
      这里是内容 start
      <iframe src="iec.html" style="width:100%;height: 440px;overflow-y:scroll;border: 0px;" id="iecFrame"></iframe>
	  这里是内容 end
      
	      <div class="modal-footer">
	        <button type="button" class="btn btn-primary" onclick="getIECData()" id="playBtn">开始</button>
	        <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="setIECData()">确定</button>
	      </div>
      </div>
    </div>
  </div>
</div> -->
    <!-- 歌词 -->
    <div
      class="modal fade"
      id="LYRIC_div"
      tabindex="-1"
      role="dialog"
      aria-labelledby="LYRIC_divLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content" style="width: 1024px; height: 630px">
          <div class="modal-header">
            <h5 class="modal-title" id="LYRIC_divLabel">编辑歌词</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <!-- 这里是内容 start -->
            <div
              id="lyricpicdiv"
              style="
                float: left;
                height: 490px;
                overflow-y: scroll;
                max-width: 1024px;
              "
            ></div>
            <div id="lyric_edit_div" style="overflow: auto"></div>
            <!-- 这里是内容 end -->
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-dismiss="modal">
              确定
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- 快捷键 -->
    <div
      class="modal fade"
      id="SHORTCUT_div"
      tabindex="-1"
      role="dialog"
      aria-labelledby="SHORTCUT_divLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content" style="width: 600px; height: 600px">
          <div class="modal-header">
            <h5 class="modal-title" id="SHORTCUT_divLabel">快捷键</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <!-- 这里是内容 start -->
            <!-- <input type="text"  class="comm comm-short comm-center" style="width:180px;" id="zsInput" > -->
            Ctrl+E： 显示/隐藏语法编辑框
            <br />
            <hr />
            Ctrl+D：显示/隐藏虚拟键盘
            <br />
            <hr />
            Ctrl+Q：切换定位状态
            <br />
            <hr />
            <strong>选中音符高亮状态下:</strong><br />
            ↑：升半音<br />
            ↓：降半音<br />
            ←：选中前一个音符<br />
            →：选中后一个音符<br />
            ctrl+↑：单个音符升8度<br />
            ctrl+↓：单个音符降8度<br />
            ctrl+L：编辑歌词<br />
            <hr />

            ctrl+←：增加时值设置<br />
            ctrl+→：减小时值设置<br />
            <hr />
          </div>
        </div>
      </div>
    </div>
    <!-- 节奏谱 -->
    <div
      class="modal fade"
      id="RHYTHM_div"
      tabindex="-1"
      role="dialog"
      aria-labelledby="RHYTHM_divLabel"
      aria-hidden="true"
    >
      <div
        class="modal-dialog"
        role="document"
        style="max-width: 100% !important"
      >
        <div class="modal-content" style="width: 1000px; height: 580px">
          <div class="modal-header">
            <h5 class="modal-title" id="RHYTHM_divLabel">节奏谱</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <!-- 这里是内容 start -->
            <iframe
              src="assets/music_score_editor/rhythm.html?v=1.0.12"
              style="
                width: 100%;
                height: 440px;
                overflow-y: scroll;
                border: 0px;
              "
              id="rhythmFrame"
            ></iframe>
            <!-- 这里是内容 end -->

            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-dismiss="modal"
                onclick=""
              >
                关闭
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- 谱表属性 -->
    <div
      class="modal fade"
      id="STAFF_div"
      tabindex="-1"
      role="dialog"
      aria-labelledby="STAFF_divLabel"
      aria-hidden="true"
    >
      <div
        class="modal-dialog"
        role="document"
        style="max-width: 100% !important"
      >
        <div class="modal-content" style="width: 1300px; height: 580px">
          <div class="modal-header">
            <h5 class="modal-title" id="STAFF_divLabel">谱表属性</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div>
            <!-- <input type="button" value="增加" class="btn btn-secondary" onclick="addStaff()"> -->
          </div>
          <div id="staffSplitDiv" style="text-align: center"></div>
          <div class="modal-body">
            <!-- 这里是内容 start -->
            <div id="staffsettingdiv"></div>
            <!-- 这里是内容 end -->

            <div class="modal-footer">
              <!-- <button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="showPlsx()">上一步</button> -->
              <button
                type="button"
                class="btn btn-secondary"
                data-dismiss="modal"
                onclick="updateStaffProp()"
              >
                确定
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- 保存选项 -->
    <div
      class="modal fade"
      id="SAVE_div"
      tabindex="-1"
      role="dialog"
      aria-labelledby="SAVE_divLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content" style="width: 300px; height: 400px">
          <div class="modal-header">
            <h5 class="modal-title" id="SAVE_divLabel">保存选项</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <!-- 这里是内容 start -->
            <div id="speed_div">
              请输入要生成的速度(按回车键确认)：<br />
              <input
                type="text"
                id="spinput"
                onkeyup="speedPress(this.value)"
              />
              <div>将要生成以下速度的文件：</div>

              <div>
                正常速度:
                <input
                  name="filespeed"
                  style="width: 60px"
                  disabled="disabled"
                  value=""
                />
              </div>
              <div id="demospeed" style="display: none">
                <div>
                  增加文件 :<input
                    name="demospeedinput"
                    style="width: 60px"
                    value="speedval"
                    saved="0"
                  /><input
                    type="button"
                    value="删除"
                    onclick="removeme(this)"
                  />
                </div>
              </div>
              <div id="addspeeds"></div>
            </div>
            <!-- 这里是内容 end -->

            <div class="modal-footer">
              <!-- <button type="button" class="btn btn-primary" id="save_to_server" data-dismiss="modal" >确定</button> -->
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- TODO 调速度 -->
    <!-- <div
      class="modal fade"
      id="CHANGE_SPEED_div"
      tabindex="-1"
      role="dialog"
      aria-labelledby="CHANGE_SPEED_divLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content" style="width: 300px; height: 200px">
          <div class="modal-header">
            <h5 class="modal-title" id="CHANGE_SPEED_divLabel">速度文本</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <!== 这里是内容 start ==>
            <input id="speedDescInput" /><br />
            <!== 这里是内容 end ==>

            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-primary"
                data-dismiss="modal"
                onclick="changeSpeedDescInput()"
              >
                确定
              </button>
            </div>
          </div>
        </div>
      </div>
    </div> -->

    <!-- 追加小节 -->
    <div
      class="modal fade"
      id="APPEND_NODE_div"
      tabindex="-1"
      role="dialog"
      aria-labelledby="APPEND_NODE_divLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content" style="width: 700px; height: 200px">
          <div class="modal-header">
            <h5 class="modal-title" id="APPEND_NODE_divLabel">追加小节</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <!-- 这里是内容 start -->
            小节数：<input
              type="number"
              step="1"
              min="1"
              max="100"
              value="1"
              class="comm comm-short comm-center"
              style="width: 80px"
              id="appendNodeNum"
            />
            <!-- 这里是内容 end -->

            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-primary"
                data-dismiss="modal"
                onclick="handleAppendNodes()"
              >
                确定
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 注释编辑 -->
    <div
      class="modal fade"
      id="ZS_EDIT_div"
      tabindex="-1"
      role="dialog"
      aria-labelledby="ZS_EDIT_divLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document" style="
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
        ">
        <div class="modal-content" style="width: 400px; height: auto;">
          <div class="modal-header">
            <h5 class="modal-title" id="ZS_EDIT_divLabel">编辑文字</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <input type="hidden" id="zsistart" />
            <!-- 这里是内容 start -->
            <!-- <input type="text"  class="comm comm-short comm-center" style="width:180px;" id="zsInput" > -->
            <textarea rows="" cols="" id="zsInput" style="width: 100%;resize: none;border: 1px solid #ccc;border-radius: 5px;" ></textarea
            ><br />

            <div style="display: none;">
                字体大小：<input type="number" step="1" min="10" max="100" value="14" class="comm comm-short comm-center" style="width: 80px" id="annofontsize" />
                <br />
                字体类型：<input type="radio" name="fonttype" id="fonttype1" value="" checked="checked" /><label for="fonttype1">普通字体</label>
                <input type="radio" name="fonttype" id="fonttype2" value="∆" /><label for="fonttype2">美术字体</label>
                <br />
                显示位置：<input type="radio" name="zspos" id="zsup" value="^" checked="checked" /><label for="zsup">上</label>
                <input type="radio" name="zspos" id="zsdown" value="_" /><label for="zsdown" >下</label>
              <!-- <br>
                位置调整：
              <a style="cursor: pointer;" href="javascript:setGchPos('down')">&#8595;</a>&nbsp;
              <a style="cursor: pointer;" href="javascript:setGchPos('up')">&#8593;</a>&nbsp;
              <a style="cursor: pointer;" href="javascript:setGchPos('left')">&larr;</a>&nbsp;
              <a style="cursor: pointer;" href="javascript:setGchPos('right')">&rarr;</a>&nbsp; -->
              <!-- 这里是内容 end -->
              <input type="hidden" id="gchcoor" value="" />
              <input type="hidden" id="xoffset" value="" />
              <input type="hidden" id="yoffset" value="" />
            </div>
            
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-primary"
                data-dismiss="modal"
                onclick="saveZs()"
              >
                确定
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 选择强弱模式 -->
    <div
      class="modal fade"
      id="METER_MODEL_div"
      tabindex="-1"
      role="dialog"
      aria-labelledby="METER_MODEL_divLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content" style="width: 600px; height: 300px">
          <div class="modal-header">
            <h5 class="modal-title" id="METER_MODEL_divLabel">模式选择</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <!-- 这里是内容 start -->
            <div id="metermodelhtml" class="comm comm-short comm-center">
              <div id="m5_div">
                <span>五拍子强弱模式选择</span>：<br />
                <input
                  style="width: 40px"
                  type="radio"
                  value="5"
                  name="meter5"
                  id="m5"
                  onclick="changeMeterModel5('')"
                /><label for="m5" style="cursor: pointer"
                  >（强）（弱）（弱）（次强）（弱）</label
                ><br />
                <input
                  style="width: 40px"
                  type="radio"
                  value="51"
                  name="meter5"
                  id="m51"
                  onclick="changeMeterModel5('1')"
                /><label for="m51" style="cursor: pointer"
                  >（强）（弱）（次强）（弱）（弱）</label
                >
              </div>
              <div id="m7_div" style="border-top: 1px solid #e9ecef">
                <span>七拍子强弱模式选择</span>：<br />
                <input
                  style="width: 40px"
                  type="radio"
                  value="7"
                  name="meter7"
                  id="m7"
                  onclick="changeMeterModel7('')"
                /><label for="m7" style="cursor: pointer"
                  >（强）（弱）（次强）（弱）（次强）（弱）（弱）</label
                ><br />
                <input
                  style="width: 40px"
                  type="radio"
                  value="71"
                  name="meter7"
                  id="m71"
                  onclick="changeMeterModel7('1')"
                /><label for="m71" style="cursor: pointer"
                  >（强）（弱）（次强）（弱）（弱）（次强）（弱）</label
                ><br />
                <input
                  style="width: 40px"
                  type="radio"
                  value="72"
                  name="meter7"
                  id="m72"
                  onclick="changeMeterModel7('2')"
                /><label for="m72" style="cursor: pointer"
                  >（强）（弱）（弱）（次强）（弱）（次强）（弱）</label
                >
              </div>
            </div>
            <!-- 这里是内容 end -->
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-primary"
                data-dismiss="modal"
              >
                确定
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- midi设备 -->
    <div
      class="modal fade"
      id="MIDI_SETTING_div"
      tabindex="-1"
      role="dialog"
      aria-labelledby="MIDI_SETTING_divLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content" style="width: 400px; height: 330px">
          <div class="modal-header">
            <h5 class="modal-title" id="MIDI_SETTING_divLabel">MIDI设置</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <!-- 这里是内容 start -->
            <div id="midisets" class="comm comm-short comm-center">
              输入设备：<select
                id="inputDev"
                class="comm comm-short comm-center"
              ></select>
              <label class="diy-switch">
                <input type="checkbox" id="inputDevEnabled" checked="checked" />
                <div class="slider round"></div> </label
              ><br />
              输出设备：<select
                id="outputDev"
                class="comm comm-short comm-center"
              ></select>
              <label class="diy-switch">
                <input
                  type="checkbox"
                  id="outputDevEnabled"
                  checked="checked"
                />
                <div class="slider round"></div> </label
              ><br />
              按键声音：<label class="diy-switch" style="margin: 10px 5px">
                <input type="checkbox" id="pressVoice" />
                <div class="slider round"></div>
              </label>
            </div>
            <!-- 这里是内容 end -->

            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-primary"
                data-dismiss="modal"
                onclick="setMidiDevice()"
              >
                确定
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- 我的谱例 -->
    <!-- <div
      class="modal fade"
      id="MY_STAFF_div"
      tabindex="-1"
      role="dialog"
      aria-labelledby="MY_STAFF_divLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content" style="width: 1000px; height: 638px">
          <div class="modal-header">
            <h5 class="modal-title" id="MY_STAFF_divLabel">我的谱例</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <iframe
              id="staffListIframe"
              src="assets/music_score_editor/stafflist.html?v=1.0.12"
              style="width: 955px; height: 555px; border: 0px"
            >
            </iframe>
          </div>
        </div>
      </div>
    </div> -->
    
    <!-- 历史记录 -->
    <div
      class="modal fade"
      id="CONTENT_HIS_div"
      tabindex="-1"
      role="dialog"
      aria-labelledby="CONTENT_HIS_divLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content" style="width: 500px; height: 650px">
          <div class="modal-header">
            <h5 class="modal-title" id="CONTENT_HIS_divLabel">谱例历史记录</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <table id="abchistorytab" class="table table-hover">
              <thead>
                <tr>
                  <th>记录时间</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal -->
    <div
      class="modal fade"
      id="Help_div"
      tabindex="-1"
      role="dialog"
      aria-labelledby="Help_divLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div
          class="modal-content"
          style="width: 1600px; height: 850px; border: 0px"
        >
          <div class="modal-header">
            <h5 class="modal-title" id="M_divLabel">帮助</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <iframe
              src=""
              id="helpframe"
              style="width: 100%; height: 100%"
            ></iframe>
          </div>
        </div>
      </div>
    </div>

    <!-- 洛天依 -->
    <div
      class="modal fade"
      id="LTY_div"
      tabindex="-1"
      role="dialog"
      aria-labelledby="LTY_divLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content" style="width: 800px; height: 450px">
          <div class="modal-header">
            <h5 class="modal-title" id="LTY_divLabel">洛天依文本</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <!-- 这里是内容 start -->

            <textarea
              id="lty_txt"
              style="width: 768px; height: 358px"
            ></textarea>

            <!-- 这里是内容 end -->
          </div>
        </div>
      </div>
    </div>

    <!-- <input
      type="range"
      id="scale_control"
      value="1.4"
      step="0.2"
      style="display: none"
    /> -->
    <form
      action="exportVoicePart"
      id="voicePartForm"
      name="voicePartForm"
      method="post"
    >
      <input type="hidden" id="exp_groupid" name="exp_groupid" />
      <input type="hidden" id="exp_attachid" name="exp_attachid" />
      <input type="hidden" name="mixStaffPic" id="mixStaffPic" />
      <input type="hidden" name="staffPic" id="staffPic" />
      <input type="hidden" name="numStaffPic" id="numStaffPic" />
      <input type="hidden" name="partAbc" id="partAbc" />
      <input type="hidden" name="expMidi" id="expMidi" />
      <input type="hidden" name="expMp3" id="expMp3" />
      <input type="hidden" name="exportTitle" id="exportTitle" />
      <div id="pdfpics">
        <!--导出pdf的图片数组-->
      </div>
    </form>
    <!-- <audio id="low" src="data:audio/mp3;base64,SUQzAwAAAAAAFgAAAAAAAAAAAAAAAAAAAAAAAPwDUAX/+5DAAAAAAAEuAAAAIAAAJcAAAAS0BLEAACQAAAAW////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////RVWP//P/+6DAwQAvoAEuAAAAIQ6qYwgBIbGc+jfod84GL+ifOj3CcV9S/8JX/v/Tvf/3zCV+pZ/vpXoZSV4uen/N6V/LuAoHlX8JRBnlu4dh+SH9kChAeKiR2ySNrV/yIiFhwMDAE93dz+KU1///6atAee1b3vv/En08r548SPijIrGSaSJPZWUeQHW4dFYyeGxp9D37JEVjJEgesA5yDl7Q9Px7w47crFAXxCFBENMW8TANQhFkPOdC38Q5zLYlYaCMSjBBJYiEo43vvKjeRoqnLePWLmW866Jq5bCcE4LgrC4KZnRAkgOQbgdDQxl4YkWqjncy/wGfV739KUpe9//////SlNfMNXq9Xv7+97+jxWKxkfsaHmmaZ1qOPR+/HqIyhQQyRKYmQMstBLNNspoAQCzAVAAMRIAgwyjKFOJSYTwLgIAANE4cQ0jy54kwRSxIcwYwwjDEBQaZUYe+5st+nTZjYwgBMNCYYAABpEKmbyOY9Es5Yr23BXe3Nf62jCYDMFhFDlclksiFEUActwLBwDARSkwGJTKYlMOkMxEKTHI9p7XPl+2HO9SxwHANZxjsVmCgCgOMMBAx6AwABKnd6/LB1GmxqMMu65YOB5igBGESmZrI5jsfmDwsZSGl/P4g9jr3N/Vi1LAAwA1SQ628YMjl4zQWjQQ4KoBEgyZDE5gkBGCQGYaETv/2w7D/+5DA2wAY/ccjlDeADjnDaPs9wADuaqUtqG3qqRhS8YACTDkMPfgwEBm+AIrMpjUMBQUDxhgpGbBEDhMDBmZbJYk3DJ5R2/8e5lKOf///3bbpl+EfkUEEDq4Rf+2pZFE91/GMwiKhsxiE0zCAAGGhMCgoBgW3y6DAQcMMCYHBwweHc+/Xl87GO///////////////UlDZhACH7gf/////////////95BQFBwMSXMHgcMBD50nQIzI0iiUQwceeteujIlzDQ9ix0NTKQ+WQInGtL6Gy6KGh05mXwlmHQ6GPQRgkEAaFZgoAIqBawy6haA7AxpZQlptKKOK+LdxuPUcWoPNh0wUk9CQuhtVu1MOTSaxZ1C1nIJE5j+7PcseVCUlK9906DHGUIhnOllMOwxrm/51OpgynaCNZyq7mQTKp6zGaWGbeWOu2rJYHTgX2nMt5bRaVewiDy3ljjjd1/913v6/5tXDA37YiirGlKoGZUgO+tTbsZb5Us3v7nnn/6y7kxtaLQIjcg12JDTW7cMwBMzGOW+YfSf38d/+v/XNc13/+5DAdYAe5aFfmdyAApIy7De0wAX////Wuy2yVAn/vxCUmyknHJG25WFwWvSXIADFAQVOMo6BtADPWfXbEVTmcqhcVmIOSQuL4ksqMdEp2qyVq2y9OnZqtfr8d13r3LUiQq3Q1JKQ6ywvqe6PTdhyK6wRrnqi1nl6JQ/c9hcsSYMaRnOwJfjUo4E62/7W0273Jqt5c9bPyzSt1Q7bFtnvgtmz3375nn9r+zMWf8zBmrXW4Mx2Vs5F8zjffM5W9n8fmZnX5ggRiv5JJHJmqPyoOgJSkTyBAaIxQ0+EB028TxRCH10gEJoCFJuQQMjuqH5UPpYL5+ohIPqlLrSSEsSflayW0aGrXCVRJFTEPoRIOkJR5/qYK3iWYj88OxQ4GteYseCcsqXlh4cr2jisR66tLq9GeQXshVoy963lqx6xjPoUpjNoysuuw2pR+w406r8wsseaPykpzq70vyzfeSfKyZnF9E2FlD/5XKHSkTJt6M2k4TFp4cXVZ4f0P+hPqcSvS8CSknJbbrbb1O3jUAS3T+HRlkxRwDKQWClit7UHKkf/+6DAbYAXjaFZTbGNowizKzWnsbVivWFecCeeIrSaj5W2JPUR9FcunFaQxU38F8XyrXGyhDgnk44wVRaS88U0aYvlJCfdgASNi2qLgS+rBYjk2vDiP7xWbOVP1Pj08VmRlCXDU10nHaasY0oq2HkqVJyRwldOkB+qETL1WdSM+XL3kCyo+fpXkzdi02kscHxkzbJu5ppkrqzKZ51TVcfQm0pRMUHIkzCXEj8kFhdb+lpc0trb1alwwCAVI5ddtdduWYQGLXhdGQkJBksB/BAap7Ygu1o5fwmsJ4mzXYC4yPD/nQ01jmbdwXNifoSnlOzr1IScfTOLAwIbO9R2nOMThPVf9xxXumIjVIF1pyX4zgrCWzUdSbUSF2HakgoYTMlx4SkIddEWlzssD8pV8Y09cOi6rr5ouRlXpSlpYbjrcqLZN09h9dO7mw/GaFFl0OzLhUZWnULazH7zJXPZmZqvhrBDVKbLVmVGxCW/sLrT026m3mZmZnIT1n+iAgS25Ndttduqq8SlzXWsFVyQht8eiCa2tIs9iTEwASKaiIOgPlgi2MhgyCTKktcV0Efkh2uNSoO5KEMoHI4piwlWHyCvLJMPjqD0lzIvpUq8zLoApiVxPMgeMVx84R1nGy92qE8gPqz4eysfklXAWrXVctWpXradF2Emm7bnJX9gabSUdcZVtD0em1kiN5H/+5DAqIAYSZtXrL2NqxI0KrWGMbTZMYHrB9W91/q2iMWn6qqxpxzU9BHWUnl1TWLEpLhLUlYTD2ZLvzMzMqh0tMzMzJHqtcN5hPwkkluOf/1YQM01qLzuUSiPQDIl7jUbJ27r2ZmzF+JuVOWUTDhqRnqeihDPpc82c5GnolLqYOVLqWGpy5fxirlXKTCxlIbuVM6anS6bkupm1StbbEQk+Yx1rlPEaV0eGlhunCZJ/H21UhMi7Zk9t06az6XWEOc2aM3PmpbPFoR0mIWHkjDN2u79l3S/cmKseV/Ll9jMTOMby81JfbWxY1F+ZFezRrYiajOcG/rl7CxHUkdM6g2iaxbf//y9anv///t8QDy8F9sEglK3S7bW3SlPY0qBynbWFWLQKmXKoKy2WLmTGBzCHGU9gqE7h6jKVz6GnjSNI6p3qtQ00TmFuIUomaOfpOTRQ5XK6NBe6zVtOT2jRldbbCqCI6l4RjIlGQgjrlzESRJMYOKoimJi5COJN3rJRJJpJBqAKDYnHy4+vAZKoasmK3qsu2Sk1bWZ6cOnnrUeegX/+5DAqwAYwaNZjOHtsvizqLWHsbSrd2n7Np/rakXH34fH2TNS7SNpVbLfWfOVipb0IglnLTMzMzMlYnfMzMzOwHzPALaDLLJ//+MiUGSKYMlq3iaSIZ62BlBwnGac11mRlSwXYrpkh06lQ1EIezWsf0R9Gxm24NfltiMW9erp3XXsNNbsoWtu1pm2Q6+SRUVra8o64aBY65Va/iw5N+XFV+Ba48oPjvUYK15JA9YgWHipvDLf+EwLryhGFRCOxCD4cCkPf///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+6DAroAwKUkfjD0NgGoM46QxFSD////////////////////////////////////////////////quipoAA2PqyhBKtKX1KZ8MHmyt/6gKHegeFj/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+5DA2wAoYAEuAAAAIAAAJcAAAAT//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+5DA/4AxgAEuAAAAIAAAJcAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=" preload="auto" controls="controls" hidden="true"></audio>
    <audio id="mid" src="data:audio/mp3;base64,SUQzAwAAAAAAFgAAAAAAAAAAAAAAAAAAAAAAANQD6QT/+6DAAAABTALwgAAAIrI0o2D3pbgAEkAA6w4Azn6DPKyK/+pxJxN0OHoShzoXIh7t48Tiggx8sjeo47+NMMMMNAbw8mbEMidjc2BWRMMCseR+xs92NXx8vGCI/ngKxko/j7UgkzwQPhD0wXDc4UogYnvXYXb2yMVtCgnIyeVt1eo5IMuagoY1fVEDFEDmCMnnuAuBe6UAIJP7I1gBk+8oAA8j2sXegyiBwUEkCBVuFzxQECTPOf2CaNvYZNhASRnBRBFB+u3s5qBcEza0BLEAABsAAAApsSJJBC1X+LmpbEgPVPoxYT6EJ9bXDhdgYIiuaTJ+ZtsT8wHm3ivXJ3X7U5hkhg3BurSLKA3HfyQyfxydiQweL7Hm7b05+cHDjdnG4DDppc7JaiWKpzNtfARzwRDBRBXzgzV0PFmtGBMJ5/jZmdnzThLEs+mp2Vx3J9Y4DwwWCQWGLPDwJAgGBMKhgB83WJCwtfXnaw0qDcG5PEsG4frx4ERREdksliOob5zcbjQwaEyLl5bssiik4RNmdpxZEiI5lBEwiwkZDbazdd8ruNmOyRmZFYk5iEC+mm2IYwdcxgcAmGDKBaYCwGbI2bPGGAFv26zUDwMI3z7O4kN1GjzgjaQhxbs1f5Q9EnYrX1WFlgRKYgBDzWOgmhmNjt7LJTXpTReC6l2XwiQ62/b2aFH+PWJmzij/+5DAmgAXtaM3lPYAA3eyazs88AATqNpYcE5NBqxZw3b1PH+K/j2JieiHJ1zHkQxC7Q4D2LLlTN2PTedwIGo9ELFsSpSFjVjMMMWQGEI64xI1HLT6DI9ZviqvxFiN97x7f9LhzBqR1k2SqjQlLoYcyh3+9jKZd2tXMGtmoJI2yXG2o222243JJJJTGVUTU8hjFo+zUQtTJAMDxgjjLoJTBIGTKQWCABTJwRjDcBFOXKSbzYvJQElIXDQRA5JBsdh24oaQzR5SvOmIkhdUUjPuRR/ER4Uh4pYfYb66e7R660QIlvwaqdT/5h5iycVfdaTHju460U5tdyMs+0+tNDA6WfaqyXT2WVdYT2BCX8kYULGljiRguXXsrYVyHCSiaavs3oxY/vBBD8DhSeVsMM9OvxTJxVZtIUNWaTlVE7BarzSTTFmmUb6Gf/6f/6Q0AXNtdtrbcsG8Rh6MxrbJpnAHJhoMoQDMwjfDTvqbMEf2GWWXaheEV0cSAjLK4JT8flzSyplDBpfocKy0rMRFSnMRUKagmrUtFqpYcpldXeXjjo3/+6DAkgAZ+ZtVudYAA0Qzqre6wAQkU6ODAsHZmHbC0wSr7nJSIQdoz5XVGrkvOJjA4LKQHRqqVT47GnSYaLR5ICxMYotOfN1qxkXxFwqlYtrnNSG/vWz/U1dXXQhKKZ+W2TsskVbQrjuJI9PvHCwyToLp/g/rx0YOwaGfmBg+PhWKNjsgm+YfxTKYyerPbCXY8CiUi9bbdbLelQ65iGAJl5EwKUURCyzNsINCZGhaDM1PZ1Bf3wxWs02+KhxI1lzLTZeXHLR1CWjlLEcswkckHhuSbM2cV1GJRsC0/P1pN4vR0qpcyqRO9DzBqqDKhwH61dTK6VVOCqYHFCo7E6zAnRzVzlgQ4iSfRoN3HV2Jqv8vFeiDdiluinhGOllQxcn65qFSFCrY9MxTauxya79DVJhvdOlDVts22rNZ8rp9ayrVGlTtVKE11c/EONJOZhK5D2F7byq1xSf3jX66XMi52mUewoDf//S2paiaYmHJlfigJKjA9JgvKUALuu+l7DskeYfiFrrEVlYoG21oY47UwRmdXFubYrjCLgqlw2Rz+c8phxRMd9ZbORuVUjCpXh3nQx3QqEcqiXnJ+nlnKjhPnKfWEUcahXcRtSaGTtkdedQdyNLQ6VsZILpn7U/gsJzRH2IadV0+n0W0aOysjxXWq4vm7SnVZ0PLuFFbHZVeyztycO1kjxmO7tT/+5DAvAAaNZ9RrrHtq0sz6iXHvbaLfWELbEUwqxn8i4b0GdT2WFvwbtFD2QeSQHNKlv/+iMKiPSPeCT142lwOWMAokuS2yWyNuMmHQCFg6MgIQTbHA/RathgBPwoap0rp51imG8lYWRzcDd21SPHJO4UFmxPLSHRnOBaMpUWnEkZlhgMwh8U8UGbUBkP9C2c6Ucfx9tjeaJvLtcKlzdNBonanU+d62ZKHtx5J0mCsN45D8ZGxbXKUXUdXpGrCaJ9sZ0yQlOrYCceWV5clK6eMTguVIjlIoVYrk8v6hPmKHPA51FvLiwtz6OjVbAM583nXAJSvbOZhYyubFp8xNrKXenUkzCrUUcK1/4a7ri3yfytzr0zfB3tRcmlsQrNrQUW4T7hvySk5bbJbI26HDr9q4MjsRZPJTtRSDiIVZa1hL6RNutJkXbXVOp+65ZUcfr9YU8JPJVIw1a14Uu5EtCS8arge4tkZHoxDUYryQIXAenU1t6pXEVXq5VLtCTuiqU9IZLWQu5wquEstamMBtPB8W5mRChOZmU7ApVC9P1Tr6hf/+6DAr4AcSaNZrr3ts480avW3vbY1hXk5yiFOjFNCV61BVzWrX15IqmbzqbkIWo+HFXJeztXqBTqvGoDaxvKw1yhSuhRmt3IX5giYS+IDG7ncNv1nDtKnYh0T5KMuFo9NN6tU0eHOkhOyHw6twWoX53IbXsDgTlW/J2koJJKdkjcjaSgGDy4ZhZKSZwRVlgrYq/iz5W97I4nI5aJ4AsAZCdw3h8IYchwQWFWKw6GRwhravfrGX6fV7Oz3oizTOtzeKBCEITSL0wKgkFxM3GRREJFjnSeJaCRTdUSy38bZgZnaG+Vik4VB9ueHiwsLGm2zhZhqvbJb6+iGdr9RvJDhWvfagRHDvNWOGHFFbvnjGVbTvn9Grp31dZxxe/i5YwxRi2Ii5TYX0MvHDkOiWUx1XKi+IfoapEQDTgNE6S4RC8ZGe6ICyNE+JcJLJoAKbckbkbScdFaJiWTEMZFal00rDWdLqjbDWcs5BqTaEkGoNRFPUwTASAkJJ7AShKEo+9k6EonH3snJJEkSnySBEDpNdaMjESRJPaGQlCUJS2hKEoShKPoSSJRaXetMTESSa9VaYk09xolGJitq0ZGRkZdY6JROPrrTkyMnq1ZOT13WVpie1ouXLVtesuMjpdNly572TExJROXNnJiSSaidOSaDVTEw0SiSexWOicfLnjlYCQ7bkIgg1erayUH/+5DAxwAaBaNXrb2Ns0W0ajWGMbaqm2nT5jT6pgSHbarWBCBs/0J9cCltbZIX0qLBFkg4SDJmOjTDUtZExGd/HUaAIW0crUcRN/5W/1KVtAwo//Xhqq+1X/jL6qpUKx/1ebHxv6vs1WZqR+zQ/DCjDNs1X9wI+UBASPpN66qTGFARP///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+6DAvAA23VMljBRtoAAAJcAAAAT///////////////////////////////////////////////////////////////////////////////////7//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+5DA2wAoYAEuAAAAIAAAJcAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=" preload="auto" controls="controls" hidden="true"></audio>
    <audio id="high" src="data:audio/mp3;base64,SUQzAwAAAAAAFgAAAAAAAAAAAAAAAGhiAAAAAAQF6QT/+6DAAAAF8AEuAAAAIBYAItAAAAT///////////////////////////////////////////////////////////////AAIAAHl7QEsQAAGwAAAClmqZVt+q1xWF29IBQKCcVto20c6gr1Gr3973vDZImve9/6Up9fd8R7+kNjV7kfghYSMQ8esW8I+A7gCcA7ATAbguBkRP5Hivj0gPHkTV1AyavmRWOJKwHQBYBUCaD0D0CEApAVAGMNWIeLmQs03M/B6AM4N8caF2YHjI83DvfFIDyJfGKUgPE4aA9Yt4asTchaFzsCGKOPv0p87owPHk0N/HgIeh6vZ379vT5pi2CGCaD0GgoJmNXqBWKyI8pRgiQFY8pSkCGGAHh7QeiIqFCCyAygyi6XU2nE43GnXLzBAIIMvInow4b7DfCGvcdTQxSAOjDjB3MKsGUwdwumov2YBwFgcBYYCIBpaFiD8GMcbzBQEjljDk4cgRvlll1qQ9DudJYsJBm84aADZmnKrILJOzD+Syf6dExnFGgEHPgB5QdtGzMsblLMsb+XAdQWEDSgNQg61w5OAS2LNSEoUDRVt2MNw/VjbKAcO7SgjBnsYOotMKYl1WbUAgJkHaSMbzlmPQxhGcFFhEjWGGGAMZRBfAEhF6k15ewAVAVDXcDPvwJ+HH3geksLfaCqdIBkc+8AOgQQGE3/+5DA2wAZbYsXNJeADVTB6b89kAAdFRc0ABmQGWaSuWsrYASDTaMAOO4QuUTkjsc7Uwww/8DSEOsEwHgOAAt2yWFkTECIpw9T3n7LZRMEDpgv0jyw2HC6z1OmgrKKeE/hz////////////////+XJN/////////////////a18I2SSSWiSSVVaarvzIbXiNEcRIw0xbjMZHMCg9Jm0g9GASBWYBQChgXAnGACAsFATAwHNmDLmCXV0uKYgFF6GPQVEwnnQC1CckIB8vTXPWFzurIXiWrEVVGuH1UsPnzeh4keOmoDJcemZ3dxyjpgg0dvkJZWGNCapdTOG0qnKEN3n3kKjOLiVYzHXX5ssufEVtUresgQ0ujsvMT2seMJkzzxJLRmnaHcOx/WNM/ZRpZjbObvEIeVlrkYyOUp0zVbYrHY+xWry87LfzkCy66qxQ020poo/EbJP////oUhJk2222124WBUwWCMyQDs6weY19HIx1KgaBWYLzsqbsyNdb9Ztdr1FegcwjdeKXB+oZdtmdqtmfvmRWO29hVj86VYgZL/+6DAkIAbcZdPmeYAA2Ozqze68AStqrSiddfbVFhw3ket4DUZT5ndIU+VTuIrIjjFiMkVsVUU5iXqpRVoqYsE/NR2VSwrrZJIKtaXA/LR4eVKunj1enbo92eGjkwjJ2RXqRbZ7yP5FIpo0Czelo3YnI9lWsOKgxFycMFRMCsOpGqrakUkpyOn7AqE2/23rCvbmXTY1tUdYyzK3/C7cvlxamaCxZo80qdADRCc1221116jTLg4PzglszKsBjAUIBoWG5lQBH8a9guPlCB74ymtbWsx2IQNXj5adWM0h8cvHdERmVT0m0PCydmaEJ81XcetsHyhGnUGopHwrrENk5Eip42OqkdlrXEWhMCa5GTH68zIvkBEhno+iLDyel0JVFUrHSerKGlRWgORLHAPUw02D8gFckkAknFCcOJmOv5LYZUYjnIS4P6XB5XVjWHx87Pa9qJp6ontA1QyqcPemiJQ9HCKsRYSiSin0K6SetbZSlYl3NTM3QKDX//Su2qVA4IDpkYMzgwvcJGiZRRfljK2JdHYYHWNp/mmdqlQCv5+dssmI5JzA8KpPi1TccsTD+fC49WQE8+fVMs7CqEWejg1I1gOdkXDtWt7NBTSUYmZnzHSKGR38zarUsqV+rJSDeSCtK5VaUima3rawRoakw+qysUWJeA4tk8F8tvWKzKhj6HdJYSmG+NBgPL/+5DAsIAZrZ9XrrGNoyOz6qXGPbYMaL6aYJ4FPudTRNP8eSXFceHDVK6UW6WzQv1rIpQ2NMvLWnMwItLLvZ/ufv2tPIUkEATGMsAEAJOSNyNpJreTCLQnd9mAAA5RMla5aJ/FbFTL9lkDms0PT9lmdnU4sEkBVzKVXxWhdJZLxmG+VchZvqxyJudIi47dnggSdlhV2kgyxTlSzS6hLo1jpb1IoHNRTqJUHS1nqdZ+PDtMVVkkbC7GcdMy/EOqiKc37E5l+TJ4R0JVSFrLM+TuFVc60MWoyayuT0S8ZMP8IxR+fGlimlCN4hZw1lUsSOxsBdoJ9IQ/HkgFKnlg+EXKsvdV0nUdZTxkWoV0sK/H+XdE5GxYvrPFWcpJfSSyuEzpLQDracbgkySTvEfRRJbltktkbdKA48JgMMnWGIUIlOQaSshSZd1TplbTYxByJbarlsbO+Tp7JldsDJHaEuq4KhbZ1665VjWzv2WChgt53k1OBWxU6W82lyUKcQ9drCiVcQtskcsJvLCcMN4ZZymGYijhnM8WVYP5UQEmJqkVEXn/+6DAqwAcNaNTrj3ts7M0azXHvbaRpYHFIJ4vzVcnMVGHehjMf5sRlM3MyrTjCxNLdZsqe6UOVhO9a3lwfqmDAolFeq2b5jQH+12yJuCyssK2T+SSFRzVxhjjKpHUgPtvl2oi3FvNwlDKXlkKpwS7ZYhKqd3MoxUGeB7HqcI8zMXLKfBykLYTYW08rR/gKJKcsjkjaSgGAaAMEBQ3vHxZeQ8JEWDFX3sXAh51JIK4QgggR8cY6yBs9mGOySqtD3NRp+OzzqxDFArGWqvT62Ww6C+HQdCcVCwXx0qf50vJliwohWPZ+S7n8PvIDp/vK05PMCQugE5NEhpmKSsPDhg8YO0P1t6UscNn5/do3TmbcU2xfJ+9dhhZ0UEHRVtaClHDyJ6OFU/aa98voa+8L9mJNHnf+WxUUhYIlhILg+rBcJ8BbLiJ+ZiFxHcL6ChEcnqak8ruiG8IYmnZYJJTckkkjbbkSQRGaQSnnA2CkWC4Nxa8w5YzEoel22VFQJAkCQJAGAEBoEhSKRShZjGREFQRACAEAIAQRBEUkRMiRNdCQkIWBIEhUGiYmRIs9LIhUFgSBIKilCKRShypRiqQiklIRSKSImRSl7iQiomCwBgBACAECQqQoRShgiFQqCwpBEEQyKSUlJUMtiqKRSCIIgiKg0iRComaWmiRIhUTIkQqERCKRSSinJURClD/+5DAvgAZmaNZrj2Ns1Iz6zWUpbehFJKKSUhQxbirVlJhULAkPSFRE/NIiZWOURCoEmYikU+yUqKWAFfqVVVVnZEYgKDN6MiMXs9CPzYi2MMQ8+0nsAkVdTVoatQVatL5FCqzkYCo1/yxN/4kJ5FsZXi68K73WN6hPn2/b//1rjO//B1/WFv/wre3t8W35Xudb/tmv8F7h9bL17a1vizFG/gxa/5gxd/4fQn1rf+FG8GLW3+Xsz61lMorp1Uyoa4K574TGJKXm3///yujSOplrWGFSFa46YnH////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+6DAswA0maEXLKXtgAAAJcAAAAT///////////////////////////////////////////////////////////////////////////////////z//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/+5DA2wAoYAEuAAAAIAAAJcAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=" preload="auto" controls="controls" hidden="true"></audio>
    -->
    <canvas class="visualizer" style="display: none"></canvas>
    <div
      id="source_float_div"
      style="
        background: gray;
        position: absolute;
        display: none;
        cursor: move;
        z-index: 9;
      "
      onmousedown="source_float_mousedown(event)"
      onmousemove="source_float_mousemove(event)"
      onmouseup="source_float_mouseup(event)"
    >
      <img src="assets/music_score_editor/images/close.png" title="关闭" />
    </div>
    <div id="float_div"></div>


    <div id="confirm_con" class="confirm_con error">
        <div class="c_tb">
            <div class="c_cell">
                <div class="confirm_box">
                    <div class="confirm_head">
                        <div class="confirm_title">提示</div>
                        <span class="close_btn"></span>
                    </div>
                    <div class="alert_tips_icon_con">
                        <span class="alert_icon icon_success"></span>
                        <span class="alert_icon icon_error"></span>
                    </div>
                    <div class="confirm_body"></div>
                    <div class="confirm_footer"><span class="cancel_btn">取消</span><span class="ok_btn">确定</span></div>
                </div>
            </div>
        </div>
    </div>

    
    <script type="text/javascript">
      //鼠标按下触发的事件
      var dragTarget;
      function Grab(evt) {
        var targetElement = evt.target; //取得要拖动的DOM Object
        if (targetElement.tagName.toLowerCase() == "rect") {
          dragTarget = targetElement;
        }
        //console.log(targetElement.tagName)
      }
      function Drag(evt) {
        evt.stopImmediatePropagation();
        evt.preventDefault();
        if (dragTarget != null) {
          //有选中内容
          //console.log("Drag")
          //console.log(evt.clientY)
          if (initY == 0) {
            initStartPos = getStartPos(document.getElementById("source"));
            initY = evt.clientY;
            initNote = getSelectText("source");
            lastNote = initNote;
          }
          var distance = initY - evt.clientY;
          var interval = parseInt(distance / 3);
          if (interval != lastInterval) {
            var newNote = getNoteByInterval(initNote, interval);
            if (newNote != "") {
              var endPos = initStartPos + lastNote.length;
              var bStr = $("#source").val().substr(0, initStartPos);
              var eStr = $("#source").val().substr(endPos);
              $("#source").val(bStr + newNote + eStr);
              //replaceSelected(lastNote,newNote)
              lastInterval = interval;
              lastNote = newNote;
              src_change();
            }
          }
        } else {
          //没有选中内容
          //console.log(evt.x+","+evt.y)
        }
      }
      function Drop(evt) {
        //evt不是要拖动的元素本身，而是它所覆盖的元素，画布或其他元素
        //console.log("Drop")
        initY = 0;
        initNote = "";
        dragTarget = null;
        lastNote = "";
      }
    
      $(function () {
        // 默认显示谱子的展示形式（0：五线谱；1：简线；2：简谱）
        $(".spl-staff-change")
          .find("div:eq(" + musicType + ")")
          .addClass("active");
      });
    
      function setAbcPlayWay(abcPlayWay, isOnload) {
        if (user) {
          if (isOnload && user.abcPlayWay != null) {
            return;
          }
          user.abcPlayWay = abcPlayWay;
          $(".play-way").removeClass("active");
          if (abcPlayWay == 0) {
            $(".play-way.piano").addClass("active");
          } else {
            $(".play-way.system").addClass("active");
          }
        }
      }
      // 默认钢琴按键不播abc
      var noteOnVol = false;
    </script>
    
    <script src="assets/music_score_editor/js/vue.min.js"></script>
    <script src="assets/music_score_editor/components/NumberInput.js"></script>
    <script src="assets/music_score_editor/components/SelectInput.js"></script>
    <script src="assets/music_score_editor/components/SelectFontInput.js"></script>
    <script src="assets/music_score_editor/js/element-ui.js"></script>
    <script src="assets/music_score_editor/js/popper.min.js"></script>
    <script src="assets/music_score_editor/js/bootstrap.min.js"></script>
    <script src="assets/music_score_editor/sweetalert/sweetalert.min.js?v=1.0.12"></script>
    <script src="assets/music_score_editor/sweetalert/sweetalert.ext.js?v=1.0.12"></script>
    <script src="assets/music_score_editor/js/abc2web.js"></script>
    <script src="assets/music_score_editor/js/util.js?v=1.0.12" type="text/javascript"></script>
    
    <!-- 框选 -->
    <script src="assets/music_score_editor/js/abc_select.js?v=1.0.12" type="text/javascript"></script>
    <!-- 上传组件 begin -->
    <script src="assets/music_score_editor/js/vue-upload-component.js?v=1.0.12"></script>
    <!-- 上传组件 end -->
    <script type="text/javascript" src="assets/music_score_editor/musicform/js/controller.js?v=1.0.12"></script>
    <script src="assets/music_score_editor/js/abc_menu_config.js?v=1.0.12"></script>
    <script src="assets/music_score_editor/js/pop.js?v=1.0.12"></script>

    <script src="assets/music_score_editor/js/piano.js?v=1.0.12" type="text/javascript"></script>

    <script src="assets/music_score_editor/js/interact.min.js"></script>
    <script src="assets/music_score_editor/js/staff2num-splnum.js?v=1.0.12" type="text/javascript"></script>
    <!-- <script src="assets/music_score_editor/js/edit-1-splnum.js?v=1.0.12" onload="setAbcPlayWay(1, true)" type="text/javascript"></script> -->
    <script src="assets/music_score_editor/js/edit-1-splnum.js?v=1.0.12" type="text/javascript"></script>
    <script src="assets/music_score_editor/js/panzoom.min.js"></script>
    <script src="assets/music_score_editor/js/abc2svg-1-splnum.js?v=1.0.12" type="text/javascript"></script>
    <script src="assets/music_score_editor/js/notes.js?v=1.0.12" type="text/javascript"></script>
    <script src="assets/music_score_editor/js/saveSvgAsPng.js?v=1.0.12"></script>
    <script src="assets/music_score_editor/js/webmidi-editor.js?v=1.0.12"></script>
    <script src="assets/music_score_editor/js/staff.js?v=1.0.12"></script>
    <script src="assets/music_score_editor/js/myabc_editor.js?v=1.0.12"></script>
    <script src="assets/music_score_editor/js/abc-editor.js?v=1.0.12"></script>
    <script src="assets/music_score_editor/js/voicePart.js?v=1.0.12"></script>
    <script src="assets/music_score_editor/js/jscolor/jscolor.js"></script>
    <script src="assets/music_score_editor/js/canvg.js"></script>
    <script src="assets/music_score_editor/js/jspdf/jsPdf.debug.js"></script>
    <script src="assets/music_score_editor/js/html2canvas.js"></script>
    <script src="assets/music_score_editor/js/graph-editor.js?v=1.0.12"></script>
    <script src="assets/music_score_editor/js/piano_improvisation.js?v=1.0.12"></script>
    <script src="assets/music_score_editor/js/myabc_plus.js?v=1.0.12"></script>
    <script src="assets/music_score_editor/js/sing_visual_ug.js?v=1.0.12"></script>
    <!-- 颜色选择器组件 -->
    <script src="assets/music_score_editor/spectrum-2.0.8/spectrum.min.js"></script>
    <link rel="stylesheet" type="text/css" href="assets/music_score_editor/spectrum-2.0.8/spectrum.min.css"/>
    
    <script type="text/javascript">
      pagewidth = ($(".right-top-content").width() - 50) / 37.8;
    </script>
    
    <script src="assets/music_score_editor/js/soundtouch.js?v=1.0.12"></script>
    <!-- <script src="assets/music_score_editor/js/play-cm.js"></script> -->
    <!-- <script src="assets/music_score_editor/js/tln/tln.min.js"></script>
    <link href="assets/music_score_editor/js/tln/tln.min.css" type="text/css" rel="stylesheet" /> -->
    <script type="text/javascript">
      jscolor.onComplete = function (bgcolor) {
        content_vue.musicForm.bgcolor = bgcolor;
      };
      /* if(window != window.top){
        window.top.location.href = window.location.href;
    } */
      // 使用于曲式分析的预览功能
      function getAbcContent() {
        return {
          abcContent: $("#source").val(),
          musicType: musicType,
        };
      }
    </script>
    <!-- <script type="text/javascript" src="assets/music_score_editor/js/crypto1/crypto.js"></script>
    <script type="text/javascript" src="assets/music_score_editor/js/crypto1/hmac.js"></script>
    <script type="text/javascript" src="assets/music_score_editor/js/crypto1/sha1.js"></script>
    <script type="text/javascript" src="assets/music_score_editor/js/base64.js"></script>
    <script type="text/javascript" src="assets/music_score_editor/js/plupload.full.min.js"></script>
    <script type="text/javascript" src="assets/music_score_editor/js/upload.js"></script> -->
    <!-- <script src="soundfont-player-master/dist/soundfont-player.js"></script> -->
    
  </body>
</html>
